!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("mobx")):"function"==typeof define&&define.amd?define(["mobx"],e):"object"==typeof exports?exports["trood-restify"]=e(require("mobx")):t["trood-restify"]=e(t.mobx)}(this,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n.h="a0bad5911f64e453645e",n.cn="main",n(n.s=130)}([function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return Rt})),n.d(e,"e",(function(){return Ce}));var o,i=n(1),a="warn";function s(){return a}!function(t){t.afterCreate="afterCreate",t.afterAttach="afterAttach",t.afterCreationFinalization="afterCreationFinalization",t.beforeDetach="beforeDetach",t.beforeDestroy="beforeDestroy"}(o||(o={}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function c(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var f=function(){return(f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function p(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function l(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function d(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}function y(t){return Q(t,1),tt(t).type}function b(t,e){Q(t,1),It(e,(function(t){return"object"==typeof t}),"object or array",2),tt(t).applyPatches(lt(e))}function v(t,e){void 0===e&&(e=!0),Q(t,1);var n=tt(t);return e?n.snapshot:bt(n.type.getSnapshot(n,!1))}function g(t,e){void 0===e&&(e=1),Q(t,1),St(e,2,0);for(var n=e,r=tt(t).parent;r;){if(0==--n)return r.storedValue;r=r.parent}throw ut("Failed to find the parent of "+tt(t)+" at depth "+e)}function m(t){return Q(t,1),tt(t).root.storedValue}function w(t){Q(t,1);var e=tt(t);e.isRoot?e.die():e.parent.removeChild(e.subpath)}var _,A=function(){function t(t,e,n,r){this.type=t,this.environment=r,this._state=W.INITIALIZING,this.environment=r,this.baseSetParent(e,n)}return Object.defineProperty(t.prototype,"subpath",{get:function(){return this._subpath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subpathUponDeath",{get:function(){return this._subpathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pathUponDeath",{get:function(){return this._pathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.type.getValue(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(t){var e=this.isAlive;this._state=t;var n=this.isAlive;this.aliveAtom&&e!==n&&this.aliveAtom.reportChanged()},enumerable:!1,configurable:!0}),t.prototype.fireInternalHook=function(t){this._hookSubscribers&&this._hookSubscribers.emit(t,this,t)},t.prototype.registerHook=function(t,e){return this._hookSubscribers||(this._hookSubscribers=new mt),this._hookSubscribers.register(t,e)},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),t.prototype.baseSetParent=function(t,e){this._parent=t,this._subpath=e,this._escapedSubpath=void 0,this.pathAtom&&this.pathAtom.reportChanged()},Object.defineProperty(t.prototype,"path",{get:function(){return this.getEscapedPath(!0)},enumerable:!1,configurable:!0}),t.prototype.getEscapedPath=function(t){return t&&(this.pathAtom||(this.pathAtom=Object(i.createAtom)("path")),this.pathAtom.reportObserved()),this.parent?(void 0===this._escapedSubpath&&(this._escapedSubpath=this._subpath?Tt(this._subpath):""),this.parent.getEscapedPath(t)+"/"+this._escapedSubpath):""},Object.defineProperty(t.prototype,"isRoot",{get:function(){return null===this.parent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAlive",{get:function(){return this.state!==W.DEAD},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDetaching",{get:function(){return this.state===W.DETACHING},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"observableIsAlive",{get:function(){return this.aliveAtom||(this.aliveAtom=Object(i.createAtom)("alive")),this.aliveAtom.reportObserved(),this.isAlive},enumerable:!1,configurable:!0}),t.prototype.baseFinalizeCreation=function(t){if(this.state===W.CREATED){if(this.parent){if(this.parent.state!==W.FINALIZED)return;this.fireHook(o.afterAttach)}this.state=W.FINALIZED,t&&t()}},t.prototype.baseFinalizeDeath=function(){this._hookSubscribers&&this._hookSubscribers.clearAll(),this._subpathUponDeath=this._subpath,this._pathUponDeath=this.getEscapedPath(!1),this.baseSetParent(null,""),this.state=W.DEAD},t.prototype.baseAboutToDie=function(){this.fireHook(o.beforeDestroy)},t}(),j=function(t){function e(e,n,r,o,i){var a=t.call(this,e,n,r,o)||this;try{a.storedValue=e.createNewInstance(i)}catch(t){throw a.state=W.DEAD,t}return a.state=W.CREATED,a.finalizeCreation(),a}return c(e,t),Object.defineProperty(e.prototype,"root",{get:function(){if(!this.parent)throw ut("This scalar node is not part of a tree");return this.parent.root},enumerable:!1,configurable:!0}),e.prototype.setParent=function(t,e){var n=this.parent!==t,r=this.subpath!==e;(n||r)&&(this.environment=void 0,this.baseSetParent(this.parent,e))},Object.defineProperty(e.prototype,"snapshot",{get:function(){return bt(this.getSnapshot())},enumerable:!1,configurable:!0}),e.prototype.getSnapshot=function(){return this.type.getSnapshot(this)},e.prototype.toString=function(){var t=(this.isAlive?this.path:this.pathUponDeath)||"<root>";return this.type.name+"@"+t+(this.isAlive?"":" [dead]")},e.prototype.die=function(){this.isAlive&&this.state!==W.DETACHING&&(this.aboutToDie(),this.finalizeDeath())},e.prototype.finalizeCreation=function(){this.baseFinalizeCreation()},e.prototype.aboutToDie=function(){this.baseAboutToDie()},e.prototype.finalizeDeath=function(){this.baseFinalizeDeath()},e.prototype.fireHook=function(t){this.fireInternalHook(t)},p([i.action],e.prototype,"die",null),e}(A),I=1,E={onError:function(t){throw t}},S=function(t){function e(e,n,r,o,i){var a=t.call(this,e,n,r,o)||this;if(a.nodeId=++I,a.isProtectionEnabled=!0,a._autoUnbox=!0,a._isRunningAction=!1,a._hasSnapshotReaction=!1,a._observableInstanceState=0,a._cachedInitialSnapshotCreated=!1,a.unbox=a.unbox.bind(a),a._initialSnapshot=bt(i),a.identifierAttribute=e.identifierAttribute,n||(a.identifierCache=new K),a._childNodes=e.initializeChildNodes(a,a._initialSnapshot),a.identifier=null,a.unnormalizedIdentifier=null,a.identifierAttribute&&a._initialSnapshot){var s=a._initialSnapshot[a.identifierAttribute];if(void 0===s){var u=a._childNodes[a.identifierAttribute];u&&(s=u.value)}if("string"!=typeof s&&"number"!=typeof s)throw ut("Instance identifier '"+a.identifierAttribute+"' for type '"+a.type.name+"' must be a string or a number");a.identifier=Oe(s),a.unnormalizedIdentifier=s}return n?n.root.identifierCache.addNodeToCache(a):a.identifierCache.addNodeToCache(a),a}return c(e,t),e.prototype.applyPatches=function(t){this.createObservableInstanceIfNeeded(),this._applyPatches(t)},e.prototype.applySnapshot=function(t){this.createObservableInstanceIfNeeded(),this._applySnapshot(t)},e.prototype.createObservableInstanceIfNeeded=function(){0===this._observableInstanceState&&this.createObservableInstance()},e.prototype.createObservableInstance=function(){var t,e;this._observableInstanceState=1;for(var n=[],r=this.parent;r&&0===r._observableInstanceState;)n.unshift(r),r=r.parent;try{for(var a=l(n),s=a.next();!s.done;s=a.next()){s.value.createObservableInstanceIfNeeded()}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}var u,c,f=this.type;try{this.storedValue=f.createNewInstance(this._childNodes),this.preboot(),this._isRunningAction=!0,f.finalizeNewInstance(this,this.storedValue)}catch(t){throw this.state=W.DEAD,t}finally{this._isRunningAction=!1}this._observableInstanceState=2,u=this,c="snapshot",Object(i.getAtom)(u,c).trackAndCompute(),this.isRoot&&this._addSnapshotReaction(),this._childNodes=at,this.state=W.CREATED,this.fireHook(o.afterCreate),this.finalizeCreation()},Object.defineProperty(e.prototype,"root",{get:function(){var t=this.parent;return t?t.root:this},enumerable:!1,configurable:!0}),e.prototype.clearParent=function(){if(this.parent){this.fireHook(o.beforeDetach);var t=this.state;this.state=W.DETACHING;var e=this.root,n=e.environment,r=e.identifierCache.splitCache(this);try{this.parent.removeChild(this.subpath),this.baseSetParent(null,""),this.environment=n,this.identifierCache=r}finally{this.state=t}}},e.prototype.setParent=function(t,e){var n=t!==this.parent,r=e!==this.subpath;(n||r)&&(n?(this.environment=void 0,t.root.identifierCache.mergeCache(this),this.baseSetParent(t,e),this.fireHook(o.afterAttach)):r&&this.baseSetParent(this.parent,e))},e.prototype.fireHook=function(t){var e=this;this.fireInternalHook(t);var n=this.storedValue&&"object"==typeof this.storedValue&&this.storedValue[t];"function"==typeof n&&(i._allowStateChangesInsideComputed?Object(i._allowStateChangesInsideComputed)((function(){n.apply(e.storedValue)})):n.apply(this.storedValue))},Object.defineProperty(e.prototype,"snapshot",{get:function(){return bt(this.getSnapshot())},enumerable:!1,configurable:!0}),e.prototype.getSnapshot=function(){return this.isAlive?2===this._observableInstanceState?this._getActualSnapshot():this._getCachedInitialSnapshot():this._snapshotUponDeath},e.prototype._getActualSnapshot=function(){return this.type.getSnapshot(this)},e.prototype._getCachedInitialSnapshot=function(){if(!this._cachedInitialSnapshotCreated){var t=this.type,e=this._childNodes,n=this._initialSnapshot;this._cachedInitialSnapshot=t.processInitialSnapshot(e,n),this._cachedInitialSnapshotCreated=!0}return this._cachedInitialSnapshot},e.prototype.isRunningAction=function(){return!!this._isRunningAction||!this.isRoot&&this.parent.isRunningAction()},e.prototype.assertAlive=function(t){var e=s();if(!this.isAlive&&"ignore"!==e){var n=this._getAssertAliveError(t);switch(e){case"error":throw ut(n);case"warn":jt(n)}}},e.prototype._getAssertAliveError=function(t){var e=this.getEscapedPath(!1)||this.pathUponDeath||"",n=t.subpath&&Tt(t.subpath)||"",r=t.actionContext||D();r&&"action"!==r.type&&r.parentActionEvent&&(r=r.parentActionEvent);var o,i="";r&&null!=r.name&&(i=(r&&r.context&&(Q(o=r.context,1),tt(o).path)||e)+"."+r.name+"()");return"You are trying to read or write to an object that is no longer part of a state tree. (Object type: '"+this.type.name+"', Path upon death: '"+e+"', Subpath: '"+n+"', Action: '"+i+"'). Either detach nodes first, or don't use objects after removing / replacing them in the tree."},e.prototype.getChildNode=function(t){this.assertAlive({subpath:t}),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildNode(this,t):this._childNodes[t]}finally{this._autoUnbox=!0}},e.prototype.getChildren=function(){this.assertAlive(at),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildren(this):ot(this._childNodes)}finally{this._autoUnbox=!0}},e.prototype.getChildType=function(t){return this.type.getChildType(t)},Object.defineProperty(e.prototype,"isProtected",{get:function(){return this.root.isProtectionEnabled},enumerable:!1,configurable:!0}),e.prototype.assertWritable=function(t){if(this.assertAlive(t),!this.isRunningAction()&&this.isProtected)throw ut("Cannot modify '"+this+"', the object is protected and can only be modified by using an action.")},e.prototype.removeChild=function(t){this.type.removeChild(this,t)},e.prototype.unbox=function(t){return t?(this.assertAlive({subpath:t.subpath||t.subpathUponDeath}),this._autoUnbox?t.value:t):t},e.prototype.toString=function(){var t=(this.isAlive?this.path:this.pathUponDeath)||"<root>",e=this.identifier?"(id: "+this.identifier+")":"";return this.type.name+"@"+t+e+(this.isAlive?"":" [dead]")},e.prototype.finalizeCreation=function(){var t=this;this.baseFinalizeCreation((function(){var e,n;try{for(var r=l(t.getChildren()),i=r.next();!i.done;i=r.next()){i.value.finalizeCreation()}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}t.fireInternalHook(o.afterCreationFinalization)}))},e.prototype.detach=function(){if(!this.isAlive)throw ut("Error while detaching, node is not alive.");this.clearParent()},e.prototype.preboot=function(){var t=this;this._applyPatches=F(this.storedValue,"@APPLY_PATCHES",(function(e){e.forEach((function(e){var n=kt(e.path);rt(t,n.slice(0,-1)).applyPatchLocally(n[n.length-1],e)}))})),this._applySnapshot=F(this.storedValue,"@APPLY_SNAPSHOT",(function(e){if(e!==t.snapshot)return t.type.applySnapshot(t,e)})),vt(this.storedValue,"$treenode",this),vt(this.storedValue,"toJSON",nt)},e.prototype.die=function(){this.isAlive&&this.state!==W.DETACHING&&(this.aboutToDie(),this.finalizeDeath())},e.prototype.aboutToDie=function(){0!==this._observableInstanceState&&(this.getChildren().forEach((function(t){t.aboutToDie()})),this.baseAboutToDie(),this._internalEventsEmit("dispose"),this._internalEventsClear("dispose"))},e.prototype.finalizeDeath=function(){this.getChildren().forEach((function(t){t.finalizeDeath()})),this.root.identifierCache.notifyDied(this);var t=this.snapshot;this._snapshotUponDeath=t,this._internalEventsClearAll(),this.baseFinalizeDeath()},e.prototype.onSnapshot=function(t){return this._addSnapshotReaction(),this._internalEventsRegister("snapshot",t)},e.prototype.emitSnapshot=function(t){this._internalEventsEmit("snapshot",t)},e.prototype.onPatch=function(t){return this._internalEventsRegister("patch",t)},e.prototype.emitPatch=function(t,e){if(this._internalEventsHasSubscribers("patch")){var n=h(function(t){if(!("oldValue"in t))throw ut("Patches without `oldValue` field cannot be inversed");return[Pt(t),Ot(t)]}(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var o=e[r];for(var i in o)t[i]=o[i]}return t}({},t,{path:e.path.substr(this.path.length)+"/"+t.path})),2),r=n[0],o=n[1];this._internalEventsEmit("patch",r,o)}this.parent&&this.parent.emitPatch(t,e)},e.prototype.hasDisposer=function(t){return this._internalEventsHas("dispose",t)},e.prototype.addDisposer=function(t){if(this.hasDisposer(t))throw ut("cannot add a disposer when it is already registered for execution");this._internalEventsRegister("dispose",t,!0)},e.prototype.removeDisposer=function(t){if(!this._internalEventsHas("dispose",t))throw ut("cannot remove a disposer which was never registered for execution");this._internalEventsUnregister("dispose",t)},e.prototype.removeMiddleware=function(t){if(this.middlewares){var e=this.middlewares.indexOf(t);e>=0&&this.middlewares.splice(e,1)}},e.prototype.addMiddleWare=function(t,e){var n=this;void 0===e&&(e=!0);var r={handler:t,includeHooks:e};return this.middlewares?this.middlewares.push(r):this.middlewares=[r],function(){n.removeMiddleware(r)}},e.prototype.applyPatchLocally=function(t,e){this.assertWritable({subpath:t}),this.createObservableInstanceIfNeeded(),this.type.applyPatchLocally(this,t,e)},e.prototype._addSnapshotReaction=function(){var t=this;if(!this._hasSnapshotReaction){var e=Object(i.reaction)((function(){return t.snapshot}),(function(e){return t.emitSnapshot(e)}),E);this.addDisposer(e),this._hasSnapshotReaction=!0}},e.prototype._internalEventsHasSubscribers=function(t){return!!this._internalEvents&&this._internalEvents.hasSubscribers(t)},e.prototype._internalEventsRegister=function(t,e,n){return void 0===n&&(n=!1),this._internalEvents||(this._internalEvents=new mt),this._internalEvents.register(t,e,n)},e.prototype._internalEventsHas=function(t,e){return!!this._internalEvents&&this._internalEvents.has(t,e)},e.prototype._internalEventsUnregister=function(t,e){this._internalEvents&&this._internalEvents.unregister(t,e)},e.prototype._internalEventsEmit=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this._internalEvents&&(e=this._internalEvents).emit.apply(e,d([t],n))},e.prototype._internalEventsClear=function(t){this._internalEvents&&this._internalEvents.clear(t)},e.prototype._internalEventsClearAll=function(){this._internalEvents&&this._internalEvents.clearAll()},p([i.action],e.prototype,"createObservableInstance",null),p([i.computed],e.prototype,"snapshot",null),p([i.action],e.prototype,"detach",null),p([i.action],e.prototype,"die",null),e}(A);!function(t){t[t.String=1]="String",t[t.Number=2]="Number",t[t.Boolean=4]="Boolean",t[t.Date=8]="Date",t[t.Literal=16]="Literal",t[t.Array=32]="Array",t[t.Map=64]="Map",t[t.Object=128]="Object",t[t.Frozen=256]="Frozen",t[t.Optional=512]="Optional",t[t.Reference=1024]="Reference",t[t.Identifier=2048]="Identifier",t[t.Late=4096]="Late",t[t.Refinement=8192]="Refinement",t[t.Union=16384]="Union",t[t.Null=32768]="Null",t[t.Undefined=65536]="Undefined",t[t.Integer=131072]="Integer",t[t.Custom=262144]="Custom",t[t.SnapshotProcessor=524288]="SnapshotProcessor"}(_||(_={}));var x=function(){function t(t){this.isType=!0,this.name=t}return t.prototype.create=function(t,e){return G(this,t),this.instantiate(null,"",e,t).value},t.prototype.getSnapshot=function(t,e){throw ut("unimplemented method")},t.prototype.isAssignableFrom=function(t){return t===this},t.prototype.validate=function(t,e){if(et(t)){var n=y(t);return this.isAssignableFrom(n)?R():H(e,t)}return this.isValidSnapshot(t,e)},t.prototype.is=function(t){return 0===this.validate(t,[{path:"",type:this}]).length},Object.defineProperty(t.prototype,"Type",{get:function(){throw ut("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TypeWithoutSTN",{get:function(){throw ut("Factory.TypeWithoutSTN should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.TypeWithoutSTN`")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SnapshotType",{get:function(){throw ut("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CreationType",{get:function(){throw ut("Factory.CreationType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.CreationType`")},enumerable:!1,configurable:!0}),p([i.action],t.prototype,"create",null),t}(),P=function(t){function e(e){return t.call(this,e)||this}return c(e,t),e.prototype.create=function(e,n){return void 0===e&&(e=this.getDefaultSnapshot()),t.prototype.create.call(this,e,n)},e.prototype.getValue=function(t){return t.createObservableInstanceIfNeeded(),t.storedValue},e.prototype.tryToReconcileNode=function(t,e){return!t.isDetaching&&(t.snapshot===e||(!(!X(e)||tt(e)!==t)||!(t.type!==this||!dt(e)||X(e)||t.identifierAttribute&&t.identifier!==Oe(e[t.identifierAttribute]))&&(t.applySnapshot(e),!0)))},e.prototype.reconcile=function(t,e,n,r){if(this.tryToReconcileNode(t,e))return t.setParent(n,r),t;if(t.die(),X(e)&&this.isAssignableFrom(y(e))){var o=tt(e);return o.setParent(n,r),o}return this.instantiate(n,r,void 0,e)},e.prototype.getSubTypes=function(){return null},p([i.action],e.prototype,"create",null),e}(x),O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.createNewInstance=function(t){return t},e.prototype.getValue=function(t){return t.storedValue},e.prototype.getSnapshot=function(t){return t.storedValue},e.prototype.reconcile=function(t,e,n,r){if(!t.isDetaching&&t.type===this&&t.storedValue===e)return t;var o=this.instantiate(n,r,void 0,e);return t.die(),o},e.prototype.getSubTypes=function(){return null},e}(x);function T(t){return"object"==typeof t&&t&&!0===t.isType}function N(t,e){It(t,T,"mobx-state-tree type",e)}new Map;!function(){function t(t,e){this.hooks=t,this.call=e,this.flowsPending=0,this.running=!0,t&&t.onStart(e)}t.prototype.finish=function(t){this.running&&(this.running=!1,this.hooks&&this.hooks.onFinish(this.call,t))},t.prototype.incFlowsPending=function(){this.flowsPending++},t.prototype.decFlowsPending=function(){this.flowsPending--},Object.defineProperty(t.prototype,"hasFlowsPending",{get:function(){return this.flowsPending>0},enumerable:!1,configurable:!0})}();var C,k=1;function D(){return C}function V(){return k++}function z(t,e){var n=tt(t.context);"action"===t.type&&n.assertAlive({actionContext:t});var r=n._isRunningAction;n._isRunningAction=!0;var a=C;C=t;try{return function(t,e,n){var r=new B(t,n);if(r.isEmpty)return Object(i.action)(n).apply(null,e.args);var a=null;return function t(e){var s=r.getNextMiddleware(),u=s&&s.handler;return u?!s.includeHooks&&o[e.name]?t(e):(u(e,(function(e,n){!0,a=t(e),n&&(a=n(a))}),(function(t){!0,a=t})),a):Object(i.action)(n).apply(null,e.args)}(e)}(n,t,e)}finally{C=a,n._isRunningAction=r}}function U(t){if(t)return"action"===t.type?t:t.parentActionEvent}function F(t,e,n){var r=function(){var r=V(),o=C,i=U(o);return z({type:"action",name:e,id:r,args:wt(arguments),context:t,tree:m(t),rootId:o?o.rootId:r,parentId:o?o.id:0,allParentIds:o?d(o.allParentIds,[o.id]):[],parentEvent:o,parentActionEvent:i},n)};return r._isMSTAction=!0,r}var B=function(){function t(t,e){this.arrayIndex=0,this.inArrayIndex=0,this.middlewares=[],e.$mst_middleware&&this.middlewares.push(e.$mst_middleware);for(var n=t;n;)n.middlewares&&this.middlewares.push(n.middlewares),n=n.parent}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.middlewares.length<=0},enumerable:!1,configurable:!0}),t.prototype.getNextMiddleware=function(){var t=this.middlewares[this.arrayIndex];if(t){var e=t[this.inArrayIndex++];return e||(this.arrayIndex++,this.inArrayIndex=0,this.getNextMiddleware())}},t}();function L(t){return"function"==typeof t?"<function"+(t.name?" "+t.name:"")+">":X(t)?"<"+t+">":"`"+function(t){try{return JSON.stringify(t)}catch(t){return"<Unserializable: "+t+">"}}(t)+"`"}function $(t){var e=t.value,n=t.context[t.context.length-1].type,r=t.context.map((function(t){return t.path})).filter((function(t){return t.length>0})).join("/"),o=r.length>0?'at path "/'+r+'" ':"",i=X(e)?"value of type "+tt(e).type.name+":":yt(e)?"value":"snapshot",a=n&&X(e)&&n.is(tt(e).snapshot);return""+o+i+" "+L(e)+" is not assignable "+(n?"to type: `"+n.name+"`":"")+(t.message?" ("+t.message+")":"")+(n?function(t){return T(t)&&(t.flags&(_.String|_.Number|_.Integer|_.Boolean|_.Date))>0}(n)||yt(e)?".":", expected an instance of `"+n.name+"` or a snapshot like `"+n.describe()+"` instead."+(a?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function M(t,e,n){return t.concat([{path:e,type:n}])}function R(){return it}function H(t,e,n){return[{context:t,value:e,message:n}]}function Y(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function G(e,n){void 0!==t&&Object({PROD:!0,DEV:!1,NODE_ENV:"production"})&&"true"===Object({PROD:!0,DEV:!1,NODE_ENV:"production"}).ENABLE_TYPE_CHECK&&function(t,e){var n=t.validate(e,[{path:"",type:t}]);if(n.length>0)throw ut(function(t,e,n){if(0===n.length)return;return"Error while converting "+(r=L(e),(r.length<280?r:r.substring(0,272)+"......"+r.substring(r.length-8))+" to `")+t.name+"`:\n\n    "+n.map($).join("\n    ");var r}(t,e,n))}(e,n)}var W,J=0,K=function(){function t(){this.cacheId=J++,this.cache=i.observable.map(),this.lastCacheModificationPerId=i.observable.map()}return t.prototype.updateLastCacheModificationPerId=function(t){var e=this.lastCacheModificationPerId.get(t);this.lastCacheModificationPerId.set(t,void 0===e?1:e+1)},t.prototype.getLastCacheModificationPerId=function(t){var e=this.lastCacheModificationPerId.get(t)||0;return this.cacheId+"-"+e},t.prototype.addNodeToCache=function(t,e){if(void 0===e&&(e=!0),t.identifierAttribute){var n=t.identifier;this.cache.has(n)||this.cache.set(n,i.observable.array([],st));var r=this.cache.get(n);if(-1!==r.indexOf(t))throw ut("Already registered");r.push(t),e&&this.updateLastCacheModificationPerId(n)}},t.prototype.mergeCache=function(t){var e=this;Object(i.values)(t.identifierCache.cache).forEach((function(t){return t.forEach((function(t){e.addNodeToCache(t)}))}))},t.prototype.notifyDied=function(t){if(t.identifierAttribute){var e=t.identifier,n=this.cache.get(e);n&&(n.remove(t),n.length||this.cache.delete(e),this.updateLastCacheModificationPerId(t.identifier))}},t.prototype.splitCache=function(e){var n=this,r=new t,o=e.path;return Object(i.entries)(this.cache).forEach((function(t){for(var e=h(t,2),i=e[0],a=e[1],s=!1,u=a.length-1;u>=0;u--)0===a[u].path.indexOf(o)&&(r.addNodeToCache(a[u],!1),a.splice(u,1),s=!0);s&&n.updateLastCacheModificationPerId(i)})),r},t.prototype.has=function(t,e){var n=this.cache.get(e);return!!n&&n.some((function(e){return t.isAssignableFrom(e.type)}))},t.prototype.resolve=function(t,e){var n=this.cache.get(e);if(!n)return null;var r=n.filter((function(e){return t.isAssignableFrom(e.type)}));switch(r.length){case 0:return null;case 1:return r[0];default:throw ut("Cannot resolve a reference to type '"+t.name+"' with id: '"+e+"' unambigously, there are multiple candidates: "+r.map((function(t){return t.path})).join(", "))}},t}();function q(t,e,n,r,o){var i=et(o);if(i){if(i.parent)throw ut("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+(e?e.path:"")+"/"+n+"', but it lives already at '"+i.path+"'");return e&&i.setParent(e,n),i}return new S(t,e,n,r,o)}function Z(t,e,n,r,o){return new j(t,e,n,r,o)}function X(t){return!(!t||!t.$treenode)}function Q(t,e){It(t,X,"mobx-state-tree node",e)}function tt(t){if(!X(t))throw ut("Value "+t+" is no MST Node");return t.$treenode}function et(t){return t&&t.$treenode||null}function nt(){return tt(this).snapshot}!function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CREATED=1]="CREATED",t[t.FINALIZED=2]="FINALIZED",t[t.DETACHING=3]="DETACHING",t[t.DEAD=4]="DEAD"}(W||(W={}));function rt(t,e,n){void 0===n&&(n=!0);for(var r=t,o=0;o<e.length;o++){var i=e[o];if(".."===i){if(r=r.parent)continue}else{if("."===i)continue;if(r){if(r instanceof j)try{var a=r.value;X(a)&&(r=tt(a))}catch(t){if(!n)return;throw t}if(r instanceof S)if(r.getChildType(i)&&(r=r.getChildNode(i)))continue}}if(n)throw ut("Could not resolve '"+i+"' in path '"+(Ct(e.slice(0,o))||"/")+"' while resolving '"+Ct(e)+"'");return}return r}function ot(t){if(!t)return it;var e=Object.keys(t);if(!e.length)return it;var n=new Array(e.length);return e.forEach((function(e,r){n[r]=t[e]})),n}var it=Object.freeze([]),at=Object.freeze({}),st="string"==typeof i.$mobx?{deep:!1}:{deep:!1,proxy:!1};function ut(t){return void 0===t&&(t="Illegal state"),new Error("[mobx-state-tree] "+t)}function ct(t){return t}Object.freeze(st);var ft=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function pt(t){return Array.isArray(t)||Object(i.isObservableArray)(t)}function lt(t){return t?pt(t)?t:[t]:it}function ht(t){if(null===t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function dt(t){return!(null===t||"object"!=typeof t||t instanceof Date||t instanceof RegExp)}function yt(t,e){return void 0===e&&(e=!0),null==t||!!("string"==typeof t||"number"==typeof t||"boolean"==typeof t||e&&t instanceof Date)}function bt(t){return t}function vt(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}var gt=function(){function t(){this.handlers=[]}return Object.defineProperty(t.prototype,"hasSubscribers",{get:function(){return this.handlers.length>0},enumerable:!1,configurable:!0}),t.prototype.register=function(t,e){var n=this;return void 0===e&&(e=!1),e?this.handlers.unshift(t):this.handlers.push(t),function(){n.unregister(t)}},t.prototype.has=function(t){return this.handlers.indexOf(t)>=0},t.prototype.unregister=function(t){var e=this.handlers.indexOf(t);e>=0&&this.handlers.splice(e,1)},t.prototype.clear=function(){this.handlers.length=0},t.prototype.emit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.handlers.slice();n.forEach((function(e){return e.apply(void 0,d(t))}))},t}(),mt=function(){function t(){}return t.prototype.hasSubscribers=function(t){var e=this.eventHandlers&&this.eventHandlers[t];return!!e&&e.hasSubscribers},t.prototype.register=function(t,e,n){void 0===n&&(n=!1),this.eventHandlers||(this.eventHandlers={});var r=this.eventHandlers[t];return r||(r=this.eventHandlers[t]=new gt),r.register(e,n)},t.prototype.has=function(t,e){var n=this.eventHandlers&&this.eventHandlers[t];return!!n&&n.has(e)},t.prototype.unregister=function(t,e){var n=this.eventHandlers&&this.eventHandlers[t];n&&n.unregister(e)},t.prototype.clear=function(t){this.eventHandlers&&delete this.eventHandlers[t]},t.prototype.clearAll=function(){this.eventHandlers=void 0},t.prototype.emit=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.eventHandlers&&this.eventHandlers[t];o&&(e=o).emit.apply(e,d(n))},t}();function wt(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t[n];return e}function _t(t,e){return 0===t.indexOf(e)}var At=function(t,e){};function jt(t){console.warn(new Error("[mobx-state-tree] "+t))}function It(t,e,n,r){0}function Et(t,e){It()}function St(t,e,n,r){It(),void 0!==n&&It(),void 0!==r&&It()}function xt(t,e,n){void 0===n&&(n=!0),It(),n||It()}function Pt(t){switch(t.op){case"add":return{op:"add",path:t.path,value:t.value};case"remove":return{op:"remove",path:t.path};case"replace":return{op:"replace",path:t.path,value:t.value}}}function Ot(t){switch(t.op){case"add":return{op:"remove",path:t.path};case"remove":return{op:"add",path:t.path,value:t.oldValue};case"replace":return{op:"replace",path:t.path,value:t.oldValue}}}function Tt(t){return!0==("number"==typeof t)?""+t:-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function Nt(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function Ct(t){if(0===t.length)return"";var e=function(t){return t.map(Tt).join("/")};return"."===t[0]||".."===t[0]?e(t):"/"+e(t)}function kt(t){var e=t.split("/").map(Nt);if(!(""===t||"."===t||".."===t||_t(t,"/")||_t(t,"./")||_t(t,"../")))throw ut("a json path must be either rooted, empty or relative, but got '"+t+"'");return""===e[0]&&e.shift(),e}At.ids={};var Dt=function(t){function e(e,n,r){var o=t.call(this,r||e.name)||this;return o._subtype=e,o._processors=n,o}return c(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){return this._subtype.flags|_.SnapshotProcessor},enumerable:!1,configurable:!0}),e.prototype.describe=function(){return"snapshotProcessor("+this._subtype.describe()+")"},e.prototype.preProcessSnapshot=function(t){return this._processors.preProcessor?this._processors.preProcessor.call(null,t):t},e.prototype.postProcessSnapshot=function(t){return this._processors.postProcessor?this._processors.postProcessor.call(null,t):t},e.prototype._fixNode=function(t){var e=this;!function(t,e){for(var n,r,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];try{for(var a=l(o),s=a.next();!s.done;s=a.next()){var u=s.value;t[u]=e[u].bind(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}(t.type,this,"isAssignableFrom","create");var n=t.getSnapshot;t.getSnapshot=function(){return e.postProcessSnapshot(n.call(t))}},e.prototype.instantiate=function(t,e,n,r){var o=X(r)?r:this.preProcessSnapshot(r),i=this._subtype.instantiate(t,e,n,o);return this._fixNode(i),i},e.prototype.reconcile=function(t,e,n,r){var o=this._subtype.reconcile(t,X(e)?e:this.preProcessSnapshot(e),n,r);return o!==t&&this._fixNode(o),o},e.prototype.getSnapshot=function(t,e){void 0===e&&(e=!0);var n=this._subtype.getSnapshot(t);return e?this.postProcessSnapshot(n):n},e.prototype.isValidSnapshot=function(t,e){var n=this.preProcessSnapshot(t);return this._subtype.validate(n,e)},e.prototype.getSubTypes=function(){return this._subtype},e.prototype.is=function(t){var e=T(t)?this._subtype:X(t)?v(t,!1):this.preProcessSnapshot(t);return 0===this._subtype.validate(e,[{path:"",type:this._subtype}]).length},e}(x);var Vt,zt="Map.put can only be used to store complex values that have an identifier type attribute";!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO"}(Vt||(Vt={}));var Ut=function(t){function e(e){return t.call(this,e,i.observable.ref.enhancer)||this}return c(e,t),e.prototype.get=function(e){return t.prototype.get.call(this,""+e)},e.prototype.has=function(e){return t.prototype.has.call(this,""+e)},e.prototype.delete=function(e){return t.prototype.delete.call(this,""+e)},e.prototype.set=function(e,n){return t.prototype.set.call(this,""+e,n)},e.prototype.put=function(t){if(!t)throw ut("Map.put cannot be used to set empty values");if(X(t)){var e=tt(t);if(null===e.identifier)throw ut(zt);return this.set(e.identifier,t),t}if(dt(t)){var n=tt(this),r=n.type;if(r.identifierMode!==Vt.YES)throw ut(zt);var o=t[r.mapIdentifierAttribute];if(!Te(o)){var i=this.put(r.getChildType().create(t,n.environment));return this.put(v(i))}var a=Oe(o);return this.set(a,t),this.get(a)}throw ut("Map.put can only be used to store complex values")},e}(i.ObservableMap),Ft=function(t){function e(e,n,r){void 0===r&&(r=[]);var o=t.call(this,e)||this;return o._subType=n,o.identifierMode=Vt.UNKNOWN,o.mapIdentifierAttribute=void 0,o.flags=_.Map,o.hookInitializers=[],o._determineIdentifierMode(),o.hookInitializers=r,o}return c(e,t),e.prototype.hooks=function(t){var n=this.hookInitializers.length>0?this.hookInitializers.concat(t):[t];return new e(this.name,this._subType,n)},e.prototype.instantiate=function(t,e,n,r){return this._determineIdentifierMode(),q(this,t,e,n,r)},e.prototype._determineIdentifierMode=function(){if(this.identifierMode===Vt.UNKNOWN){var t=[];if(function t(e,n){var r,o,i=e.getSubTypes();if("cannotDetermine"===i)return!1;if(i){var a=lt(i);try{for(var s=l(a),u=s.next();!u.done;u=s.next()){if(!t(u.value,n))return!1}}catch(t){r={error:t}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}}return e instanceof Wt&&n.push(e),!0}(this._subType,t)){var e=void 0;t.forEach((function(t){if(t.identifierAttribute){if(e&&e!==t.identifierAttribute)throw ut("The objects in a map should all have the same identifier attribute, expected '"+e+"', but child of type '"+t.name+"' declared attribute '"+t.identifierAttribute+"' as identifier");e=t.identifierAttribute}})),e?(this.identifierMode=Vt.YES,this.mapIdentifierAttribute=e):this.identifierMode=Vt.NO}}},e.prototype.initializeChildNodes=function(t,e){void 0===e&&(e={});var n=t.type._subType,r={};return Object.keys(e).forEach((function(o){r[o]=n.instantiate(t,o,void 0,e[o])})),r},e.prototype.createNewInstance=function(t){return new Ut(t)},e.prototype.finalizeNewInstance=function(t,e){Object(i._interceptReads)(e,t.unbox),t.type.hookInitializers.forEach((function(t){var n=t(e);Object.keys(n).forEach((function(t){var r=n[t],o=F(e,t,r);vt(e,t,o)}))})),Object(i.intercept)(e,this.willChange),Object(i.observe)(e,this.didChange)},e.prototype.describe=function(){return"Map<string, "+this._subType.describe()+">"},e.prototype.getChildren=function(t){return Object(i.values)(t.storedValue)},e.prototype.getChildNode=function(t,e){var n=t.storedValue.get(""+e);if(!n)throw ut("Not a child "+e);return n},e.prototype.willChange=function(t){var e=tt(t.object),n=t.name;e.assertWritable({subpath:n});var r=e.type,o=r._subType;switch(t.type){case"update":var i=t.newValue;if(i===t.object.get(n))return null;G(o,i),t.newValue=o.reconcile(e.getChildNode(n),t.newValue,e,n),r.processIdentifier(n,t.newValue);break;case"add":G(o,t.newValue),t.newValue=o.instantiate(e,n,void 0,t.newValue),r.processIdentifier(n,t.newValue)}return t},e.prototype.processIdentifier=function(t,e){if(this.identifierMode===Vt.YES&&e instanceof S){var n=e.identifier;if(n!==t)throw ut("A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '"+n+"', but expected: '"+t+"'")}},e.prototype.getSnapshot=function(t){var e={};return t.getChildren().forEach((function(t){e[t.subpath]=t.snapshot})),e},e.prototype.processInitialSnapshot=function(t){var e={};return Object.keys(t).forEach((function(n){e[n]=t[n].getSnapshot()})),e},e.prototype.didChange=function(t){var e=tt(t.object);switch(t.type){case"update":return void e.emitPatch({op:"replace",path:Tt(t.name),value:t.newValue.snapshot,oldValue:t.oldValue?t.oldValue.snapshot:void 0},e);case"add":return void e.emitPatch({op:"add",path:Tt(t.name),value:t.newValue.snapshot,oldValue:void 0},e);case"delete":var n=t.oldValue.snapshot;return t.oldValue.die(),void e.emitPatch({op:"remove",path:Tt(t.name),oldValue:n},e)}},e.prototype.applyPatchLocally=function(t,e,n){var r=t.storedValue;switch(n.op){case"add":case"replace":r.set(e,n.value);break;case"remove":r.delete(e)}},e.prototype.applySnapshot=function(t,e){G(this,e);var n=t.storedValue,r={};if(Array.from(n.keys()).forEach((function(t){r[t]=!1})),e)for(var o in e)n.set(o,e[o]),r[""+o]=!0;Object.keys(r).forEach((function(t){!1===r[t]&&n.delete(t)}))},e.prototype.getChildType=function(){return this._subType},e.prototype.isValidSnapshot=function(t,e){var n=this;return ht(t)?Y(Object.keys(t).map((function(r){return n._subType.validate(t[r],M(e,r,n._subType))}))):H(e,t,"Value is not a plain object")},e.prototype.getDefaultSnapshot=function(){return at},e.prototype.removeChild=function(t,e){t.storedValue.delete(e)},p([i.action],e.prototype,"applySnapshot",null),e}(P);var Bt=function(t){function e(e,n,r){void 0===r&&(r=[]);var o=t.call(this,e)||this;return o._subType=n,o.flags=_.Array,o.hookInitializers=[],o.hookInitializers=r,o}return c(e,t),e.prototype.hooks=function(t){var n=this.hookInitializers.length>0?this.hookInitializers.concat(t):[t];return new e(this.name,this._subType,n)},e.prototype.instantiate=function(t,e,n,r){return q(this,t,e,n,r)},e.prototype.initializeChildNodes=function(t,e){void 0===e&&(e=[]);var n=t.type._subType,r={};return e.forEach((function(e,o){var i=""+o;r[i]=n.instantiate(t,i,void 0,e)})),r},e.prototype.createNewInstance=function(t){return i.observable.array(ot(t),st)},e.prototype.finalizeNewInstance=function(t,e){Object(i._getAdministration)(e).dehancer=t.unbox,t.type.hookInitializers.forEach((function(t){var n=t(e);Object.keys(n).forEach((function(t){var r=n[t],o=F(e,t,r);vt(e,t,o)}))})),Object(i.intercept)(e,this.willChange),Object(i.observe)(e,this.didChange)},e.prototype.describe=function(){return this._subType.describe()+"[]"},e.prototype.getChildren=function(t){return t.storedValue.slice()},e.prototype.getChildNode=function(t,e){var n=Number(e);if(n<t.storedValue.length)return t.storedValue[n];throw ut("Not a child: "+e)},e.prototype.willChange=function(t){var e=tt(t.object);e.assertWritable({subpath:""+t.index});var n=e.type._subType,r=e.getChildren();switch(t.type){case"update":if(t.newValue===t.object[t.index])return null;var o=Lt(e,n,[r[t.index]],[t.newValue],[t.index]);if(!o)return null;t.newValue=o[0];break;case"splice":var i=t.index,a=t.removedCount,s=t.added,u=Lt(e,n,r.slice(i,i+a),s,s.map((function(t,e){return i+e})));if(!u)return null;t.added=u;for(var c=i+a;c<r.length;c++)r[c].setParent(e,""+(c+s.length-a))}return t},e.prototype.getSnapshot=function(t){return t.getChildren().map((function(t){return t.snapshot}))},e.prototype.processInitialSnapshot=function(t){var e=[];return Object.keys(t).forEach((function(n){e.push(t[n].getSnapshot())})),e},e.prototype.didChange=function(t){var e=tt(t.object);switch(t.type){case"update":return void e.emitPatch({op:"replace",path:""+t.index,value:t.newValue.snapshot,oldValue:t.oldValue?t.oldValue.snapshot:void 0},e);case"splice":for(var n=t.removedCount-1;n>=0;n--)e.emitPatch({op:"remove",path:""+(t.index+n),oldValue:t.removed[n].snapshot},e);for(n=0;n<t.addedCount;n++)e.emitPatch({op:"add",path:""+(t.index+n),value:e.getChildNode(""+(t.index+n)).snapshot,oldValue:void 0},e);return}},e.prototype.applyPatchLocally=function(t,e,n){var r=t.storedValue,o="-"===e?r.length:Number(e);switch(n.op){case"replace":r[o]=n.value;break;case"add":r.splice(o,0,n.value);break;case"remove":r.splice(o,1)}},e.prototype.applySnapshot=function(t,e){G(this,e),t.storedValue.replace(e)},e.prototype.getChildType=function(){return this._subType},e.prototype.isValidSnapshot=function(t,e){var n=this;return pt(t)?Y(t.map((function(t,r){return n._subType.validate(t,M(e,""+r,n._subType))}))):H(e,t,"Value is not an array")},e.prototype.getDefaultSnapshot=function(){return it},e.prototype.removeChild=function(t,e){t.storedValue.splice(Number(e),1)},p([i.action],e.prototype,"applySnapshot",null),e}(P);function Lt(t,e,n,r,o){for(var i,a=!0,s=0;;s++){var u=s<=r.length-1,c=n[s],f=u?r[s]:void 0,p=""+o[s];if(((i=f)instanceof j||i instanceof S)&&(f=f.storedValue),!c&&!u)break;if(u)if(c)if(Mt(c,f))n[s]=$t(e,t,p,f,c);else{for(var l=void 0,h=s;h<n.length;h++)if(Mt(n[h],f)){l=n.splice(h,1)[0];break}a=!1;d=$t(e,t,p,f,l);n.splice(s,0,d)}else{if(X(f)&&tt(f).parent===t)throw ut("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+t.path+"/"+p+"', but it lives already at '"+tt(f).path+"'");a=!1;var d=$t(e,t,p,f);n.splice(s,0,d)}else a=!1,n.splice(s,1),c instanceof S&&c.createObservableInstanceIfNeeded(),c.die(),s--}return a?null:n}function $t(t,e,n,r,o){G(t,r);var i=function(){if(X(r)){var i=tt(r);if(i.assertAlive(at),null!==i.parent&&i.parent===e)return i.setParent(e,n),i}return o?t.reconcile(o,r,e,n):t.instantiate(e,n,void 0,r)}();return o&&o!==i&&(o instanceof S&&o.createObservableInstanceIfNeeded(),o.die()),i}function Mt(t,e){if(!t.isAlive)return!1;if(X(e)){var n=tt(e);return n.isAlive&&n===t}return t.snapshot===e||t instanceof S&&null!==t.identifier&&t.identifierAttribute&&ht(e)&&t.identifier===Oe(e[t.identifierAttribute])&&t.type.is(e)}function Rt(t){return T(t)&&(t.flags&_.Array)>0}function Ht(){return tt(this).toString()}var Yt={name:"AnonymousModel",properties:{},initializers:it};function Gt(t){return Object.keys(t).reduce((function(t,e){var n,r,i;if(e in o)throw ut("Hook '"+e+"' was defined as property. Hooks should be defined as part of the actions");var a=Object.getOwnPropertyDescriptor(t,e);if("get"in a)throw ut("Getters are not supported as properties. Please use views instead");var s=a.value;if(null==s)throw ut("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");if(yt(s))return Object.assign({},t,((n={})[e]=fe(function(t){switch(typeof t){case"string":return qt;case"number":return Zt;case"boolean":return Qt;case"object":if(t instanceof Date)return re}throw ut("Cannot determine primitive type from value "+t)}(s),s),n));if(s instanceof Ft)return Object.assign({},t,((r={})[e]=fe(s,{}),r));if(s instanceof Bt)return Object.assign({},t,((i={})[e]=fe(s,[]),i));if(T(s))return t;throw ut("Invalid type definition for property '"+e+"', cannot infer a type from a value like '"+s+"' ("+typeof s+")")}),t)}var Wt=function(t){function e(e){var n=t.call(this,e.name||Yt.name)||this;return n.flags=_.Object,n.named=function(t){return n.cloneAndEnhance({name:t})},n.props=function(t){return n.cloneAndEnhance({properties:t})},n.preProcessSnapshot=function(t){var e=n.preProcessor;return e?n.cloneAndEnhance({preProcessor:function(n){return e(t(n))}}):n.cloneAndEnhance({preProcessor:t})},n.postProcessSnapshot=function(t){var e=n.postProcessor;return e?n.cloneAndEnhance({postProcessor:function(n){return t(e(n))}}):n.cloneAndEnhance({postProcessor:t})},Object.assign(n,Yt,e),n.properties=Gt(n.properties),n.properties,n.propertyNames=Object.keys(n.properties),n.identifierAttribute=n._getIdentifierAttribute(),n}return c(e,t),e.prototype._getIdentifierAttribute=function(){var t=void 0;return this.forAllProps((function(e,n){if(n.flags&_.Identifier){if(t)throw ut("Cannot define property '"+e+"' as object identifier, property '"+t+"' is already defined as identifier property");t=e}})),t},e.prototype.cloneAndEnhance=function(t){return new e({name:t.name||this.name,properties:Object.assign({},this.properties,t.properties),initializers:this.initializers.concat(t.initializers||[]),preProcessor:t.preProcessor||this.preProcessor,postProcessor:t.postProcessor||this.postProcessor})},e.prototype.actions=function(t){var e=this;return this.cloneAndEnhance({initializers:[function(n){return e.instantiateActions(n,t(n)),n}]})},e.prototype.instantiateActions=function(t,e){if(!ht(e))throw ut("actions initializer should return a plain object containing actions");Object.keys(e).forEach((function(n){if("preProcessSnapshot"===n)throw ut("Cannot define action 'preProcessSnapshot', it should be defined using 'type.preProcessSnapshot(fn)' instead");if("postProcessSnapshot"===n)throw ut("Cannot define action 'postProcessSnapshot', it should be defined using 'type.postProcessSnapshot(fn)' instead");var r=e[n],i=t[n];if(n in o&&i){var a=r;r=function(){i.apply(null,arguments),a.apply(null,arguments)}}var s=r.$mst_middleware,u=r.bind(e);u.$mst_middleware=s;var c=F(t,n,u);e[n]=c,vt(t,n,c)}))},e.prototype.volatile=function(t){var e=this;if("function"!=typeof t)throw ut("You passed an "+typeof t+" to volatile state as an argument, when function is expected");return this.cloneAndEnhance({initializers:[function(n){return e.instantiateVolatileState(n,t(n)),n}]})},e.prototype.instantiateVolatileState=function(t,e){if(!ht(e))throw ut("volatile state initializer should return a plain object containing state");Object(i.set)(t,e)},e.prototype.extend=function(t){var e=this;return this.cloneAndEnhance({initializers:[function(n){var r=t(n),o=r.actions,i=r.views,a=r.state,s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(r,["actions","views","state"]);for(var u in s)throw ut("The `extend` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '"+u+"'");return a&&e.instantiateVolatileState(n,a),i&&e.instantiateViews(n,i),o&&e.instantiateActions(n,o),n}]})},e.prototype.views=function(t){var e=this;return this.cloneAndEnhance({initializers:[function(n){return e.instantiateViews(n,t(n)),n}]})},e.prototype.instantiateViews=function(t,e){if(!ht(e))throw ut("views initializer should return a plain object containing views");Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);if("get"in r)if(Object(i.isComputedProp)(t,n)){var o=Object(i._getAdministration)(t,n);o.derivation=r.get,o.scope=t,r.set&&(o.setter=Object(i.action)(o.name+"-setter",r.set))}else Object(i.computed)(t,n,r,!0);else{if("function"!=typeof r.value)throw ut("A view member should either be a function or getter based property");vt(t,n,r.value)}}))},e.prototype.instantiate=function(t,e,n,r){return q(this,t,e,n,X(r)?r:this.applySnapshotPreProcessor(r))},e.prototype.initializeChildNodes=function(t,e){void 0===e&&(e={});var n=t.type,r={};return n.forAllProps((function(n,o){r[n]=o.instantiate(t,n,void 0,e[n])})),r},e.prototype.createNewInstance=function(t){return i.observable.object(t,at,st)},e.prototype.finalizeNewInstance=function(t,e){vt(e,"toString",Ht),this.forAllProps((function(n){Object(i._interceptReads)(e,n,t.unbox)})),this.initializers.reduce((function(t,e){return e(t)}),e),Object(i.intercept)(e,this.willChange),Object(i.observe)(e,this.didChange)},e.prototype.willChange=function(t){var e=t,n=tt(e.object),r=e.name;n.assertWritable({subpath:r});var o=n.type.properties[r];return o&&(G(o,e.newValue),e.newValue=o.reconcile(n.getChildNode(r),e.newValue,n,r)),e},e.prototype.didChange=function(t){var e=t,n=tt(e.object);if(n.type.properties[e.name]){var r=e.oldValue?e.oldValue.snapshot:void 0;n.emitPatch({op:"replace",path:Tt(e.name),value:e.newValue.snapshot,oldValue:r},n)}},e.prototype.getChildren=function(t){var e=this,n=[];return this.forAllProps((function(r){n.push(e.getChildNode(t,r))})),n},e.prototype.getChildNode=function(t,e){if(!(e in this.properties))throw ut("Not a value property: "+e);var n=Object(i._getAdministration)(t.storedValue,e).value;if(!n)throw ut("Node not available for property "+e);return n},e.prototype.getSnapshot=function(t,e){var n=this;void 0===e&&(e=!0);var r={};return this.forAllProps((function(e,o){Object(i.getAtom)(t.storedValue,e).reportObserved(),r[e]=n.getChildNode(t,e).snapshot})),e?this.applySnapshotPostProcessor(r):r},e.prototype.processInitialSnapshot=function(t){var e={};return Object.keys(t).forEach((function(n){e[n]=t[n].getSnapshot()})),this.applySnapshotPostProcessor(e)},e.prototype.applyPatchLocally=function(t,e,n){if("replace"!==n.op&&"add"!==n.op)throw ut("object does not support operation "+n.op);t.storedValue[e]=n.value},e.prototype.applySnapshot=function(t,e){var n=this.applySnapshotPreProcessor(e);G(this,n),this.forAllProps((function(e){t.storedValue[e]=n[e]}))},e.prototype.applySnapshotPreProcessor=function(t){var e=this.preProcessor;return e?e.call(null,t):t},e.prototype.applySnapshotPostProcessor=function(t){var e=this.postProcessor;return e?e.call(null,t):t},e.prototype.getChildType=function(t){return xt(),this.properties[t]},e.prototype.isValidSnapshot=function(t,e){var n=this,r=this.applySnapshotPreProcessor(t);return ht(r)?Y(this.propertyNames.map((function(t){return n.properties[t].validate(r[t],M(e,t,n.properties[t]))}))):H(e,r,"Value is not a plain object")},e.prototype.forAllProps=function(t){var e=this;this.propertyNames.forEach((function(n){return t(n,e.properties[n])}))},e.prototype.describe=function(){var t=this;return"{ "+this.propertyNames.map((function(e){return e+": "+t.properties[e].describe()})).join("; ")+" }"},e.prototype.getDefaultSnapshot=function(){return at},e.prototype.removeChild=function(t,e){t.storedValue[e]=void 0},p([i.action],e.prototype,"applySnapshot",null),e}(P);function Jt(t){return T(t)&&(t.flags&_.Object)>0}var Kt=function(t){function e(e,n,r,o){void 0===o&&(o=ct);var i=t.call(this,e)||this;return i.flags=n,i.checker=r,i.initializer=o,i.flags=n,i}return c(e,t),e.prototype.describe=function(){return this.name},e.prototype.instantiate=function(t,e,n,r){return Z(this,t,e,n,r)},e.prototype.createNewInstance=function(t){return this.initializer(t)},e.prototype.isValidSnapshot=function(t,e){return yt(t)&&this.checker(t)?R():H(e,t,"Value is not a "+("Date"===this.name?"Date or a unix milliseconds timestamp":this.name))},e}(O),qt=new Kt("string",_.String,(function(t){return"string"==typeof t})),Zt=new Kt("number",_.Number,(function(t){return"number"==typeof t})),Xt=new Kt("integer",_.Integer,(function(t){return ft(t)})),Qt=new Kt("boolean",_.Boolean,(function(t){return"boolean"==typeof t})),te=new Kt("null",_.Null,(function(t){return null===t})),ee=new Kt("undefined",_.Undefined,(function(t){return void 0===t})),ne=new Kt("Date",_.Date,(function(t){return"number"==typeof t||t instanceof Date}),(function(t){return t instanceof Date?t:new Date(t)}));ne.getSnapshot=function(t){return t.storedValue.getTime()};var re=ne;var oe=function(t){function e(e){var n=t.call(this,JSON.stringify(e))||this;return n.flags=_.Literal,n.value=e,n}return c(e,t),e.prototype.instantiate=function(t,e,n,r){return Z(this,t,e,n,r)},e.prototype.describe=function(){return JSON.stringify(this.value)},e.prototype.isValidSnapshot=function(t,e){return yt(t)&&t===this.value?R():H(e,t,"Value is not a literal "+JSON.stringify(this.value))},e}(O);function ie(t){return It(),new oe(t)}var ae=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i._subtype=n,i._predicate=r,i._message=o,i}return c(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){return this._subtype.flags|_.Refinement},enumerable:!1,configurable:!0}),e.prototype.describe=function(){return this.name},e.prototype.instantiate=function(t,e,n,r){return this._subtype.instantiate(t,e,n,r)},e.prototype.isAssignableFrom=function(t){return this._subtype.isAssignableFrom(t)},e.prototype.isValidSnapshot=function(t,e){var n=this._subtype.validate(t,e);if(n.length>0)return n;var r=X(t)?tt(t).snapshot:t;return this._predicate(r)?R():H(e,t,this._message(t))},e.prototype.reconcile=function(t,e,n,r){return this._subtype.reconcile(t,e,n,r)},e.prototype.getSubTypes=function(){return this._subtype},e}(x);var se=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o._types=n,o._eager=!0,r=f({eager:!0,dispatcher:void 0},r),o._dispatcher=r.dispatcher,r.eager||(o._eager=!1),o}return c(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){var t=_.Union;return this._types.forEach((function(e){t|=e.flags})),t},enumerable:!1,configurable:!0}),e.prototype.isAssignableFrom=function(t){return this._types.some((function(e){return e.isAssignableFrom(t)}))},e.prototype.describe=function(){return"("+this._types.map((function(t){return t.describe()})).join(" | ")+")"},e.prototype.instantiate=function(t,e,n,r){var o=this.determineType(r,void 0);if(!o)throw ut("No matching type for union "+this.describe());return o.instantiate(t,e,n,r)},e.prototype.reconcile=function(t,e,n,r){var o=this.determineType(e,t.type);if(!o)throw ut("No matching type for union "+this.describe());return o.reconcile(t,e,n,r)},e.prototype.determineType=function(t,e){return this._dispatcher?this._dispatcher(t):e?e.is(t)?e:this._types.filter((function(t){return t!==e})).find((function(e){return e.is(t)})):this._types.find((function(e){return e.is(t)}))},e.prototype.isValidSnapshot=function(t,e){if(this._dispatcher)return this._dispatcher(t).validate(t,e);for(var n=[],r=0,o=0;o<this._types.length;o++){var i=this._types[o].validate(t,e);if(0===i.length){if(this._eager)return R();r++}else n.push(i)}return 1===r?R():H(e,t,"No type is applicable for the union").concat(Y(n))},e.prototype.getSubTypes=function(){return this._types},e}(x);function ue(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=T(t)?void 0:t,o=T(t)?d([t],e):e,i="("+o.map((function(t){return t.name})).join(" | ")+")";return new se(i,o,r)}var ce=function(t){function e(e,n,r){var o=t.call(this,e.name)||this;return o._subtype=e,o._defaultValue=n,o.optionalValues=r,o}return c(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){return this._subtype.flags|_.Optional},enumerable:!1,configurable:!0}),e.prototype.describe=function(){return this._subtype.describe()+"?"},e.prototype.instantiate=function(t,e,n,r){if(this.optionalValues.indexOf(r)>=0){var o=this.getDefaultInstanceOrSnapshot();return this._subtype.instantiate(t,e,n,o)}return this._subtype.instantiate(t,e,n,r)},e.prototype.reconcile=function(t,e,n,r){return this._subtype.reconcile(t,this.optionalValues.indexOf(e)<0&&this._subtype.is(e)?e:this.getDefaultInstanceOrSnapshot(),n,r)},e.prototype.getDefaultInstanceOrSnapshot=function(){var t="function"==typeof this._defaultValue?this._defaultValue():this._defaultValue;return"function"==typeof this._defaultValue&&G(this,t),t},e.prototype.isValidSnapshot=function(t,e){return this.optionalValues.indexOf(t)>=0?R():this._subtype.validate(t,e)},e.prototype.isAssignableFrom=function(t){return this._subtype.isAssignableFrom(t)},e.prototype.getSubTypes=function(){return this._subtype},e}(x);function fe(t,e,n){return function(t,e){if("function"!=typeof e&&X(e))throw ut("default value cannot be an instance, pass a snapshot or a function that creates an instance/snapshot instead");N(t,1)}(t,e),new ce(t,e,n||pe)}var pe=[void 0];var le=fe(ee,void 0),he=fe(te,null);function de(t){return N(t,1),ue(t,le)}var ye=function(t){function e(e,n){var r=t.call(this,e)||this;return r._definition=n,r}return c(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){return(this._subType?this._subType.flags:0)|_.Late},enumerable:!1,configurable:!0}),e.prototype.getSubType=function(t){if(!this._subType){var e=void 0;try{e=this._definition()}catch(t){if(!(t instanceof ReferenceError))throw t;e=void 0}if(t&&void 0===e)throw ut("Late type seems to be used too early, the definition (still) returns undefined");e&&(this._subType=e)}return this._subType},e.prototype.instantiate=function(t,e,n,r){return this.getSubType(!0).instantiate(t,e,n,r)},e.prototype.reconcile=function(t,e,n,r){return this.getSubType(!0).reconcile(t,e,n,r)},e.prototype.describe=function(){var t=this.getSubType(!1);return t?t.name:"<uknown late type>"},e.prototype.isValidSnapshot=function(t,e){var n=this.getSubType(!1);return n?n.validate(t,e):R()},e.prototype.isAssignableFrom=function(t){var e=this.getSubType(!1);return!!e&&e.isAssignableFrom(t)},e.prototype.getSubTypes=function(){var t=this.getSubType(!1);return t||"cannotDetermine"},e}(x);var be=function(t){function e(e){var n=t.call(this,e?"frozen("+e.name+")":"frozen")||this;return n.subType=e,n.flags=_.Frozen,n}return c(e,t),e.prototype.describe=function(){return"<any immutable value>"},e.prototype.instantiate=function(t,e,n,r){return Z(this,t,e,n,r)},e.prototype.isValidSnapshot=function(t,e){return function(t){return"function"!=typeof t}(t)?this.subType?this.subType.validate(t,e):R():H(e,t,"Value is not serializable and cannot be frozen")},e}(O),ve=new be;var ge=function(){function t(t,e){if(this.targetType=e,Te(t))this.identifier=t;else{if(!X(t))throw ut("Can only store references to tree nodes or identifiers, got: '"+t+"'");var n=tt(t);if(!n.identifierAttribute)throw ut("Can only store references with a defined identifier attribute.");var r=n.unnormalizedIdentifier;if(null==r)throw ut("Can only store references to tree nodes with a defined identifier.");this.identifier=r}}return t.prototype.updateResolvedReference=function(t){var e=Oe(this.identifier),n=t.root,r=n.identifierCache.getLastCacheModificationPerId(e);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==r){var o=this.targetType,i=n.identifierCache.resolve(o,e);if(!i)throw new me("[mobx-state-tree] Failed to resolve reference '"+this.identifier+"' to type '"+this.targetType.name+"' (from node: "+t.path+")");this.resolvedReference={node:i,lastCacheModification:r}}},Object.defineProperty(t.prototype,"resolvedValue",{get:function(){return this.updateResolvedReference(this.node),this.resolvedReference.node.value},enumerable:!1,configurable:!0}),t}(),me=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return c(e,t),e}(Error),we=function(t){function e(e,n){var r=t.call(this,"reference("+e.name+")")||this;return r.targetType=e,r.onInvalidated=n,r.flags=_.Reference,r}return c(e,t),e.prototype.describe=function(){return this.name},e.prototype.isAssignableFrom=function(t){return this.targetType.isAssignableFrom(t)},e.prototype.isValidSnapshot=function(t,e){return Te(t)?R():H(e,t,"Value is not a valid identifier, which is a string or a number")},e.prototype.fireInvalidated=function(t,e,n,r){var o=e.parent;if(o&&o.isAlive){var i=o.storedValue;i&&this.onInvalidated({cause:t,parent:i,invalidTarget:r?r.storedValue:void 0,invalidId:n,replaceRef:function(t){b(e.root.storedValue,{op:"replace",value:t,path:e.path})},removeRef:function(){Jt(o.type)?this.replaceRef(void 0):b(e.root.storedValue,{op:"remove",path:e.path})}})}},e.prototype.addTargetNodeWatcher=function(t,e){var n=this,r=this.getValue(t);if(r){var i=tt(r),a=function(r,a){var s=function(t){switch(t){case o.beforeDestroy:return"destroy";case o.beforeDetach:return"detach";default:return}}(a);s&&n.fireInvalidated(s,t,e,i)},s=i.registerHook(o.beforeDetach,a),u=i.registerHook(o.beforeDestroy,a);return function(){s(),u()}}},e.prototype.watchTargetNodeForInvalidations=function(t,e,n){var r=this;if(this.onInvalidated){var i;t.registerHook(o.beforeDestroy,(function(){i&&i()}));var a=function(o){i&&i();var a=t.parent,s=a&&a.storedValue;if(a&&a.isAlive&&s){(n?!!n.get(e,s):t.root.identifierCache.has(r.targetType,Oe(e)))?i=r.addTargetNodeWatcher(t,e):o||r.fireInvalidated("invalidSnapshotReference",t,e,null)}};t.state===W.FINALIZED?a(!0):(t.isRoot||t.root.registerHook(o.afterCreationFinalization,(function(){t.parent&&t.parent.createObservableInstanceIfNeeded()})),t.registerHook(o.afterAttach,(function(){a(!1)})))}},e}(O),_e=function(t){function e(e,n){return t.call(this,e,n)||this}return c(e,t),e.prototype.getValue=function(t){if(t.isAlive)return t.storedValue.resolvedValue},e.prototype.getSnapshot=function(t){return t.storedValue.identifier},e.prototype.instantiate=function(t,e,n,r){var o,i=X(r)?(Q(o=r,1),tt(o).identifier):r,a=new ge(r,this.targetType),s=Z(this,t,e,n,a);return a.node=s,this.watchTargetNodeForInvalidations(s,i,void 0),s},e.prototype.reconcile=function(t,e,n,r){if(!t.isDetaching&&t.type===this){var o=X(e),i=t.storedValue;if(!o&&i.identifier===e||o&&i.resolvedValue===e)return t.setParent(n,r),t}var a=this.instantiate(n,r,void 0,e);return t.die(),a},e}(we),Ae=function(t){function e(e,n,r){var o=t.call(this,e,r)||this;return o.options=n,o}return c(e,t),e.prototype.getValue=function(t){if(t.isAlive)return this.options.get(t.storedValue,t.parent?t.parent.storedValue:null)},e.prototype.getSnapshot=function(t){return t.storedValue},e.prototype.instantiate=function(t,e,n,r){var o=X(r)?this.options.set(r,t?t.storedValue:null):r,i=Z(this,t,e,n,o);return this.watchTargetNodeForInvalidations(i,o,this.options),i},e.prototype.reconcile=function(t,e,n,r){var o=X(e)?this.options.set(e,t?t.storedValue:null):e;if(!t.isDetaching&&t.type===this&&t.storedValue===o)return t.setParent(n,r),t;var i=this.instantiate(n,r,void 0,o);return t.die(),i},e}(we);function je(t,e){N(t,1);var n=e||void 0,r=e?e.onInvalidated:void 0;return n&&(n.get||n.set)?new Ae(t,{get:n.get,set:n.set},r):new _e(t,r)}var Ie=function(t){function e(e,n){var r=t.call(this,e)||this;return r.validType=n,r.flags=_.Identifier,r}return c(e,t),e.prototype.instantiate=function(t,e,n,r){if(!(t&&t.type instanceof Wt))throw ut("Identifier types can only be instantiated as direct child of a model type");return Z(this,t,e,n,r)},e.prototype.reconcile=function(t,e,n,r){if(t.storedValue!==e)throw ut("Tried to change identifier from '"+t.storedValue+"' to '"+e+"'. Changing identifiers is not allowed.");return t.setParent(n,r),t},e.prototype.isValidSnapshot=function(t,e){return typeof t!==this.validType?H(e,t,"Value is not a valid "+this.describe()+", expected a "+this.validType):R()},e}(O),Ee=function(t){function e(){var e=t.call(this,"identifier","string")||this;return e.flags=_.Identifier,e}return c(e,t),e.prototype.describe=function(){return"identifier"},e}(Ie),Se=function(t){function e(){return t.call(this,"identifierNumber","number")||this}return c(e,t),e.prototype.getSnapshot=function(t){return t.storedValue},e.prototype.describe=function(){return"identifierNumber"},e}(Ie),xe=new Ee,Pe=new Se;function Oe(t){return""+t}function Te(t){return"string"==typeof t||"number"==typeof t}var Ne=function(t){function e(e){var n=t.call(this,e.name)||this;return n.options=e,n.flags=_.Custom,n}return c(e,t),e.prototype.describe=function(){return this.name},e.prototype.isValidSnapshot=function(t,e){if(this.options.isTargetType(t))return R();var n=this.options.getValidationMessage(t);return n?H(e,t,"Invalid value for type '"+this.name+"': "+n):R()},e.prototype.getSnapshot=function(t){return this.options.toSnapshot(t.storedValue)},e.prototype.instantiate=function(t,e,n,r){return Z(this,t,e,n,this.options.isTargetType(r)?r:this.options.fromSnapshot(r,t&&t.root.environment))},e.prototype.reconcile=function(t,e,n,r){var o=!this.options.isTargetType(e);if(!t.isDetaching&&(t.type===this&&(o?e===t.snapshot:e===t.storedValue)))return t.setParent(n,r),t;var i=o?this.options.fromSnapshot(e,n.root.environment):e,a=this.instantiate(n,r,void 0,i);return t.die(),a},e}(O),Ce={enumeration:function(t,e){var n="string"==typeof t?e:t,r=ue.apply(void 0,d(n.map((function(t){return ie(""+t)}))));return"string"==typeof t&&(r.name=t),r},model:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="string"==typeof t[0]?t.shift():"AnonymousModel",r=t.shift()||{};return new Wt({name:n,properties:r})},compose:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="string"==typeof t[0],r=n?t[0]:"AnonymousModel";return n&&t.shift(),t.reduce((function(t,e){return t.cloneAndEnhance({name:t.name+"_"+e.name,properties:e.properties,initializers:e.initializers,preProcessor:function(n){return e.applySnapshotPreProcessor(t.applySnapshotPreProcessor(n))},postProcessor:function(n){return e.applySnapshotPostProcessor(t.applySnapshotPostProcessor(n))}})})).named(r)},custom:function(t){return new Ne(t)},reference:je,safeReference:function(t,e){var n=je(t,f(f({},e),{onInvalidated:function(t){t.removeRef()}}));return e&&!1===e.acceptsUndefined?n:de(n)},union:ue,optional:fe,literal:ie,maybe:de,maybeNull:function(t){return N(t,1),ue(t,he)},refinement:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="string"==typeof t[0]?t.shift():T(t[0])?t[0].name:null,r=t[0],o=t[1],i=t[2]?t[2]:function(t){return"Value does not respect the refinement predicate"};return N(r,[1,2]),xt(),Et(),Et(),new ae(n,r,o,i)},string:qt,boolean:Qt,number:Zt,integer:Xt,Date:re,map:function(t){return new Ft("map<string, "+t.name+">",t)},array:function(t){return N(t,1),new Bt(t.name+"[]",t)},frozen:function(t){return 0===arguments.length?ve:T(t)?new be(t):fe(ve,t)},identifier:xe,identifierNumber:Pe,late:function(t,e){var n="string"==typeof t?t:"late("+t.toString()+")",r="string"==typeof t?e:t;return new ye(n,r)},undefined:ee,null:te,snapshotProcessor:function(t,e,n){return N(t,1),new Dt(t,e,n)}}}).call(this,n(36),n(82).setImmediate)},function(e,n){e.exports=t},function(t,e,n){var r=n(30),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e,n){var r=n(51);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},function(t,e,n){var r=n(61),o=n(64);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(9),o=n(53),i=n(54),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},function(t,e,n){var r=n(2).Symbol;t.exports=r},function(t,e,n){var r=n(4)(Object,"create");t.exports=r},function(t,e,n){var r=n(69),o=n(70),i=n(71),a=n(72),s=n(73);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(34);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(75);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(19),o=n(37);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var c=e[s],f=i?i(n[c],t[c],c,n,t):void 0;void 0===f&&(f=t[c]),a?o(n,c,f):r(n,c,f)}return n}},function(t,e,n){var r=n(129);t.exports=function(t,e,n){return null==t?t:r(t,e,n)}},function(t,e,n){var r=n(8),o=n(6);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==r(t)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(4)(n(2),"Map");t.exports=r},function(t,e,n){var r=n(37),o=n(34),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(38),o=n(100),i=n(43);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(30),o=e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o&&r.process,s=function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,n(21)(t))},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(38),o=n(103),i=n(43);t.exports=function(t){return i(t)?r(t,!0):o(t)}},function(t,e,n){var r=n(108),o=n(44),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return i.call(t,e)})))}:o;t.exports=s},function(t,e,n){var r=n(112),o=n(18),i=n(113),a=n(114),s=n(115),u=n(8),c=n(33),f=c(r),p=c(o),l=c(i),h=c(a),d=c(s),y=u;(r&&"[object DataView]"!=y(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=y(new o)||i&&"[object Promise]"!=y(i.resolve())||a&&"[object Set]"!=y(new a)||s&&"[object WeakMap]"!=y(new s))&&(y=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case f:return"[object DataView]";case p:return"[object Map]";case l:return"[object Promise]";case h:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=y},function(t,e,n){var r=n(118);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){var r=n(5),o=n(52),i=n(55),a=n(79);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(a(t))}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(17))},function(t,e,n){var r=n(58),o=n(74),i=n(76),a=n(77),s=n(78);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(8),o=n(7);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(16);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],f=!1,p=-1;function l(){f&&u&&(f=!1,u.length?c=u.concat(c):p=-1,c.length&&h())}function h(){if(!f){var t=s(l);f=!0;for(var e=c.length;e;){for(u=c,c=[];++p<e;)u&&u[p].run();p=-1,e=c.length}u=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||f||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){var r=n(92);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(94),o=n(95),i=n(5),a=n(39),s=n(40),u=n(98),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),f=!n&&o(t),p=!n&&!f&&a(t),l=!n&&!f&&!p&&u(t),h=n||f||p||l,d=h?r(t.length,String):[],y=d.length;for(var b in t)!e&&!c.call(t,b)||h&&("length"==b||p&&("offset"==b||"parent"==b)||l&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||s(b,y))||d.push(b);return d}},function(t,e,n){(function(t){var r=n(2),o=n(97),i=e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===i?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||o;t.exports=u}).call(this,n(21)(t))},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(32),o=n(41);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(46),o=n(47),i=n(26),a=n(44),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:a;t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(42)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(46),o=n(5);t.exports=function(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}},function(t,e,n){t.exports=function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){return o(e[a][1][t]||t)}),u,u.exports,t,e,n,r)}return n[a].exports}for(var i=!1,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){(function(r,o,i,a,s,u,c,f,p){"use strict";var l=t("crypto");function h(t,e){return function(t,e){var n;if(void 0===(n="passthrough"!==e.algorithm?l.createHash(e.algorithm):new m).write&&(n.write=n.update,n.end=n.update),g(e,n).dispatch(t),n.update||n.end(""),n.digest)return n.digest("buffer"===e.encoding?void 0:e.encoding);var r=n.read();return"buffer"!==e.encoding?r.toString(e.encoding):r}(t,e=b(t,e))}(n=e.exports=h).sha1=function(t){return h(t)},n.keys=function(t){return h(t,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},n.MD5=function(t){return h(t,{algorithm:"md5",encoding:"hex"})},n.keysMD5=function(t){return h(t,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var d=l.getHashes?l.getHashes().slice():["sha1","md5"];d.push("passthrough");var y=["buffer","hex","binary","base64"];function b(t,e){e=e||{};var n={};if(n.algorithm=e.algorithm||"sha1",n.encoding=e.encoding||"hex",n.excludeValues=!!e.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===e.ignoreUnknown,n.respectType=!1!==e.respectType,n.respectFunctionNames=!1!==e.respectFunctionNames,n.respectFunctionProperties=!1!==e.respectFunctionProperties,n.unorderedArrays=!0===e.unorderedArrays,n.unorderedSets=!1!==e.unorderedSets,n.unorderedObjects=!1!==e.unorderedObjects,n.replacer=e.replacer||void 0,n.excludeKeys=e.excludeKeys||void 0,void 0===t)throw new Error("Object argument required.");for(var r=0;r<d.length;++r)d[r].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=d[r]);if(-1===d.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+d.join(", "));if(-1===y.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+y.join(", "));return n}function v(t){if("function"==typeof t)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))}function g(t,e,n){function r(t){return e.update?e.update(t,"utf8"):e.write(t,"utf8")}return n=n||[],{dispatch:function(e){t.replacer&&(e=t.replacer(e));var n=typeof e;return null===e&&(n="null"),this["_"+n](e)},_object:function(e){var o,a=Object.prototype.toString.call(e),s=/\[object (.*)\]/i.exec(a);if(s=(s=s?s[1]:"unknown:["+a+"]").toLowerCase(),0<=(o=n.indexOf(e)))return this.dispatch("[CIRCULAR:"+o+"]");if(n.push(e),void 0!==i&&i.isBuffer&&i.isBuffer(e))return r("buffer:"),r(e);if("object"===s||"function"===s||"asyncfunction"===s){var u=Object.keys(e);t.unorderedObjects&&(u=u.sort()),!1===t.respectType||v(e)||u.splice(0,0,"prototype","__proto__","constructor"),t.excludeKeys&&(u=u.filter((function(e){return!t.excludeKeys(e)}))),r("object:"+u.length+":");var c=this;return u.forEach((function(n){c.dispatch(n),r(":"),t.excludeValues||c.dispatch(e[n]),r(",")}))}if(!this["_"+s]){if(t.ignoreUnknown)return r("["+s+"]");throw new Error('Unknown object type "'+s+'"')}this["_"+s](e)},_array:function(e,o){o=void 0!==o?o:!1!==t.unorderedArrays;var i=this;if(r("array:"+e.length+":"),!o||e.length<=1)return e.forEach((function(t){return i.dispatch(t)}));var a=[],s=e.map((function(e){var r=new m,o=n.slice();return g(t,r,o).dispatch(e),a=a.concat(o.slice(n.length)),r.read().toString()}));return n=n.concat(a),s.sort(),this._array(s,!1)},_date:function(t){return r("date:"+t.toJSON())},_symbol:function(t){return r("symbol:"+t.toString())},_error:function(t){return r("error:"+t.toString())},_boolean:function(t){return r("bool:"+t.toString())},_string:function(t){r("string:"+t.length+":"),r(t.toString())},_function:function(e){r("fn:"),v(e)?this.dispatch("[native]"):this.dispatch(e.toString()),!1!==t.respectFunctionNames&&this.dispatch("function-name:"+String(e.name)),t.respectFunctionProperties&&this._object(e)},_number:function(t){return r("number:"+t.toString())},_xml:function(t){return r("xml:"+t.toString())},_null:function(){return r("Null")},_undefined:function(){return r("Undefined")},_regexp:function(t){return r("regex:"+t.toString())},_uint8array:function(t){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){return r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){return r("float32array:"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){return r("float64array:"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){return r("arraybuffer:"),this.dispatch(new Uint8Array(t))},_url:function(t){return r("url:"+t.toString())},_map:function(e){r("map:");var n=Array.from(e);return this._array(n,!1!==t.unorderedSets)},_set:function(e){r("set:");var n=Array.from(e);return this._array(n,!1!==t.unorderedSets)},_blob:function(){if(t.ignoreUnknown)return r("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return r("domwindow")},_process:function(){return r("process")},_timer:function(){return r("timer")},_pipe:function(){return r("pipe")},_tcp:function(){return r("tcp")},_udp:function(){return r("udp")},_tty:function(){return r("tty")},_statwatcher:function(){return r("statwatcher")},_securecontext:function(){return r("securecontext")},_connection:function(){return r("connection")},_zlib:function(){return r("zlib")},_context:function(){return r("context")},_nodescript:function(){return r("nodescript")},_httpparser:function(){return r("httpparser")},_dataview:function(){return r("dataview")},_signal:function(){return r("signal")},_fsevent:function(){return r("fsevent")},_tlswrap:function(){return r("tlswrap")}}}function m(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}n.writeToStream=function(t,e,n){return void 0===n&&(n=e,e={}),g(e=b(t,e),n).dispatch(t)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_794fcf4d.js","/")},{buffer:3,crypto:5,lYpoI2:10}],2:[function(t,e,n){(function(t,e,r,o,i,a,s,u,c){!function(t){"use strict";var e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),r="/".charCodeAt(0),o="0".charCodeAt(0),i="a".charCodeAt(0),a="A".charCodeAt(0),s="-".charCodeAt(0),u="_".charCodeAt(0);function c(t){var e=t.charCodeAt(0);return e===n||e===s?62:e===r||e===u?63:e<o?-1:e<o+10?e-o+26+26:e<a+26?e-a:e<i+26?e-i+26:void 0}t.toByteArray=function(t){var n,r,o,i,a;if(0<t.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var s=t.length;i="="===t.charAt(s-2)?2:"="===t.charAt(s-1)?1:0,a=new e(3*t.length/4-i),r=0<i?t.length-4:t.length;var u=0;function f(t){a[u++]=t}for(n=0;n<r;n+=4,0)f((16711680&(o=c(t.charAt(n))<<18|c(t.charAt(n+1))<<12|c(t.charAt(n+2))<<6|c(t.charAt(n+3))))>>16),f((65280&o)>>8),f(255&o);return 2==i?f(255&(o=c(t.charAt(n))<<2|c(t.charAt(n+1))>>4)):1==i&&(f((o=c(t.charAt(n))<<10|c(t.charAt(n+1))<<4|c(t.charAt(n+2))>>2)>>8&255),f(255&o)),a},t.fromByteArray=function(t){var e,n,r,o,i=t.length%3,a="";function s(t){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)}for(e=0,r=t.length-i;e<r;e+=3)a+=s((o=n=(t[e]<<16)+(t[e+1]<<8)+t[e+2])>>18&63)+s(o>>12&63)+s(o>>6&63)+s(63&o);switch(i){case 1:a+=s((n=t[t.length-1])>>2),a+=s(n<<4&63),a+="==";break;case 2:a+=s((n=(t[t.length-2]<<8)+t[t.length-1])>>10),a+=s(n>>4&63),a+=s(n<<2&63),a+="="}return a}}(void 0===n?this.base64js={}:n)}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:10}],3:[function(t,e,n){(function(e,r,o,i,a,s,u,c,f){var p=t("base64-js"),l=t("ieee754");function o(t,e,n){if(!(this instanceof o))return new o(t,e,n);var r,i,a,s,u,c=typeof t;if("base64"===e&&"string"==c)for(t=(r=t).trim?r.trim():r.replace(/^\s+|\s+$/g,"");t.length%4!=0;)t+="=";if("number"==c)i=O(t);else if("string"==c)i=o.byteLength(t,e);else{if("object"!=c)throw new Error("First argument needs to be a number, array or string.");i=O(t.length)}if(o._useTypedArrays?a=o._augment(new Uint8Array(i)):((a=this).length=i,a._isBuffer=!0),o._useTypedArrays&&"number"==typeof t.byteLength)a._set(t);else if(T(u=t)||o.isBuffer(u)||u&&"object"==typeof u&&"number"==typeof u.length)for(s=0;s<i;s++)o.isBuffer(t)?a[s]=t.readUInt8(s):a[s]=t[s];else if("string"==c)a.write(t,0,e);else if("number"==c&&!o._useTypedArrays&&!n)for(s=0;s<i;s++)a[s]=0;return a}function h(t,e,n,r){return o._charsWritten=D(function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function d(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;o++)r+=String.fromCharCode(t[o]);return r}function y(t,e,n,r){r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=e,"missing offset"),B(e+1<t.length,"Trying to read beyond buffer length"));var o,i=t.length;if(!(i<=e))return n?(o=t[e],e+1<i&&(o|=t[e+1]<<8)):(o=t[e]<<8,e+1<i&&(o|=t[e+1])),o}function b(t,e,n,r){r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=e,"missing offset"),B(e+3<t.length,"Trying to read beyond buffer length"));var o,i=t.length;if(!(i<=e))return n?(e+2<i&&(o=t[e+2]<<16),e+1<i&&(o|=t[e+1]<<8),o|=t[e],e+3<i&&(o+=t[e+3]<<24>>>0)):(e+1<i&&(o=t[e+1]<<16),e+2<i&&(o|=t[e+2]<<8),e+3<i&&(o|=t[e+3]),o+=t[e]<<24>>>0),o}function v(t,e,n,r){if(r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=e,"missing offset"),B(e+1<t.length,"Trying to read beyond buffer length")),!(t.length<=e)){var o=y(t,e,n,!0);return 32768&o?-1*(65535-o+1):o}}function g(t,e,n,r){if(r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=e,"missing offset"),B(e+3<t.length,"Trying to read beyond buffer length")),!(t.length<=e)){var o=b(t,e,n,!0);return 2147483648&o?-1*(4294967295-o+1):o}}function m(t,e,n,r){return r||(B("boolean"==typeof n,"missing or invalid endian"),B(e+3<t.length,"Trying to read beyond buffer length")),l.read(t,e,n,23,4)}function w(t,e,n,r){return r||(B("boolean"==typeof n,"missing or invalid endian"),B(e+7<t.length,"Trying to read beyond buffer length")),l.read(t,e,n,52,8)}function _(t,e,n,r,o){o||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+1<t.length,"trying to write beyond buffer length"),z(e,65535));var i=t.length;if(!(i<=n))for(var a=0,s=Math.min(i-n,2);a<s;a++)t[n+a]=(e&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function A(t,e,n,r,o){o||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<t.length,"trying to write beyond buffer length"),z(e,4294967295));var i=t.length;if(!(i<=n))for(var a=0,s=Math.min(i-n,4);a<s;a++)t[n+a]=e>>>8*(r?a:3-a)&255}function j(t,e,n,r,o){o||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+1<t.length,"Trying to write beyond buffer length"),U(e,32767,-32768)),t.length<=n||_(t,0<=e?e:65535+e+1,n,r,o)}function I(t,e,n,r,o){o||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<t.length,"Trying to write beyond buffer length"),U(e,2147483647,-2147483648)),t.length<=n||A(t,0<=e?e:4294967295+e+1,n,r,o)}function E(t,e,n,r,o){o||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<t.length,"Trying to write beyond buffer length"),F(e,34028234663852886e22,-34028234663852886e22)),t.length<=n||l.write(t,e,n,r,23,4)}function S(t,e,n,r,o){o||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+7<t.length,"Trying to write beyond buffer length"),F(e,17976931348623157e292,-17976931348623157e292)),t.length<=n||l.write(t,e,n,r,52,8)}n.Buffer=o,n.SlowBuffer=o,n.INSPECT_MAX_BYTES=50,o.poolSize=8192,o._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(t){return!1}}(),o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"hex":n=t.length/2;break;case"utf8":case"utf-8":n=C(t).length;break;case"ascii":case"binary":case"raw":n=t.length;break;case"base64":n=k(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;default:throw new Error("Unknown encoding")}return n},o.concat=function(t,e){if(B(T(t),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===t.length)return new o(0);if(1===t.length)return t[0];var n;if("number"!=typeof e)for(n=e=0;n<t.length;n++)e+=t[n].length;var r=new o(e),i=0;for(n=0;n<t.length;n++){var a=t[n];a.copy(r,i),i+=a.length}return r},o.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var i=r;r=e,e=n,n=i}e=Number(e)||0;var a,s,u,c,f,p=this.length-e;switch((!n||p<(n=Number(n)))&&(n=p),r=String(r||"utf8").toLowerCase()){case"hex":a=function(t,e,n,r){n=Number(n)||0;var i=t.length-n;(!r||i<(r=Number(r)))&&(r=i);var a=e.length;B(a%2==0,"Invalid hex string"),a/2<r&&(r=a/2);for(var s=0;s<r;s++){var u=parseInt(e.substr(2*s,2),16);B(!isNaN(u),"Invalid hex string"),t[n+s]=u}return o._charsWritten=2*s,s}(this,t,e,n);break;case"utf8":case"utf-8":c=e,f=n,a=o._charsWritten=D(C(t),this,c,f);break;case"ascii":case"binary":a=h(this,t,e,n);break;case"base64":s=e,u=n,a=o._charsWritten=D(k(t),this,s,u);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=function(t,e,n,r){return o._charsWritten=D(function(t){for(var e,n,r,o=[],i=0;i<t.length;i++)n=(e=t.charCodeAt(i))>>8,r=e%256,o.push(r),o.push(n);return o}(e),t,n,r)}(this,t,e,n);break;default:throw new Error("Unknown encoding")}return a},o.prototype.toString=function(t,e,n){var r,o,i,a,s=this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,(n=void 0!==n?Number(n):n=s.length)===e)return"";switch(t){case"hex":r=function(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var o="",i=e;i<n;i++)o+=N(t[i]);return o}(s,e,n);break;case"utf8":case"utf-8":r=function(t,e,n){var r="",o="";n=Math.min(t.length,n);for(var i=e;i<n;i++)t[i]<=127?(r+=V(o)+String.fromCharCode(t[i]),o=""):o+="%"+t[i].toString(16);return r+V(o)}(s,e,n);break;case"ascii":case"binary":r=d(s,e,n);break;case"base64":o=s,a=n,r=0===(i=e)&&a===o.length?p.fromByteArray(o):p.fromByteArray(o.slice(i,a));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=function(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}(s,e,n);break;default:throw new Error("Unknown encoding")}return r},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.copy=function(t,e,n,r){if(n=n||0,r||0===r||(r=this.length),e=e||0,r!==n&&0!==t.length&&0!==this.length){B(n<=r,"sourceEnd < sourceStart"),B(0<=e&&e<t.length,"targetStart out of bounds"),B(0<=n&&n<this.length,"sourceStart out of bounds"),B(0<=r&&r<=this.length,"sourceEnd out of bounds"),r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;if(i<100||!o._useTypedArrays)for(var a=0;a<i;a++)t[a+e]=this[a+n];else t._set(this.subarray(n,n+i),e)}},o.prototype.slice=function(t,e){var n=this.length;if(t=P(t,n,0),e=P(e,n,n),o._useTypedArrays)return o._augment(this.subarray(t,e));for(var r=e-t,i=new o(r,void 0,!0),a=0;a<r;a++)i[a]=this[a+t];return i},o.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},o.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},o.prototype.readUInt8=function(t,e){if(e||(B(null!=t,"missing offset"),B(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return this[t]},o.prototype.readUInt16LE=function(t,e){return y(this,t,!0,e)},o.prototype.readUInt16BE=function(t,e){return y(this,t,!1,e)},o.prototype.readUInt32LE=function(t,e){return b(this,t,!0,e)},o.prototype.readUInt32BE=function(t,e){return b(this,t,!1,e)},o.prototype.readInt8=function(t,e){if(e||(B(null!=t,"missing offset"),B(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return 128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){return v(this,t,!0,e)},o.prototype.readInt16BE=function(t,e){return v(this,t,!1,e)},o.prototype.readInt32LE=function(t,e){return g(this,t,!0,e)},o.prototype.readInt32BE=function(t,e){return g(this,t,!1,e)},o.prototype.readFloatLE=function(t,e){return m(this,t,!0,e)},o.prototype.readFloatBE=function(t,e){return m(this,t,!1,e)},o.prototype.readDoubleLE=function(t,e){return w(this,t,!0,e)},o.prototype.readDoubleBE=function(t,e){return w(this,t,!1,e)},o.prototype.writeUInt8=function(t,e,n){n||(B(null!=t,"missing value"),B(null!=e,"missing offset"),B(e<this.length,"trying to write beyond buffer length"),z(t,255)),e>=this.length||(this[e]=t)},o.prototype.writeUInt16LE=function(t,e,n){_(this,t,e,!0,n)},o.prototype.writeUInt16BE=function(t,e,n){_(this,t,e,!1,n)},o.prototype.writeUInt32LE=function(t,e,n){A(this,t,e,!0,n)},o.prototype.writeUInt32BE=function(t,e,n){A(this,t,e,!1,n)},o.prototype.writeInt8=function(t,e,n){n||(B(null!=t,"missing value"),B(null!=e,"missing offset"),B(e<this.length,"Trying to write beyond buffer length"),U(t,127,-128)),e>=this.length||(0<=t?this.writeUInt8(t,e,n):this.writeUInt8(255+t+1,e,n))},o.prototype.writeInt16LE=function(t,e,n){j(this,t,e,!0,n)},o.prototype.writeInt16BE=function(t,e,n){j(this,t,e,!1,n)},o.prototype.writeInt32LE=function(t,e,n){I(this,t,e,!0,n)},o.prototype.writeInt32BE=function(t,e,n){I(this,t,e,!1,n)},o.prototype.writeFloatLE=function(t,e,n){E(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){E(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){S(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){S(this,t,e,!1,n)},o.prototype.fill=function(t,e,n){if(t=t||0,e=e||0,n=n||this.length,"string"==typeof t&&(t=t.charCodeAt(0)),B("number"==typeof t&&!isNaN(t),"value is not a number"),B(e<=n,"end < start"),n!==e&&0!==this.length){B(0<=e&&e<this.length,"start out of bounds"),B(0<=n&&n<=this.length,"end out of bounds");for(var r=e;r<n;r++)this[r]=t}},o.prototype.inspect=function(){for(var t=[],e=this.length,r=0;r<e;r++)if(t[r]=N(this[r]),r===n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<Buffer "+t.join(" ")+">"},o.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(o._useTypedArrays)return new o(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;e<n;e+=1)t[e]=this[e];return t.buffer};var x=o.prototype;function P(t,e,n){return"number"!=typeof t?n:e<=(t=~~t)?e:0<=t||0<=(t+=e)?t:0}function O(t){return(t=~~Math.ceil(+t))<0?0:t}function T(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function N(t){return t<16?"0"+t.toString(16):t.toString(16)}function C(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(t.charCodeAt(n));else{var o=n;55296<=r&&r<=57343&&n++;for(var i=encodeURIComponent(t.slice(o,n+1)).substr(1).split("%"),a=0;a<i.length;a++)e.push(parseInt(i[a],16))}}return e}function k(t){return p.toByteArray(t)}function D(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);o++)e[o+n]=t[o];return o}function V(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}function z(t,e){B("number"==typeof t,"cannot write a non-number as a number"),B(0<=t,"specified a negative value for writing an unsigned value"),B(t<=e,"value is larger than maximum value for type"),B(Math.floor(t)===t,"value has a fractional component")}function U(t,e,n){B("number"==typeof t,"cannot write a non-number as a number"),B(t<=e,"value larger than maximum allowed value"),B(n<=t,"value smaller than minimum allowed value"),B(Math.floor(t)===t,"value has a fractional component")}function F(t,e,n){B("number"==typeof t,"cannot write a non-number as a number"),B(t<=e,"value larger than maximum allowed value"),B(n<=t,"value smaller than minimum allowed value")}function B(t,e){if(!t)throw new Error(e||"Failed assertion")}o._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=x.get,t.set=x.set,t.write=x.write,t.toString=x.toString,t.toLocaleString=x.toString,t.toJSON=x.toJSON,t.copy=x.copy,t.slice=x.slice,t.readUInt8=x.readUInt8,t.readUInt16LE=x.readUInt16LE,t.readUInt16BE=x.readUInt16BE,t.readUInt32LE=x.readUInt32LE,t.readUInt32BE=x.readUInt32BE,t.readInt8=x.readInt8,t.readInt16LE=x.readInt16LE,t.readInt16BE=x.readInt16BE,t.readInt32LE=x.readInt32LE,t.readInt32BE=x.readInt32BE,t.readFloatLE=x.readFloatLE,t.readFloatBE=x.readFloatBE,t.readDoubleLE=x.readDoubleLE,t.readDoubleBE=x.readDoubleBE,t.writeUInt8=x.writeUInt8,t.writeUInt16LE=x.writeUInt16LE,t.writeUInt16BE=x.writeUInt16BE,t.writeUInt32LE=x.writeUInt32LE,t.writeUInt32BE=x.writeUInt32BE,t.writeInt8=x.writeInt8,t.writeInt16LE=x.writeInt16LE,t.writeInt16BE=x.writeInt16BE,t.writeInt32LE=x.writeInt32LE,t.writeInt32BE=x.writeInt32BE,t.writeFloatLE=x.writeFloatLE,t.writeFloatBE=x.writeFloatBE,t.writeDoubleLE=x.writeDoubleLE,t.writeDoubleBE=x.writeDoubleBE,t.fill=x.fill,t.inspect=x.inspect,t.toArrayBuffer=x.toArrayBuffer,t}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:11,lYpoI2:10}],4:[function(t,e,n){(function(n,r,o,i,a,s,u,c,f){var p=new(o=t("buffer").Buffer)(4);p.fill(0),e.exports={hash:function(t,e,n,r){return o.isBuffer(t)||(t=new o(t)),function(t,e,n){for(var r=new o(e),i=n?r.writeInt32BE:r.writeInt32LE,a=0;a<t.length;a++)i.call(r,t[a],4*a,!0);return r}(e(function(t,e){if(t.length%4!=0){var n=t.length+(4-t.length%4);t=o.concat([t,p],n)}for(var r=[],i=e?t.readInt32BE:t.readInt32LE,a=0;a<t.length;a+=4)r.push(i.call(t,a));return r}(t,r),8*t.length),n,r)}}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],5:[function(t,e,n){(function(e,r,o,i,a,s,u,c,f){o=t("buffer").Buffer;var p=t("./sha"),l=t("./sha256"),h=t("./rng"),d={sha1:p,sha256:l,md5:t("./md5")},y=64,b=new o(y);function v(t,e){var n=d[t=t||"sha1"],r=[];return n||g("algorithm:",t,"is not yet supported"),{update:function(t){return o.isBuffer(t)||(t=new o(t)),r.push(t),t.length,this},digest:function(t){var i=o.concat(r),a=e?function(t,e,n){o.isBuffer(e)||(e=new o(e)),o.isBuffer(n)||(n=new o(n)),e.length>y?e=t(e):e.length<y&&(e=o.concat([e,b],y));for(var r=new o(y),i=new o(y),a=0;a<y;a++)r[a]=54^e[a],i[a]=92^e[a];var s=t(o.concat([r,n]));return t(o.concat([i,s]))}(n,e,i):n(i);return r=null,t?a.toString(t):a}}}function g(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}b.fill(0),n.createHash=function(t){return v(t)},n.createHmac=function(t,e){return v(t,e)},n.randomBytes=function(t,e){if(!e||!e.call)return new o(h(t));try{e.call(this,void 0,new o(h(t)))}catch(t){e(t)}},function(t,e){for(var n in t)e(t[n])}(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],(function(t){n[t]=function(){g("sorry,",t,"is not implemented yet")}}))}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:10}],6:[function(t,e,n){(function(n,r,o,i,a,s,u,c,f){var p=t("./helpers");function l(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,r=-271733879,o=-1732584194,i=271733878,a=0;a<t.length;a+=16){var s=n,u=r,c=o,f=i;n=d(n,r,o,i,t[a+0],7,-680876936),i=d(i,n,r,o,t[a+1],12,-389564586),o=d(o,i,n,r,t[a+2],17,606105819),r=d(r,o,i,n,t[a+3],22,-1044525330),n=d(n,r,o,i,t[a+4],7,-176418897),i=d(i,n,r,o,t[a+5],12,1200080426),o=d(o,i,n,r,t[a+6],17,-1473231341),r=d(r,o,i,n,t[a+7],22,-45705983),n=d(n,r,o,i,t[a+8],7,1770035416),i=d(i,n,r,o,t[a+9],12,-1958414417),o=d(o,i,n,r,t[a+10],17,-42063),r=d(r,o,i,n,t[a+11],22,-1990404162),n=d(n,r,o,i,t[a+12],7,1804603682),i=d(i,n,r,o,t[a+13],12,-40341101),o=d(o,i,n,r,t[a+14],17,-1502002290),n=y(n,r=d(r,o,i,n,t[a+15],22,1236535329),o,i,t[a+1],5,-165796510),i=y(i,n,r,o,t[a+6],9,-1069501632),o=y(o,i,n,r,t[a+11],14,643717713),r=y(r,o,i,n,t[a+0],20,-373897302),n=y(n,r,o,i,t[a+5],5,-701558691),i=y(i,n,r,o,t[a+10],9,38016083),o=y(o,i,n,r,t[a+15],14,-660478335),r=y(r,o,i,n,t[a+4],20,-405537848),n=y(n,r,o,i,t[a+9],5,568446438),i=y(i,n,r,o,t[a+14],9,-1019803690),o=y(o,i,n,r,t[a+3],14,-187363961),r=y(r,o,i,n,t[a+8],20,1163531501),n=y(n,r,o,i,t[a+13],5,-1444681467),i=y(i,n,r,o,t[a+2],9,-51403784),o=y(o,i,n,r,t[a+7],14,1735328473),n=b(n,r=y(r,o,i,n,t[a+12],20,-1926607734),o,i,t[a+5],4,-378558),i=b(i,n,r,o,t[a+8],11,-2022574463),o=b(o,i,n,r,t[a+11],16,1839030562),r=b(r,o,i,n,t[a+14],23,-35309556),n=b(n,r,o,i,t[a+1],4,-1530992060),i=b(i,n,r,o,t[a+4],11,1272893353),o=b(o,i,n,r,t[a+7],16,-155497632),r=b(r,o,i,n,t[a+10],23,-1094730640),n=b(n,r,o,i,t[a+13],4,681279174),i=b(i,n,r,o,t[a+0],11,-358537222),o=b(o,i,n,r,t[a+3],16,-722521979),r=b(r,o,i,n,t[a+6],23,76029189),n=b(n,r,o,i,t[a+9],4,-640364487),i=b(i,n,r,o,t[a+12],11,-421815835),o=b(o,i,n,r,t[a+15],16,530742520),n=v(n,r=b(r,o,i,n,t[a+2],23,-995338651),o,i,t[a+0],6,-198630844),i=v(i,n,r,o,t[a+7],10,1126891415),o=v(o,i,n,r,t[a+14],15,-1416354905),r=v(r,o,i,n,t[a+5],21,-57434055),n=v(n,r,o,i,t[a+12],6,1700485571),i=v(i,n,r,o,t[a+3],10,-1894986606),o=v(o,i,n,r,t[a+10],15,-1051523),r=v(r,o,i,n,t[a+1],21,-2054922799),n=v(n,r,o,i,t[a+8],6,1873313359),i=v(i,n,r,o,t[a+15],10,-30611744),o=v(o,i,n,r,t[a+6],15,-1560198380),r=v(r,o,i,n,t[a+13],21,1309151649),n=v(n,r,o,i,t[a+4],6,-145523070),i=v(i,n,r,o,t[a+11],10,-1120210379),o=v(o,i,n,r,t[a+2],15,718787259),r=v(r,o,i,n,t[a+9],21,-343485551),n=g(n,s),r=g(r,u),o=g(o,c),i=g(i,f)}return Array(n,r,o,i)}function h(t,e,n,r,o,i){return g((a=g(g(e,t),g(r,i)))<<(s=o)|a>>>32-s,n);var a,s}function d(t,e,n,r,o,i,a){return h(e&n|~e&r,t,e,o,i,a)}function y(t,e,n,r,o,i,a){return h(e&r|n&~r,t,e,o,i,a)}function b(t,e,n,r,o,i,a){return h(e^n^r,t,e,o,i,a)}function v(t,e,n,r,o,i,a){return h(n^(e|~r),t,e,o,i,a)}function g(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}e.exports=function(t){return p.hash(t,l,16)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],7:[function(t,e,n){(function(t,n,r,o,i,a,s,u,c){var f;f=function(t){for(var e,n=new Array(t),r=0;r<t;r++)0==(3&r)&&(e=4294967296*Math.random()),n[r]=e>>>((3&r)<<3)&255;return n},e.exports=f}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],8:[function(t,e,n){(function(n,r,o,i,a,s,u,c,f){var p=t("./helpers");function l(t,e){t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var n,r=Array(80),o=1732584193,i=-271733879,a=-1732584194,s=271733878,u=-1009589776,c=0;c<t.length;c+=16){for(var f=o,p=i,l=a,b=s,v=u,g=0;g<80;g++){r[g]=g<16?t[c+g]:y(r[g-3]^r[g-8]^r[g-14]^r[g-16],1);var m=d(d(y(o,5),h(g,i,a,s)),d(d(u,r[g]),(n=g)<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514));u=s,s=a,a=y(i,30),i=o,o=m}o=d(o,f),i=d(i,p),a=d(a,l),s=d(s,b),u=d(u,v)}return Array(o,i,a,s,u)}function h(t,e,n,r){return t<20?e&n|~e&r:!(t<40)&&t<60?e&n|e&r|n&r:e^n^r}function d(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function y(t,e){return t<<e|t>>>32-e}e.exports=function(t){return p.hash(t,l,20,!0)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],9:[function(t,e,n){(function(n,r,o,i,a,s,u,c,f){function p(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function l(t,e){return t>>>e|t<<32-e}function h(t,e){return t>>>e}function d(t,e){var n,r,o,i,a,s,u,c,f,d,y,b,v,g,m,w,_,A,j=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),I=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),E=new Array(64);t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var S=0;S<t.length;S+=16){n=I[0],r=I[1],o=I[2],i=I[3],a=I[4],s=I[5],u=I[6],c=I[7];for(var x=0;x<64;x++)E[x]=x<16?t[x+S]:p(p(p(l(A=E[x-2],17)^l(A,19)^h(A,10),E[x-7]),l(_=E[x-15],7)^l(_,18)^h(_,3)),E[x-16]),f=p(p(p(p(c,l(w=a,6)^l(w,11)^l(w,25)),(m=a)&s^~m&u),j[x]),E[x]),d=p(l(g=n,2)^l(g,13)^l(g,22),(y=n)&(b=r)^y&(v=o)^b&v),c=u,u=s,s=a,a=p(i,f),i=o,o=r,r=n,n=p(f,d);I[0]=p(n,I[0]),I[1]=p(r,I[1]),I[2]=p(o,I[2]),I[3]=p(i,I[3]),I[4]=p(a,I[4]),I[5]=p(s,I[5]),I[6]=p(u,I[6]),I[7]=p(c,I[7])}return I}var y=t("./helpers");e.exports=function(t){return y.hash(t,d,32,!0)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],10:[function(t,e,n){(function(t,n,r,o,i,a,s,u,c){function f(){}(t=e.exports={}).nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",(function(t){var e=t.source;e!==window&&null!==e||"process-tick"!==t.data||(t.stopPropagation(),0<n.length&&n.shift()())}),!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),t.title="browser",t.browser=!0,t.env={},t.argv=[],t.on=f,t.addListener=f,t.once=f,t.off=f,t.removeListener=f,t.removeAllListeners=f,t.emit=f,t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:10}],11:[function(t,e,n){(function(t,e,r,o,i,a,s,u,c){n.read=function(t,e,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,c=u>>1,f=-7,p=n?o-1:0,l=n?-1:1,h=t[e+p];for(p+=l,i=h&(1<<-f)-1,h>>=-f,f+=s;0<f;i=256*i+t[e+p],p+=l,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=r;0<f;a=256*a+t[e+p],p+=l,f-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=c}return(h?-1:1)*a*Math.pow(2,i-r)},n.write=function(t,e,n,r,o,i){var a,s,u,c=8*i-o-1,f=(1<<c)-1,p=f>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),2<=(e+=1<=a+p?l/u:l*Math.pow(2,1-p))*u&&(a++,u/=2),f<=a+p?(s=0,a=f):1<=a+p?(s=(e*u-1)*Math.pow(2,o),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,o),a=0));8<=o;t[n+h]=255&s,h+=d,s/=256,o-=8);for(a=a<<o|s,c+=o;0<c;t[n+h]=255&a,h+=d,a/=256,c-=8);t[n+h-d]|=128*y}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/ieee754/index.js","/node_modules/ieee754")},{buffer:3,lYpoI2:10}]},{},[1])(1)},function(t,e,n){var r=n(84);t.exports=function(t){return r(t,5)}},function(t,e,n){var r=n(29),o=n(35);t.exports=function(t,e){for(var n=0,i=(e=r(e,t)).length;null!=t&&n<i;)t=t[o(e[n++])];return n&&n==i?t:void 0}},function(t,e,n){var r=n(5),o=n(16),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||(a.test(t)||!i.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(9),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[s]=n:delete t[s]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(56),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(57);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(31);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},function(t,e,n){var r=n(59),o=n(11),i=n(18);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){var r=n(60),o=n(65),i=n(66),a=n(67),s=n(68);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(10);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e,n){var r=n(32),o=n(62),i=n(7),a=n(33),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,f=u.toString,p=c.hasOwnProperty,l=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?l:s).test(a(t))}},function(t,e,n){var r,o=n(63),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(2)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(10),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(10),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(10);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(12),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():o.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(12);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(12);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(12);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(13);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(13);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(13);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(13);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){var r=n(80);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(9),o=n(81),i=n(5),a=n(16),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(83),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(17))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o,i,a,s,u=1,c={},f=!1,p=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){i.port2.postMessage(t)}):p&&"onreadystatechange"in p.createElement("script")?(o=p.documentElement,r=function(t){var e=p.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return c[u]=o,r(u),u++},l.clearImmediate=h}function h(t){delete c[t]}function d(t){if(f)setTimeout(d,0,t);else{var e=c[t];if(e){f=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{h(t),f=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(17),n(36))},function(t,e,n){var r=n(85),o=n(91),i=n(19),a=n(93),s=n(102),u=n(105),c=n(106),f=n(107),p=n(109),l=n(110),h=n(111),d=n(27),y=n(116),b=n(117),v=n(123),g=n(5),m=n(39),w=n(125),_=n(7),A=n(127),j=n(20),I=n(25),E={};E["[object Arguments]"]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E["[object Object]"]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E["[object Function]"]=E["[object WeakMap]"]=!1,t.exports=function t(e,n,S,x,P,O){var T,N=1&n,C=2&n,k=4&n;if(S&&(T=P?S(e,x,P,O):S(e)),void 0!==T)return T;if(!_(e))return e;var D=g(e);if(D){if(T=y(e),!N)return c(e,T)}else{var V=d(e),z="[object Function]"==V||"[object GeneratorFunction]"==V;if(m(e))return u(e,N);if("[object Object]"==V||"[object Arguments]"==V||z&&!P){if(T=C||z?{}:v(e),!N)return C?p(e,s(T,e)):f(e,a(T,e))}else{if(!E[V])return P?e:{};T=b(e,V,N)}}O||(O=new r);var U=O.get(e);if(U)return U;O.set(e,T),A(e)?e.forEach((function(r){T.add(t(r,n,S,r,e,O))})):w(e)&&e.forEach((function(r,o){T.set(o,t(r,n,S,o,e,O))}));var F=D?void 0:(k?C?h:l:C?I:j)(e);return o(F||e,(function(r,o){F&&(r=e[o=r]),i(T,o,t(r,n,S,o,e,O))})),T}},function(t,e,n){var r=n(11),o=n(86),i=n(87),a=n(88),s=n(89),u=n(90);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,t.exports=c},function(t,e,n){var r=n(11);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(11),o=n(18),i=n(31);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(t,e),this.size=n.size,this}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(4),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){var r=n(14),o=n(20);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(96),o=n(6),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){var r=n(8),o=n(6);t.exports=function(t){return o(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(99),o=n(22),i=n(23),a=i&&i.isTypedArray,s=a?o(a):r;t.exports=s},function(t,e,n){var r=n(8),o=n(41),i=n(6),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(24),o=n(101),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(42)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(14),o=n(25);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e,n){var r=n(7),o=n(24),i=n(104),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=o(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){(function(t){var r=n(2),o=e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(21)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(14),o=n(26);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}},function(t,e,n){var r=n(14),o=n(45);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(48),o=n(26),i=n(20);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(48),o=n(45),i=n(25);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(4)(n(2),"DataView");t.exports=r},function(t,e,n){var r=n(4)(n(2),"Promise");t.exports=r},function(t,e,n){var r=n(4)(n(2),"Set");t.exports=r},function(t,e,n){var r=n(4)(n(2),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(28),o=n(119),i=n(120),a=n(121),s=n(122);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return o(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return i(t);case"[object Set]":return new u;case"[object Symbol]":return a(t)}}},function(t,e,n){var r=n(2).Uint8Array;t.exports=r},function(t,e,n){var r=n(28);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(9),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},function(t,e,n){var r=n(28);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(124),o=n(47),i=n(24);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:r(o(t))}},function(t,e,n){var r=n(7),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){var r=n(126),o=n(22),i=n(23),a=i&&i.isMap,s=a?o(a):r;t.exports=s},function(t,e,n){var r=n(27),o=n(6);t.exports=function(t){return o(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(128),o=n(22),i=n(23),a=i&&i.isSet,s=a?o(a):r;t.exports=s},function(t,e,n){var r=n(27),o=n(6);t.exports=function(t){return o(t)&&"[object Set]"==r(t)}},function(t,e,n){var r=n(19),o=n(29),i=n(40),a=n(7),s=n(35);t.exports=function(t,e,n,u){if(!a(t))return t;for(var c=-1,f=(e=o(e,t)).length,p=f-1,l=t;null!=l&&++c<f;){var h=s(e[c]),d=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return t;if(c!=p){var y=l[h];void 0===(d=u?u(y,h,l):void 0)&&(d=a(y)?y:i(e[c+1])?[]:{})}r(l,h,d),l=l[h]}return t}},function(t,e,n){"use strict";n.r(e),n.d(e,"getStore",(function(){return B}));var r=n(49),o=n.n(r),i=n(3),a=n.n(i);const s={"Content-type":"application/json; charset=utf-8"},u=/.*/,c={json:"json",text:"text",blob:"blob",formData:"formData",arrayBuffer:"arrayBuffer"};function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class p{constructor({apiName:t,apiHost:e,getToken:n,headers:r=s,allowNoTokenEndpoints:o=u,defaultResponseFormat:i=c.json,paginationTemplate:a="limit={pageSize}&offset={offset}",entityDataAddress:p,genericTypeAddress:l="_object",entityErrorAddress:h,arrayDataAddress:d,arrayErrorAddress:y,arrayCountAddress:b}={}){f(this,"GET",(t,e={},...n)=>this.callApi(t,{...e,method:"GET",body:void 0},...n)),f(this,"POST",(t,e={},...n)=>this.callApi(t,{...e,method:"POST"},...n)),f(this,"PUT",(t,e={},...n)=>this.callApi(t,{...e,method:"PUT"},...n)),f(this,"PATCH",(t,e={},...n)=>this.callApi(t,{...e,method:"PATCH"},...n)),f(this,"DELETE",(t,e={},...n)=>this.callApi(t,{...e,method:"DELETE"},...n)),this.apiName=t,this.apiHost=e,this.apiHost||(this.apiHost=window.location.host),/https?/.test(this.apiHost)||(this.apiHost=`${window.location.protocol}//${this.apiHost}`),this.getToken=n,this.headers=r,this.allowNoTokenEndpoints=o,Array.isArray(this.allowNoTokenEndpoints)||(this.allowNoTokenEndpoints=[this.allowNoTokenEndpoints]),this.defaultResponseFormat=i,this.paginationTemplate=a,this.entityDataAddress=p,this.genericTypeAddress=l,this.entityErrorAddress=h,this.arrayDataAddress=d,this.arrayErrorAddress=y,this.arrayCountAddress=b}getItemGenericType(t){return a()(t,this.genericTypeAddress)}async getResponseData(t,e,n){const r=c[e||this.defaultResponseFormat];if(!r)return console.error(`Error. Unknown format "${e||this.defaultResponseFormat}"`),{status:500,error:{global:`Unknown format "${e||this.defaultResponseFormat}"`}};const o=await t[r](),i=n?this.entityDataAddress:this.arrayDataAddress,s=i?a()(o,i):o,u=n?this.entityErrorAddress:this.arrayErrorAddress,f=u?a()(o,u):o;let p=1;return n||(p=this.arrayCountAddress?a()(o,this.arrayCountAddress):s.length),{status:t.status,data:t.status<400?s:void 0,error:t.status<400?void 0:f,count:p}}getUrl(t,{pk:e,filters:n,hash:r="",page:o,pageSize:i}={}){let a;if(e){let n;n=/\/$/.test(t)?`${t}${e}/`:`${t}/${e}`,a=new URL(n,this.apiHost)}else a=new URL(t,this.apiHost);if(a.hash=r,n)if("string"==typeof n)a.search=n;else{if("object"!=typeof n||Array.isArray(n))throw new Error("Incorrect filters format");Object.keys(n).forEach(t=>{const e=n[t];Array.isArray(e)?e.forEach(e=>{a.searchParams.append(t,e)}):a.searchParams.append(t,e)})}if(i){const t=o*i,e=(s=this.paginationTemplate,u={pageNumber:o,pageSize:i,offset:t},s.replace(/\{([^{}]+)\}/g,(t,e)=>void 0!==u[e]?u[e]:t)),n=new URL("http://trood.com");n.search=e;for(let t of n.searchParams.keys()){const e=n.searchParams.getAll(t);Array.isArray(e)?e.forEach(e=>{a.searchParams.append(t,e)}):a.searchParams.append(t,e)}}var s,u;return a.toString()}async callApi(t,{pk:e,method:n,headers:r,body:i,filters:a,page:s,pageSize:u,hash:c,format:f,cacheMaxAgeMs:l=6e4}={},h=(()=>{})){let d,y;"function"==typeof this.getToken&&(d=this.getToken()),d instanceof Promise&&(d=await d);try{y=this.getUrl(t,{pk:e,filters:a,hash:c,page:s,pageSize:u})}catch(t){return console.error("Error. "+t),{status:500,error:{global:t}}}const b=o()({url:y,method:n});if(!d){if(!this.allowNoTokenEndpoints.some(e=>"string"==typeof e?e===t:e instanceof RegExp&&e.test(t)))return console.warn(`Called ${y} which requires token, but there was no token found!`),{status:401,error:{global:"Authorization token is required"}}}const v=(new Date).getTime();if("GET"===n){const t=p.cache[b]||0;if(t+l>v)return{status:0};t||(p.cache[b]=v)}let g;d&&(g={Authorization:d}),g={...g,...this.headers,...r},h();const m=await fetch(y,{method:n,body:i,headers:g}),w=await this.getResponseData(m,f,e);return w.error?p.cache[b]=void 0:p.cache[b]=(new Date).getTime(),w}}f(p,"cache",{});var l=p;const h={};var d=({apiName:t,...e}={})=>{const n=h[t];return n||(h[t]=new l({apiName:t,...e}),h[t])},y=n(0);const b=/fk\((.*)\)/,v=/fk_array\((.*)\)/,g=(t,e,n,r)=>y.e.late(`lateRef(${t}:${e})`,()=>y.e.reference(r(t,e),{get:r=>n()[t][e].items.getWithProxy(r,n()),set:t=>t.pk})),m=(t,e,n)=>{if("string"!=typeof t)return;const r=t.match(e);return r?r[1].split(",").map(t=>{const e=(t.includes(":")?t.trim():`${n}:${t.trim()}`).split(":");return{apiName:e[0],modelName:e[1]}}):void 0},w=(t,e="",n=!1,r,o)=>{if(n)return"number"===e?y.e.identifierNumber:y.e.identifier;if("object"==typeof y.e[e])return y.e.maybeNull(y.e[e]);const i=m(e,b,t);if(i)return y.e.union(y.e.null,y.e.undefined,...i.map(t=>g(t.apiName,t.modelName,r,o)));const a=m(e,v,t);return a?y.e.optional(y.e.array(y.e.union(y.e.null,y.e.undefined,...a.map(t=>g(t.apiName,t.modelName,r,o)))),[]):y.e.maybeNull(y.e.frozen())};var _=({apiAdapter:t,modelName:e,modelPk:n,modelEndpoint:r,modelFields:o},i,a,s)=>{const u=((t,e,n,r,o,i)=>{const a=Object.keys(r).reduce((e,a)=>{const s=r[a];return{...e,[a]:w(t,s,a===n,o,i)}},{$modelName:e,$loading:!1,$loadedById:!1,$error:0,$errorData:y.e.maybeNull(y.e.frozen()),$deleted:!1});return y.e.model(e,a).views(t=>({get pk(){return t[n]},get modelData(){const e=Object(y.c)(t);return Object.keys(e).reduce((t,n)=>/^\$/.test(n)?t:{...t,[n]:e[n]},{})}}))})(t.apiName,e,n,o,i,a);s(t.apiName,e,u);const c=y.e.model(e+"_page",{page:y.e.identifierNumber,items:y.e.map(y.e.reference(u)),$loading:!1,$error:0,$errorData:y.e.maybeNull(y.e.frozen())}),f=y.e.model(e+"_pages",{pageSize:y.e.identifierNumber,pages:y.e.map(c)}),p=y.e.model(e+"_map",{url:y.e.identifier,count:y.e.number,pageSizes:y.e.map(f)});return y.e.model(e+"_list",{modelName:y.e.identifier,items:y.e.map(u).hooks(e=>({getWithProxy(n,r){const o=e.get(n),i=r[t.apiName][u.name];return new Proxy(o,{get(t,e){const n=t[e];return u.properties[e]?(!Object.prototype.hasOwnProperty.call(t,e)||null!=n||t.$loading||t.$loadedById||t.$error||i.getByPk(t.pk),n):n}})}})),lists:y.e.map(p)}).views(e=>({asyncGetByPk(n,o={},a=!1){const s=e.items.get(n)||{};return s.$error?Promise.resolve(()=>e.items.getWithProxy(n,i())||{}):(e.createItem(n),t.GET(r,{...o,pk:n},()=>{e.setItemLoading(n,!0)}).then(({status:t,error:r,data:u})=>{t&&(r?e.setItemError(n,t,r):e.createItem({...u,$loading:!1,$loadedById:!o.filters||s.$loadedById,$error:0,$errorData:null}));const c=e.items.getWithProxy(n,i())||{};return!a||c.$deleted?{}:c}))},getByPk(t,n={},r=!1){e.asyncGetByPk(t,n);const o=e.items.getWithProxy(t,i())||{};return!r||o.$deleted?{}:o},asyncGetPage(n=0,o=0,i={},a=!1){const s=t.getUrl(r,i);return e.createList(s,n,o),t.GET(r,{...i,page:n,pageSize:o}).then(t=>{t.status&&e.createList(s,n,o,t);const r=e.lists.get(s).pageSizes.get(o).pages.get(n);return r?Array.from(r.items.values()).filter(t=>a||!t.$deleted):[]})},getPage(n=0,o=0,i={},a=!1){const s=t.getUrl(r,i);e.asyncGetPage(n,o,i);const u=e.lists.get(s).pageSizes.get(o).pages.get(n);return u?Array.from(u.items.values()).filter(t=>a||!t.$deleted):[]},getInfinityPages(n=0,o={},i=!1){let a=0;const s=t.getUrl(r,o);e.lists.has(s)&&e.lists.get(s).pageSizes.has(n)&&e.lists.get(s).pageSizes.get(n).pages.has(a)||e.asyncGetPage(a,n,o);let u=e.lists.get(s).pageSizes.get(n).pages.get(a),c=[];for(;u;)c=[...c,...Array.from(u.items.values())],a+=1,u=e.lists.get(s).pageSizes.get(n).pages.get(a);return c.filter(t=>i||!t.$deleted)},getInfinityNextPageNumber(n=0,o={}){let i=0;const a=t.getUrl(r,o),{count:s,pageSizes:u}=e.lists.get(a),{pages:c}=u.get(n);for(;c.has(i);)i+=1;if(!(i*n>s))return i},getInfinityNextPage(t=0,n={}){const r=e.getInfinityNextPageNumber(t,n);void 0!==r&&e.asyncGetPage(r,t,n)}})).actions(e=>({createItem(n){const r=u.identifierAttribute;if("object"==typeof n){const o=n[r],a=((t,e)=>{const n=t.get(e);return n?{...Object(y.c)(n)}:{}})(e.items,o),s={[r]:o};return e.items.has(o)||e.items.set(o,s),Object.keys(n).forEach(e=>{const r=u.properties[e],o=(t=>{if(!t)return;const e=Array.from((t.name||"").matchAll(/lateRef\(([\w:]*)\)/g)).map(t=>t[1]);return e.length?e:void 0})(r);if(o){const s=i();if(Object(y.d)(r))if(1===o.length){const t=o[0].split(":");a[e]=n[e].map(e=>s[t[0]][t[1]].createItem(e))}else a[e]=n[e].map(e=>{const n=t.getItemGenericType(e).split(":");return 1===n.length&&(n.push(n[0]),n[0]=t.apiName),s[n[0]][n[1]].createItem(e)});else if(1===o.length){const t=o[0].split(":");a[e]=s[t[0]][t[1]].createItem(n[e])}else{const r=t.getItemGenericType(n[e]).split(":");1===r.length&&(r.push(r[0]),r[0]=t.apiName),a[e]=s[r[0]][r[1]].createItem(n[e])}}else a[e]=n[e]}),e.items.set(o,a),e.items.get(o)}return e.items.has(n)||e.items.set(n,{[r]:n}),e.items.get(n)},createList(t,n=0,r=0,o){let i,a,s;if(o){const{data:u=[],count:c=0,status:f,error:p}=o;i={page:n,items:u.reduce((t,n)=>{const r=e.createItem({...n,$error:0,$errorData:void 0});return{...t,[r]:r}},{}),$error:p?f:0,$errorData:p},a={pageSize:r,pages:{[n]:i}},s={url:t,count:c,pageSizes:{[r]:a}}}else a={pageSize:r},s={url:t,count:0,pageSizes:{[r]:a}};const u=e.lists.get(t);if(u){const t=u.pageSizes.get(r);if(t){const e=t.pages.get(n);(e&&o||!e&&i)&&t.pages.set(n,i)}else u.pageSizes.set(r,a)}else e.lists.set(t,s);s.count&&(u.count=s.count)},setItemLoading(t,n){e.items.has(t)&&(e.items.get(t).$loading=n)},setItemError(t,n,r){const o=u.identifierAttribute;e.items.set(t,{...e.items.get(t),[o]:t,$loading:!1,$error:n,$errorData:r})},setItemDeleted(t){e.items.has(t)&&e.items.set(t,{...e.items.get(t),$deleted:!0})},upsert(n,o,i={}){let a=(i.method||"").toUpperCase();a||(a=n?"PATCH":"POST"),t[a](i.endpoint||r,{...i,pk:n,body:o}).then(t=>{const{status:r,error:o,data:i}=t;return r&&(o?n&&e.setItemError(n,r,o):e.createItem({...i,$loading:!1,$error:0,$errorData:null})),t})},deleteByPk(n,o={}){t.DELETE(r,{...o,pk:n}).then(()=>e.setItemDeleted(n))}}))};const A=y.e.model("default_model",{url:y.e.identifier,data:y.e.maybeNull(y.e.frozen()),$loading:!1,$error:0,$errorData:y.e.maybeNull(y.e.frozen())});var j=t=>y.e.model("default_list",{modelName:y.e.identifier,items:y.e.map(A)}).views(e=>({asyncGetData(n,r={}){const o=t.getUrl(n,r);return e.createItem(o,{$loading:!0}),t.GET(n,r).then(({status:t,error:n,data:r})=>(t&&(n?e.setItemError(o,t,n):e.createItem(o,{data:r})),(e.items.get(o)||{}).data))},getData(n,r={}){const o=t.getUrl(n,r);return e.asyncGetData(n,r),(e.items.get(o)||{}).data}})).actions(e=>({createItem(t,n){e.items.set(t,{...e.items.get(t),url:t,$loading:!1,$error:0,$errorData:null,...n})},setItemError(t,n,r){e.items.set(t,{url:t,$loading:!1,$error:n,$errorData:r})},upsert(e,n,r={}){const o=(r.method||"").toUpperCase();if(!r.endpoint||!o)throw new Error("For use default API you mast set options.endpoint and options.method");return t[o](r.endpoint,{...r,pk:e,body:n})}}));const I={};let E={};const S=()=>E,x=(t,e)=>I[t][e],P=(t,e,n)=>{I[t]||(I[t]={}),I[t][e]=n};var O=n(50),T=n.n(O),N=n(15),C=n.n(N);const k=t=>null!=t&&("object"!=typeof t||Object.keys(t).reduce((e,n)=>{const r=t[n];return null==r||!1===r?e||!1:"object"!=typeof r||(e||k(r))},!1)),D=(t,e)=>{const n=T()(t);return Object.keys(e).forEach(t=>{const r=a()(e,t);if("object"==typeof r&&null!==r){let e=a()(n,t);"object"==typeof e&&null!==e||(e=Array.isArray(r)?[]:{}),C()(n,t,D(e,r))}else C()(n,t,r)}),n},V={data:{},errors:{},hasErrors:!1},z=y.e.model("form",{name:y.e.identifier,$apiName:"default",$modelName:"default",$pk:y.e.union(y.e.number,y.e.string,y.e.null,y.e.undefined),data:y.e.optional(y.e.frozen(),{}),errors:y.e.optional(y.e.frozen(),{})}).views(t=>({get hasErrors(){return k(t.errors)}})).actions(t=>({changeFields(e){t.data=D(t.data,e)},changeFieldsErrors(e){t.errors=D(t.errors,e)},remove(){Object(y.b)(t,2).removeItem(t)}})),U={};const F=t=>y.e.model("forms",{forms:y.e.map(y.e.union({dispatcher:e=>((t="default",e="default",n)=>{let r=a()(U,[t,e]);if(r)return r;const o=n[t][e];return r=z.extend(t=>({actions:{submit(e,n=!1){const r=o.upsert(t.$pk,JSON.stringify(t.data),e);return n&&t.remove(),r}}})),C()(U,[t,e],r),r})(e.$apiName,e.$modelName,t)}))}).views(t=>({getFormName({formName:t,apiName:e,modelName:n,modelPk:r}={}){if(t)return t;if(e&&n)return r?`${e}:${n}:${r}`:`${e}:${n}`;throw new Error("You mast set formName or apiName and modelName")},async asyncGetForm({formName:e,apiName:n,modelName:r,modelPk:o,values:i}={}){const a=t.getFormName({formName:e,apiName:n,modelName:r,modelPk:o});let s;return s=t.forms.has(a)?t.forms.get(a):await t.createForm({formName:a,apiName:n,modelName:r,modelPk:o,values:i}),s||V},getForm({formName:e,apiName:n,modelName:r,modelPk:o,values:i}={}){const a=t.getFormName({formName:e,apiName:n,modelName:r,modelPk:o});return t.forms.has(a)||t.createForm({formName:a,apiName:n,modelName:r,modelPk:o,values:i}),t.forms.get(a)||V}})).actions(e=>({createForm:({formName:n,apiName:r,modelName:o,modelPk:i,values:a})=>new Promise(s=>{if(r&&o&&i)t[r][o].asyncGetByPk(i).then(t=>{const u={...t.modelData,...a};e.setForm(n,{name:n,$apiName:r,$modelName:o,$pk:i,data:u}),s(e.forms.get(n))});else{const t=a;e.setForm(n,{name:n,$apiName:r,$modelName:o,$pk:i,data:t}),s(e.forms.get(n))}}),setForm(t,n){e.forms.set(t,n)},removeItem(t){Object(y.a)(t)}}));const B=(t={},e)=>{const n=((t={},e)=>{Object.keys(t).forEach(n=>{E[n]||(E[n]={});const r=t[n],o=d({...r,apiName:n,getToken:e});Object.keys(r.objects).forEach(t=>{const e=r.objects[t],i={apiAdapter:o,modelName:t,modelPk:e.pk,modelEndpoint:e.endpoint,modelFields:e.fields},a=_(i,S,x,P);E[n][t]=a.create({modelName:t})})});const n=d({apiName:"default",getToken:e});return E.default={default:j(n).create({modelName:"default"})},E})(t,e);return{apis:n,forms:F(n).create()}}}])}));
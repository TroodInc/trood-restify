!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("mobx")):"function"==typeof define&&define.amd?define(["mobx"],e):"object"==typeof exports?exports["trood-restify"]=e(require("mobx")):t["trood-restify"]=e(t.mobx)}(this,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n.h="5f712f44c7da9c8c7a8b",n.cn="main",n(n.s=59)}([function(e,n){e.exports=t},function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return Ft})),n.d(e,"c",(function(){return xe}));var i,o=n(0),a="warn";function s(){return a}!function(t){t.afterCreate="afterCreate",t.afterAttach="afterAttach",t.afterCreationFinalization="afterCreationFinalization",t.beforeDetach="beforeDetach",t.beforeDestroy="beforeDestroy"}(i||(i={}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function c(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var p=function(){return(p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function f(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function l(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function d(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}function y(t){return q(t,1),X(t).type}function g(t,e){q(t,1),At(e,(function(t){return"object"==typeof t}),"object or array",2),X(t).applyPatches(pt(e))}function v(t,e){void 0===e&&(e=!0),q(t,1);var n=X(t);return e?n.snapshot:dt(n.type.getSnapshot(n,!1))}function b(t){return q(t,1),X(t).root.storedValue}var m,w=function(){function t(t,e,n,r){this.type=t,this.environment=r,this._state=Y.INITIALIZING,this.environment=r,this.baseSetParent(e,n)}return Object.defineProperty(t.prototype,"subpath",{get:function(){return this._subpath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subpathUponDeath",{get:function(){return this._subpathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pathUponDeath",{get:function(){return this._pathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.type.getValue(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(t){var e=this.isAlive;this._state=t;var n=this.isAlive;this.aliveAtom&&e!==n&&this.aliveAtom.reportChanged()},enumerable:!1,configurable:!0}),t.prototype.fireInternalHook=function(t){this._hookSubscribers&&this._hookSubscribers.emit(t,this,t)},t.prototype.registerHook=function(t,e){return this._hookSubscribers||(this._hookSubscribers=new vt),this._hookSubscribers.register(t,e)},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),t.prototype.baseSetParent=function(t,e){this._parent=t,this._subpath=e,this._escapedSubpath=void 0,this.pathAtom&&this.pathAtom.reportChanged()},Object.defineProperty(t.prototype,"path",{get:function(){return this.getEscapedPath(!0)},enumerable:!1,configurable:!0}),t.prototype.getEscapedPath=function(t){return t&&(this.pathAtom||(this.pathAtom=Object(o.createAtom)("path")),this.pathAtom.reportObserved()),this.parent?(void 0===this._escapedSubpath&&(this._escapedSubpath=this._subpath?jt(this._subpath):""),this.parent.getEscapedPath(t)+"/"+this._escapedSubpath):""},Object.defineProperty(t.prototype,"isRoot",{get:function(){return null===this.parent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAlive",{get:function(){return this.state!==Y.DEAD},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDetaching",{get:function(){return this.state===Y.DETACHING},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"observableIsAlive",{get:function(){return this.aliveAtom||(this.aliveAtom=Object(o.createAtom)("alive")),this.aliveAtom.reportObserved(),this.isAlive},enumerable:!1,configurable:!0}),t.prototype.baseFinalizeCreation=function(t){if(this.state===Y.CREATED){if(this.parent){if(this.parent.state!==Y.FINALIZED)return;this.fireHook(i.afterAttach)}this.state=Y.FINALIZED,t&&t()}},t.prototype.baseFinalizeDeath=function(){this._hookSubscribers&&this._hookSubscribers.clearAll(),this._subpathUponDeath=this._subpath,this._pathUponDeath=this.getEscapedPath(!1),this.baseSetParent(null,""),this.state=Y.DEAD},t.prototype.baseAboutToDie=function(){this.fireHook(i.beforeDestroy)},t}(),_=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;try{a.storedValue=e.createNewInstance(o)}catch(t){throw a.state=Y.DEAD,t}return a.state=Y.CREATED,a.finalizeCreation(),a}return c(e,t),Object.defineProperty(e.prototype,"root",{get:function(){if(!this.parent)throw at("This scalar node is not part of a tree");return this.parent.root},enumerable:!1,configurable:!0}),e.prototype.setParent=function(t,e){var n=this.parent!==t,r=this.subpath!==e;(n||r)&&(this.environment=void 0,this.baseSetParent(this.parent,e))},Object.defineProperty(e.prototype,"snapshot",{get:function(){return dt(this.getSnapshot())},enumerable:!1,configurable:!0}),e.prototype.getSnapshot=function(){return this.type.getSnapshot(this)},e.prototype.toString=function(){var t=(this.isAlive?this.path:this.pathUponDeath)||"<root>";return this.type.name+"@"+t+(this.isAlive?"":" [dead]")},e.prototype.die=function(){this.isAlive&&this.state!==Y.DETACHING&&(this.aboutToDie(),this.finalizeDeath())},e.prototype.finalizeCreation=function(){this.baseFinalizeCreation()},e.prototype.aboutToDie=function(){this.baseAboutToDie()},e.prototype.finalizeDeath=function(){this.baseFinalizeDeath()},e.prototype.fireHook=function(t){this.fireInternalHook(t)},f([o.action],e.prototype,"die",null),e}(w),A=1,I={onError:function(t){throw t}},S=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;if(a.nodeId=++A,a.isProtectionEnabled=!0,a._autoUnbox=!0,a._isRunningAction=!1,a._hasSnapshotReaction=!1,a._observableInstanceState=0,a._cachedInitialSnapshotCreated=!1,a.unbox=a.unbox.bind(a),a._initialSnapshot=dt(o),a.identifierAttribute=e.identifierAttribute,n||(a.identifierCache=new W),a._childNodes=e.initializeChildNodes(a,a._initialSnapshot),a.identifier=null,a.unnormalizedIdentifier=null,a.identifierAttribute&&a._initialSnapshot){var s=a._initialSnapshot[a.identifierAttribute];if(void 0===s){var u=a._childNodes[a.identifierAttribute];u&&(s=u.value)}if("string"!=typeof s&&"number"!=typeof s)throw at("Instance identifier '"+a.identifierAttribute+"' for type '"+a.type.name+"' must be a string or a number");a.identifier=Pe(s),a.unnormalizedIdentifier=s}return n?n.root.identifierCache.addNodeToCache(a):a.identifierCache.addNodeToCache(a),a}return c(e,t),e.prototype.applyPatches=function(t){this.createObservableInstanceIfNeeded(),this._applyPatches(t)},e.prototype.applySnapshot=function(t){this.createObservableInstanceIfNeeded(),this._applySnapshot(t)},e.prototype.createObservableInstanceIfNeeded=function(){0===this._observableInstanceState&&this.createObservableInstance()},e.prototype.createObservableInstance=function(){var t,e;this._observableInstanceState=1;for(var n=[],r=this.parent;r&&0===r._observableInstanceState;)n.unshift(r),r=r.parent;try{for(var a=l(n),s=a.next();!s.done;s=a.next()){s.value.createObservableInstanceIfNeeded()}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}var u,c,p=this.type;try{this.storedValue=p.createNewInstance(this._childNodes),this.preboot(),this._isRunningAction=!0,p.finalizeNewInstance(this,this.storedValue)}catch(t){throw this.state=Y.DEAD,t}finally{this._isRunningAction=!1}this._observableInstanceState=2,u=this,c="snapshot",Object(o.getAtom)(u,c).trackAndCompute(),this.isRoot&&this._addSnapshotReaction(),this._childNodes=it,this.state=Y.CREATED,this.fireHook(i.afterCreate),this.finalizeCreation()},Object.defineProperty(e.prototype,"root",{get:function(){var t=this.parent;return t?t.root:this},enumerable:!1,configurable:!0}),e.prototype.clearParent=function(){if(this.parent){this.fireHook(i.beforeDetach);var t=this.state;this.state=Y.DETACHING;var e=this.root,n=e.environment,r=e.identifierCache.splitCache(this);try{this.parent.removeChild(this.subpath),this.baseSetParent(null,""),this.environment=n,this.identifierCache=r}finally{this.state=t}}},e.prototype.setParent=function(t,e){var n=t!==this.parent,r=e!==this.subpath;(n||r)&&(n?(this.environment=void 0,t.root.identifierCache.mergeCache(this),this.baseSetParent(t,e),this.fireHook(i.afterAttach)):r&&this.baseSetParent(this.parent,e))},e.prototype.fireHook=function(t){var e=this;this.fireInternalHook(t);var n=this.storedValue&&"object"==typeof this.storedValue&&this.storedValue[t];"function"==typeof n&&(o._allowStateChangesInsideComputed?Object(o._allowStateChangesInsideComputed)((function(){n.apply(e.storedValue)})):n.apply(this.storedValue))},Object.defineProperty(e.prototype,"snapshot",{get:function(){return dt(this.getSnapshot())},enumerable:!1,configurable:!0}),e.prototype.getSnapshot=function(){return this.isAlive?2===this._observableInstanceState?this._getActualSnapshot():this._getCachedInitialSnapshot():this._snapshotUponDeath},e.prototype._getActualSnapshot=function(){return this.type.getSnapshot(this)},e.prototype._getCachedInitialSnapshot=function(){if(!this._cachedInitialSnapshotCreated){var t=this.type,e=this._childNodes,n=this._initialSnapshot;this._cachedInitialSnapshot=t.processInitialSnapshot(e,n),this._cachedInitialSnapshotCreated=!0}return this._cachedInitialSnapshot},e.prototype.isRunningAction=function(){return!!this._isRunningAction||!this.isRoot&&this.parent.isRunningAction()},e.prototype.assertAlive=function(t){var e=s();if(!this.isAlive&&"ignore"!==e){var n=this._getAssertAliveError(t);switch(e){case"error":throw at(n);case"warn":_t(n)}}},e.prototype._getAssertAliveError=function(t){var e=this.getEscapedPath(!1)||this.pathUponDeath||"",n=t.subpath&&jt(t.subpath)||"",r=t.actionContext||N();r&&"action"!==r.type&&r.parentActionEvent&&(r=r.parentActionEvent);var i,o="";r&&null!=r.name&&(o=(r&&r.context&&(q(i=r.context,1),X(i).path)||e)+"."+r.name+"()");return"You are trying to read or write to an object that is no longer part of a state tree. (Object type: '"+this.type.name+"', Path upon death: '"+e+"', Subpath: '"+n+"', Action: '"+o+"'). Either detach nodes first, or don't use objects after removing / replacing them in the tree."},e.prototype.getChildNode=function(t){this.assertAlive({subpath:t}),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildNode(this,t):this._childNodes[t]}finally{this._autoUnbox=!0}},e.prototype.getChildren=function(){this.assertAlive(it),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildren(this):nt(this._childNodes)}finally{this._autoUnbox=!0}},e.prototype.getChildType=function(t){return this.type.getChildType(t)},Object.defineProperty(e.prototype,"isProtected",{get:function(){return this.root.isProtectionEnabled},enumerable:!1,configurable:!0}),e.prototype.assertWritable=function(t){if(this.assertAlive(t),!this.isRunningAction()&&this.isProtected)throw at("Cannot modify '"+this+"', the object is protected and can only be modified by using an action.")},e.prototype.removeChild=function(t){this.type.removeChild(this,t)},e.prototype.unbox=function(t){return t?(this.assertAlive({subpath:t.subpath||t.subpathUponDeath}),this._autoUnbox?t.value:t):t},e.prototype.toString=function(){var t=(this.isAlive?this.path:this.pathUponDeath)||"<root>",e=this.identifier?"(id: "+this.identifier+")":"";return this.type.name+"@"+t+e+(this.isAlive?"":" [dead]")},e.prototype.finalizeCreation=function(){var t=this;this.baseFinalizeCreation((function(){var e,n;try{for(var r=l(t.getChildren()),o=r.next();!o.done;o=r.next()){o.value.finalizeCreation()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}t.fireInternalHook(i.afterCreationFinalization)}))},e.prototype.detach=function(){if(!this.isAlive)throw at("Error while detaching, node is not alive.");this.clearParent()},e.prototype.preboot=function(){var t=this;this._applyPatches=z(this.storedValue,"@APPLY_PATCHES",(function(e){e.forEach((function(e){var n=Ot(e.path);et(t,n.slice(0,-1)).applyPatchLocally(n[n.length-1],e)}))})),this._applySnapshot=z(this.storedValue,"@APPLY_SNAPSHOT",(function(e){if(e!==t.snapshot)return t.type.applySnapshot(t,e)})),yt(this.storedValue,"$treenode",this),yt(this.storedValue,"toJSON",tt)},e.prototype.die=function(){this.isAlive&&this.state!==Y.DETACHING&&(this.aboutToDie(),this.finalizeDeath())},e.prototype.aboutToDie=function(){0!==this._observableInstanceState&&(this.getChildren().forEach((function(t){t.aboutToDie()})),this.baseAboutToDie(),this._internalEventsEmit("dispose"),this._internalEventsClear("dispose"))},e.prototype.finalizeDeath=function(){this.getChildren().forEach((function(t){t.finalizeDeath()})),this.root.identifierCache.notifyDied(this);var t=this.snapshot;this._snapshotUponDeath=t,this._internalEventsClearAll(),this.baseFinalizeDeath()},e.prototype.onSnapshot=function(t){return this._addSnapshotReaction(),this._internalEventsRegister("snapshot",t)},e.prototype.emitSnapshot=function(t){this._internalEventsEmit("snapshot",t)},e.prototype.onPatch=function(t){return this._internalEventsRegister("patch",t)},e.prototype.emitPatch=function(t,e){if(this._internalEventsHasSubscribers("patch")){var n=h(function(t){if(!("oldValue"in t))throw at("Patches without `oldValue` field cannot be inversed");return[Et(t),Pt(t)]}(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var i=e[r];for(var o in i)t[o]=i[o]}return t}({},t,{path:e.path.substr(this.path.length)+"/"+t.path})),2),r=n[0],i=n[1];this._internalEventsEmit("patch",r,i)}this.parent&&this.parent.emitPatch(t,e)},e.prototype.hasDisposer=function(t){return this._internalEventsHas("dispose",t)},e.prototype.addDisposer=function(t){if(this.hasDisposer(t))throw at("cannot add a disposer when it is already registered for execution");this._internalEventsRegister("dispose",t,!0)},e.prototype.removeDisposer=function(t){if(!this._internalEventsHas("dispose",t))throw at("cannot remove a disposer which was never registered for execution");this._internalEventsUnregister("dispose",t)},e.prototype.removeMiddleware=function(t){if(this.middlewares){var e=this.middlewares.indexOf(t);e>=0&&this.middlewares.splice(e,1)}},e.prototype.addMiddleWare=function(t,e){var n=this;void 0===e&&(e=!0);var r={handler:t,includeHooks:e};return this.middlewares?this.middlewares.push(r):this.middlewares=[r],function(){n.removeMiddleware(r)}},e.prototype.applyPatchLocally=function(t,e){this.assertWritable({subpath:t}),this.createObservableInstanceIfNeeded(),this.type.applyPatchLocally(this,t,e)},e.prototype._addSnapshotReaction=function(){var t=this;if(!this._hasSnapshotReaction){var e=Object(o.reaction)((function(){return t.snapshot}),(function(e){return t.emitSnapshot(e)}),I);this.addDisposer(e),this._hasSnapshotReaction=!0}},e.prototype._internalEventsHasSubscribers=function(t){return!!this._internalEvents&&this._internalEvents.hasSubscribers(t)},e.prototype._internalEventsRegister=function(t,e,n){return void 0===n&&(n=!1),this._internalEvents||(this._internalEvents=new vt),this._internalEvents.register(t,e,n)},e.prototype._internalEventsHas=function(t,e){return!!this._internalEvents&&this._internalEvents.has(t,e)},e.prototype._internalEventsUnregister=function(t,e){this._internalEvents&&this._internalEvents.unregister(t,e)},e.prototype._internalEventsEmit=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this._internalEvents&&(e=this._internalEvents).emit.apply(e,d([t],n))},e.prototype._internalEventsClear=function(t){this._internalEvents&&this._internalEvents.clear(t)},e.prototype._internalEventsClearAll=function(){this._internalEvents&&this._internalEvents.clearAll()},f([o.action],e.prototype,"createObservableInstance",null),f([o.computed],e.prototype,"snapshot",null),f([o.action],e.prototype,"detach",null),f([o.action],e.prototype,"die",null),e}(w);!function(t){t[t.String=1]="String",t[t.Number=2]="Number",t[t.Boolean=4]="Boolean",t[t.Date=8]="Date",t[t.Literal=16]="Literal",t[t.Array=32]="Array",t[t.Map=64]="Map",t[t.Object=128]="Object",t[t.Frozen=256]="Frozen",t[t.Optional=512]="Optional",t[t.Reference=1024]="Reference",t[t.Identifier=2048]="Identifier",t[t.Late=4096]="Late",t[t.Refinement=8192]="Refinement",t[t.Union=16384]="Union",t[t.Null=32768]="Null",t[t.Undefined=65536]="Undefined",t[t.Integer=131072]="Integer",t[t.Custom=262144]="Custom",t[t.SnapshotProcessor=524288]="SnapshotProcessor"}(m||(m={}));var E=function(){function t(t){this.isType=!0,this.name=t}return t.prototype.create=function(t,e){return $(this,t),this.instantiate(null,"",e,t).value},t.prototype.getSnapshot=function(t,e){throw at("unimplemented method")},t.prototype.isAssignableFrom=function(t){return t===this},t.prototype.validate=function(t,e){if(Q(t)){var n=y(t);return this.isAssignableFrom(n)?M():R(e,t)}return this.isValidSnapshot(t,e)},t.prototype.is=function(t){return 0===this.validate(t,[{path:"",type:this}]).length},Object.defineProperty(t.prototype,"Type",{get:function(){throw at("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TypeWithoutSTN",{get:function(){throw at("Factory.TypeWithoutSTN should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.TypeWithoutSTN`")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SnapshotType",{get:function(){throw at("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CreationType",{get:function(){throw at("Factory.CreationType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.CreationType`")},enumerable:!1,configurable:!0}),f([o.action],t.prototype,"create",null),t}(),P=function(t){function e(e){return t.call(this,e)||this}return c(e,t),e.prototype.create=function(e,n){return void 0===e&&(e=this.getDefaultSnapshot()),t.prototype.create.call(this,e,n)},e.prototype.getValue=function(t){return t.createObservableInstanceIfNeeded(),t.storedValue},e.prototype.tryToReconcileNode=function(t,e){return!t.isDetaching&&(t.snapshot===e||(!(!Z(e)||X(e)!==t)||!(t.type!==this||!lt(e)||Z(e)||t.identifierAttribute&&t.identifier!==Pe(e[t.identifierAttribute]))&&(t.applySnapshot(e),!0)))},e.prototype.reconcile=function(t,e,n,r){if(this.tryToReconcileNode(t,e))return t.setParent(n,r),t;if(t.die(),Z(e)&&this.isAssignableFrom(y(e))){var i=X(e);return i.setParent(n,r),i}return this.instantiate(n,r,void 0,e)},e.prototype.getSubTypes=function(){return null},f([o.action],e.prototype,"create",null),e}(E),j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.createNewInstance=function(t){return t},e.prototype.getValue=function(t){return t.storedValue},e.prototype.getSnapshot=function(t){return t.storedValue},e.prototype.reconcile=function(t,e,n,r){if(!t.isDetaching&&t.type===this&&t.storedValue===e)return t;var i=this.instantiate(n,r,void 0,e);return t.die(),i},e.prototype.getSubTypes=function(){return null},e}(E);function T(t){return"object"==typeof t&&t&&!0===t.isType}function x(t,e){At(t,T,"mobx-state-tree type",e)}new Map;!function(){function t(t,e){this.hooks=t,this.call=e,this.flowsPending=0,this.running=!0,t&&t.onStart(e)}t.prototype.finish=function(t){this.running&&(this.running=!1,this.hooks&&this.hooks.onFinish(this.call,t))},t.prototype.incFlowsPending=function(){this.flowsPending++},t.prototype.decFlowsPending=function(){this.flowsPending--},Object.defineProperty(t.prototype,"hasFlowsPending",{get:function(){return this.flowsPending>0},enumerable:!1,configurable:!0})}();var O,C=1;function N(){return O}function k(){return C++}function V(t,e){var n=X(t.context);"action"===t.type&&n.assertAlive({actionContext:t});var r=n._isRunningAction;n._isRunningAction=!0;var a=O;O=t;try{return function(t,e,n){var r=new L(t,n);if(r.isEmpty)return Object(o.action)(n).apply(null,e.args);var a=null;return function t(e){var s=r.getNextMiddleware(),u=s&&s.handler;return u?!s.includeHooks&&i[e.name]?t(e):(u(e,(function(e,n){!0,a=t(e),n&&(a=n(a))}),(function(t){!0,a=t})),a):Object(o.action)(n).apply(null,e.args)}(e)}(n,t,e)}finally{O=a,n._isRunningAction=r}}function D(t){if(t)return"action"===t.type?t:t.parentActionEvent}function z(t,e,n){var r=function(){var r=k(),i=O,o=D(i);return V({type:"action",name:e,id:r,args:bt(arguments),context:t,tree:b(t),rootId:i?i.rootId:r,parentId:i?i.id:0,allParentIds:i?d(i.allParentIds,[i.id]):[],parentEvent:i,parentActionEvent:o},n)};return r._isMSTAction=!0,r}var L=function(){function t(t,e){this.arrayIndex=0,this.inArrayIndex=0,this.middlewares=[],e.$mst_middleware&&this.middlewares.push(e.$mst_middleware);for(var n=t;n;)n.middlewares&&this.middlewares.push(n.middlewares),n=n.parent}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.middlewares.length<=0},enumerable:!1,configurable:!0}),t.prototype.getNextMiddleware=function(){var t=this.middlewares[this.arrayIndex];if(t){var e=t[this.inArrayIndex++];return e||(this.arrayIndex++,this.inArrayIndex=0,this.getNextMiddleware())}},t}();function U(t){return"function"==typeof t?"<function"+(t.name?" "+t.name:"")+">":Z(t)?"<"+t+">":"`"+function(t){try{return JSON.stringify(t)}catch(t){return"<Unserializable: "+t+">"}}(t)+"`"}function B(t){var e=t.value,n=t.context[t.context.length-1].type,r=t.context.map((function(t){return t.path})).filter((function(t){return t.length>0})).join("/"),i=r.length>0?'at path "/'+r+'" ':"",o=Z(e)?"value of type "+X(e).type.name+":":ht(e)?"value":"snapshot",a=n&&Z(e)&&n.is(X(e).snapshot);return""+i+o+" "+U(e)+" is not assignable "+(n?"to type: `"+n.name+"`":"")+(t.message?" ("+t.message+")":"")+(n?function(t){return T(t)&&(t.flags&(m.String|m.Number|m.Integer|m.Boolean|m.Date))>0}(n)||ht(e)?".":", expected an instance of `"+n.name+"` or a snapshot like `"+n.describe()+"` instead."+(a?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function F(t,e,n){return t.concat([{path:e,type:n}])}function M(){return rt}function R(t,e,n){return[{context:t,value:e,message:n}]}function H(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function $(e,n){void 0!==t&&Object({PROD:!0,DEV:!1,NODE_ENV:"production"})&&"true"===Object({PROD:!0,DEV:!1,NODE_ENV:"production"}).ENABLE_TYPE_CHECK&&function(t,e){var n=t.validate(e,[{path:"",type:t}]);if(n.length>0)throw at(function(t,e,n){if(0===n.length)return;return"Error while converting "+(r=U(e),(r.length<280?r:r.substring(0,272)+"......"+r.substring(r.length-8))+" to `")+t.name+"`:\n\n    "+n.map(B).join("\n    ");var r}(t,e,n))}(e,n)}var Y,G=0,W=function(){function t(){this.cacheId=G++,this.cache=o.observable.map(),this.lastCacheModificationPerId=o.observable.map()}return t.prototype.updateLastCacheModificationPerId=function(t){var e=this.lastCacheModificationPerId.get(t);this.lastCacheModificationPerId.set(t,void 0===e?1:e+1)},t.prototype.getLastCacheModificationPerId=function(t){var e=this.lastCacheModificationPerId.get(t)||0;return this.cacheId+"-"+e},t.prototype.addNodeToCache=function(t,e){if(void 0===e&&(e=!0),t.identifierAttribute){var n=t.identifier;this.cache.has(n)||this.cache.set(n,o.observable.array([],ot));var r=this.cache.get(n);if(-1!==r.indexOf(t))throw at("Already registered");r.push(t),e&&this.updateLastCacheModificationPerId(n)}},t.prototype.mergeCache=function(t){var e=this;Object(o.values)(t.identifierCache.cache).forEach((function(t){return t.forEach((function(t){e.addNodeToCache(t)}))}))},t.prototype.notifyDied=function(t){if(t.identifierAttribute){var e=t.identifier,n=this.cache.get(e);n&&(n.remove(t),n.length||this.cache.delete(e),this.updateLastCacheModificationPerId(t.identifier))}},t.prototype.splitCache=function(e){var n=this,r=new t,i=e.path;return Object(o.entries)(this.cache).forEach((function(t){for(var e=h(t,2),o=e[0],a=e[1],s=!1,u=a.length-1;u>=0;u--)0===a[u].path.indexOf(i)&&(r.addNodeToCache(a[u],!1),a.splice(u,1),s=!0);s&&n.updateLastCacheModificationPerId(o)})),r},t.prototype.has=function(t,e){var n=this.cache.get(e);return!!n&&n.some((function(e){return t.isAssignableFrom(e.type)}))},t.prototype.resolve=function(t,e){var n=this.cache.get(e);if(!n)return null;var r=n.filter((function(e){return t.isAssignableFrom(e.type)}));switch(r.length){case 0:return null;case 1:return r[0];default:throw at("Cannot resolve a reference to type '"+t.name+"' with id: '"+e+"' unambigously, there are multiple candidates: "+r.map((function(t){return t.path})).join(", "))}},t}();function J(t,e,n,r,i){var o=Q(i);if(o){if(o.parent)throw at("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+(e?e.path:"")+"/"+n+"', but it lives already at '"+o.path+"'");return e&&o.setParent(e,n),o}return new S(t,e,n,r,i)}function K(t,e,n,r,i){return new _(t,e,n,r,i)}function Z(t){return!(!t||!t.$treenode)}function q(t,e){At(t,Z,"mobx-state-tree node",e)}function X(t){if(!Z(t))throw at("Value "+t+" is no MST Node");return t.$treenode}function Q(t){return t&&t.$treenode||null}function tt(){return X(this).snapshot}!function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CREATED=1]="CREATED",t[t.FINALIZED=2]="FINALIZED",t[t.DETACHING=3]="DETACHING",t[t.DEAD=4]="DEAD"}(Y||(Y={}));function et(t,e,n){void 0===n&&(n=!0);for(var r=t,i=0;i<e.length;i++){var o=e[i];if(".."===o){if(r=r.parent)continue}else{if("."===o)continue;if(r){if(r instanceof _)try{var a=r.value;Z(a)&&(r=X(a))}catch(t){if(!n)return;throw t}if(r instanceof S)if(r.getChildType(o)&&(r=r.getChildNode(o)))continue}}if(n)throw at("Could not resolve '"+o+"' in path '"+(xt(e.slice(0,i))||"/")+"' while resolving '"+xt(e)+"'");return}return r}function nt(t){if(!t)return rt;var e=Object.keys(t);if(!e.length)return rt;var n=new Array(e.length);return e.forEach((function(e,r){n[r]=t[e]})),n}var rt=Object.freeze([]),it=Object.freeze({}),ot="string"==typeof o.$mobx?{deep:!1}:{deep:!1,proxy:!1};function at(t){return void 0===t&&(t="Illegal state"),new Error("[mobx-state-tree] "+t)}function st(t){return t}Object.freeze(ot);var ut=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function ct(t){return Array.isArray(t)||Object(o.isObservableArray)(t)}function pt(t){return t?ct(t)?t:[t]:rt}function ft(t){if(null===t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function lt(t){return!(null===t||"object"!=typeof t||t instanceof Date||t instanceof RegExp)}function ht(t,e){return void 0===e&&(e=!0),null==t||!!("string"==typeof t||"number"==typeof t||"boolean"==typeof t||e&&t instanceof Date)}function dt(t){return t}function yt(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}var gt=function(){function t(){this.handlers=[]}return Object.defineProperty(t.prototype,"hasSubscribers",{get:function(){return this.handlers.length>0},enumerable:!1,configurable:!0}),t.prototype.register=function(t,e){var n=this;return void 0===e&&(e=!1),e?this.handlers.unshift(t):this.handlers.push(t),function(){n.unregister(t)}},t.prototype.has=function(t){return this.handlers.indexOf(t)>=0},t.prototype.unregister=function(t){var e=this.handlers.indexOf(t);e>=0&&this.handlers.splice(e,1)},t.prototype.clear=function(){this.handlers.length=0},t.prototype.emit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.handlers.slice();n.forEach((function(e){return e.apply(void 0,d(t))}))},t}(),vt=function(){function t(){}return t.prototype.hasSubscribers=function(t){var e=this.eventHandlers&&this.eventHandlers[t];return!!e&&e.hasSubscribers},t.prototype.register=function(t,e,n){void 0===n&&(n=!1),this.eventHandlers||(this.eventHandlers={});var r=this.eventHandlers[t];return r||(r=this.eventHandlers[t]=new gt),r.register(e,n)},t.prototype.has=function(t,e){var n=this.eventHandlers&&this.eventHandlers[t];return!!n&&n.has(e)},t.prototype.unregister=function(t,e){var n=this.eventHandlers&&this.eventHandlers[t];n&&n.unregister(e)},t.prototype.clear=function(t){this.eventHandlers&&delete this.eventHandlers[t]},t.prototype.clearAll=function(){this.eventHandlers=void 0},t.prototype.emit=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.eventHandlers&&this.eventHandlers[t];i&&(e=i).emit.apply(e,d(n))},t}();function bt(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t[n];return e}function mt(t,e){return 0===t.indexOf(e)}var wt=function(t,e){};function _t(t){console.warn(new Error("[mobx-state-tree] "+t))}function At(t,e,n,r){0}function It(t,e){At()}function St(t,e,n){void 0===n&&(n=!0),At(),n||At()}function Et(t){switch(t.op){case"add":return{op:"add",path:t.path,value:t.value};case"remove":return{op:"remove",path:t.path};case"replace":return{op:"replace",path:t.path,value:t.value}}}function Pt(t){switch(t.op){case"add":return{op:"remove",path:t.path};case"remove":return{op:"add",path:t.path,value:t.oldValue};case"replace":return{op:"replace",path:t.path,value:t.oldValue}}}function jt(t){return!0==("number"==typeof t)?""+t:-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function Tt(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function xt(t){if(0===t.length)return"";var e=function(t){return t.map(jt).join("/")};return"."===t[0]||".."===t[0]?e(t):"/"+e(t)}function Ot(t){var e=t.split("/").map(Tt);if(!(""===t||"."===t||".."===t||mt(t,"/")||mt(t,"./")||mt(t,"../")))throw at("a json path must be either rooted, empty or relative, but got '"+t+"'");return""===e[0]&&e.shift(),e}wt.ids={};var Ct=function(t){function e(e,n,r){var i=t.call(this,r||e.name)||this;return i._subtype=e,i._processors=n,i}return c(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){return this._subtype.flags|m.SnapshotProcessor},enumerable:!1,configurable:!0}),e.prototype.describe=function(){return"snapshotProcessor("+this._subtype.describe()+")"},e.prototype.preProcessSnapshot=function(t){return this._processors.preProcessor?this._processors.preProcessor.call(null,t):t},e.prototype.postProcessSnapshot=function(t){return this._processors.postProcessor?this._processors.postProcessor.call(null,t):t},e.prototype._fixNode=function(t){var e=this;!function(t,e){for(var n,r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];try{for(var a=l(i),s=a.next();!s.done;s=a.next()){var u=s.value;t[u]=e[u].bind(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}(t.type,this,"isAssignableFrom","create");var n=t.getSnapshot;t.getSnapshot=function(){return e.postProcessSnapshot(n.call(t))}},e.prototype.instantiate=function(t,e,n,r){var i=Z(r)?r:this.preProcessSnapshot(r),o=this._subtype.instantiate(t,e,n,i);return this._fixNode(o),o},e.prototype.reconcile=function(t,e,n,r){var i=this._subtype.reconcile(t,Z(e)?e:this.preProcessSnapshot(e),n,r);return i!==t&&this._fixNode(i),i},e.prototype.getSnapshot=function(t,e){void 0===e&&(e=!0);var n=this._subtype.getSnapshot(t);return e?this.postProcessSnapshot(n):n},e.prototype.isValidSnapshot=function(t,e){var n=this.preProcessSnapshot(t);return this._subtype.validate(n,e)},e.prototype.getSubTypes=function(){return this._subtype},e.prototype.is=function(t){var e=T(t)?this._subtype:Z(t)?v(t,!1):this.preProcessSnapshot(t);return 0===this._subtype.validate(e,[{path:"",type:this._subtype}]).length},e}(E);var Nt,kt="Map.put can only be used to store complex values that have an identifier type attribute";!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO"}(Nt||(Nt={}));var Vt=function(t){function e(e){return t.call(this,e,o.observable.ref.enhancer)||this}return c(e,t),e.prototype.get=function(e){return t.prototype.get.call(this,""+e)},e.prototype.has=function(e){return t.prototype.has.call(this,""+e)},e.prototype.delete=function(e){return t.prototype.delete.call(this,""+e)},e.prototype.set=function(e,n){return t.prototype.set.call(this,""+e,n)},e.prototype.put=function(t){if(!t)throw at("Map.put cannot be used to set empty values");if(Z(t)){var e=X(t);if(null===e.identifier)throw at(kt);return this.set(e.identifier,t),t}if(lt(t)){var n=X(this),r=n.type;if(r.identifierMode!==Nt.YES)throw at(kt);var i=t[r.mapIdentifierAttribute];if(!je(i)){var o=this.put(r.getChildType().create(t,n.environment));return this.put(v(o))}var a=Pe(i);return this.set(a,t),this.get(a)}throw at("Map.put can only be used to store complex values")},e}(o.ObservableMap),Dt=function(t){function e(e,n,r){void 0===r&&(r=[]);var i=t.call(this,e)||this;return i._subType=n,i.identifierMode=Nt.UNKNOWN,i.mapIdentifierAttribute=void 0,i.flags=m.Map,i.hookInitializers=[],i._determineIdentifierMode(),i.hookInitializers=r,i}return c(e,t),e.prototype.hooks=function(t){var n=this.hookInitializers.length>0?this.hookInitializers.concat(t):[t];return new e(this.name,this._subType,n)},e.prototype.instantiate=function(t,e,n,r){return this._determineIdentifierMode(),J(this,t,e,n,r)},e.prototype._determineIdentifierMode=function(){if(this.identifierMode===Nt.UNKNOWN){var t=[];if(function t(e,n){var r,i,o=e.getSubTypes();if("cannotDetermine"===o)return!1;if(o){var a=pt(o);try{for(var s=l(a),u=s.next();!u.done;u=s.next()){if(!t(u.value,n))return!1}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return e instanceof $t&&n.push(e),!0}(this._subType,t)){var e=void 0;t.forEach((function(t){if(t.identifierAttribute){if(e&&e!==t.identifierAttribute)throw at("The objects in a map should all have the same identifier attribute, expected '"+e+"', but child of type '"+t.name+"' declared attribute '"+t.identifierAttribute+"' as identifier");e=t.identifierAttribute}})),e?(this.identifierMode=Nt.YES,this.mapIdentifierAttribute=e):this.identifierMode=Nt.NO}}},e.prototype.initializeChildNodes=function(t,e){void 0===e&&(e={});var n=t.type._subType,r={};return Object.keys(e).forEach((function(i){r[i]=n.instantiate(t,i,void 0,e[i])})),r},e.prototype.createNewInstance=function(t){return new Vt(t)},e.prototype.finalizeNewInstance=function(t,e){Object(o._interceptReads)(e,t.unbox),t.type.hookInitializers.forEach((function(t){var n=t(e);Object.keys(n).forEach((function(t){var r=n[t],i=z(e,t,r);yt(e,t,i)}))})),Object(o.intercept)(e,this.willChange),Object(o.observe)(e,this.didChange)},e.prototype.describe=function(){return"Map<string, "+this._subType.describe()+">"},e.prototype.getChildren=function(t){return Object(o.values)(t.storedValue)},e.prototype.getChildNode=function(t,e){var n=t.storedValue.get(""+e);if(!n)throw at("Not a child "+e);return n},e.prototype.willChange=function(t){var e=X(t.object),n=t.name;e.assertWritable({subpath:n});var r=e.type,i=r._subType;switch(t.type){case"update":var o=t.newValue;if(o===t.object.get(n))return null;$(i,o),t.newValue=i.reconcile(e.getChildNode(n),t.newValue,e,n),r.processIdentifier(n,t.newValue);break;case"add":$(i,t.newValue),t.newValue=i.instantiate(e,n,void 0,t.newValue),r.processIdentifier(n,t.newValue)}return t},e.prototype.processIdentifier=function(t,e){if(this.identifierMode===Nt.YES&&e instanceof S){var n=e.identifier;if(n!==t)throw at("A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '"+n+"', but expected: '"+t+"'")}},e.prototype.getSnapshot=function(t){var e={};return t.getChildren().forEach((function(t){e[t.subpath]=t.snapshot})),e},e.prototype.processInitialSnapshot=function(t){var e={};return Object.keys(t).forEach((function(n){e[n]=t[n].getSnapshot()})),e},e.prototype.didChange=function(t){var e=X(t.object);switch(t.type){case"update":return void e.emitPatch({op:"replace",path:jt(t.name),value:t.newValue.snapshot,oldValue:t.oldValue?t.oldValue.snapshot:void 0},e);case"add":return void e.emitPatch({op:"add",path:jt(t.name),value:t.newValue.snapshot,oldValue:void 0},e);case"delete":var n=t.oldValue.snapshot;return t.oldValue.die(),void e.emitPatch({op:"remove",path:jt(t.name),oldValue:n},e)}},e.prototype.applyPatchLocally=function(t,e,n){var r=t.storedValue;switch(n.op){case"add":case"replace":r.set(e,n.value);break;case"remove":r.delete(e)}},e.prototype.applySnapshot=function(t,e){$(this,e);var n=t.storedValue,r={};if(Array.from(n.keys()).forEach((function(t){r[t]=!1})),e)for(var i in e)n.set(i,e[i]),r[""+i]=!0;Object.keys(r).forEach((function(t){!1===r[t]&&n.delete(t)}))},e.prototype.getChildType=function(){return this._subType},e.prototype.isValidSnapshot=function(t,e){var n=this;return ft(t)?H(Object.keys(t).map((function(r){return n._subType.validate(t[r],F(e,r,n._subType))}))):R(e,t,"Value is not a plain object")},e.prototype.getDefaultSnapshot=function(){return it},e.prototype.removeChild=function(t,e){t.storedValue.delete(e)},f([o.action],e.prototype,"applySnapshot",null),e}(P);var zt=function(t){function e(e,n,r){void 0===r&&(r=[]);var i=t.call(this,e)||this;return i._subType=n,i.flags=m.Array,i.hookInitializers=[],i.hookInitializers=r,i}return c(e,t),e.prototype.hooks=function(t){var n=this.hookInitializers.length>0?this.hookInitializers.concat(t):[t];return new e(this.name,this._subType,n)},e.prototype.instantiate=function(t,e,n,r){return J(this,t,e,n,r)},e.prototype.initializeChildNodes=function(t,e){void 0===e&&(e=[]);var n=t.type._subType,r={};return e.forEach((function(e,i){var o=""+i;r[o]=n.instantiate(t,o,void 0,e)})),r},e.prototype.createNewInstance=function(t){return o.observable.array(nt(t),ot)},e.prototype.finalizeNewInstance=function(t,e){Object(o._getAdministration)(e).dehancer=t.unbox,t.type.hookInitializers.forEach((function(t){var n=t(e);Object.keys(n).forEach((function(t){var r=n[t],i=z(e,t,r);yt(e,t,i)}))})),Object(o.intercept)(e,this.willChange),Object(o.observe)(e,this.didChange)},e.prototype.describe=function(){return this._subType.describe()+"[]"},e.prototype.getChildren=function(t){return t.storedValue.slice()},e.prototype.getChildNode=function(t,e){var n=Number(e);if(n<t.storedValue.length)return t.storedValue[n];throw at("Not a child: "+e)},e.prototype.willChange=function(t){var e=X(t.object);e.assertWritable({subpath:""+t.index});var n=e.type._subType,r=e.getChildren();switch(t.type){case"update":if(t.newValue===t.object[t.index])return null;var i=Lt(e,n,[r[t.index]],[t.newValue],[t.index]);if(!i)return null;t.newValue=i[0];break;case"splice":var o=t.index,a=t.removedCount,s=t.added,u=Lt(e,n,r.slice(o,o+a),s,s.map((function(t,e){return o+e})));if(!u)return null;t.added=u;for(var c=o+a;c<r.length;c++)r[c].setParent(e,""+(c+s.length-a))}return t},e.prototype.getSnapshot=function(t){return t.getChildren().map((function(t){return t.snapshot}))},e.prototype.processInitialSnapshot=function(t){var e=[];return Object.keys(t).forEach((function(n){e.push(t[n].getSnapshot())})),e},e.prototype.didChange=function(t){var e=X(t.object);switch(t.type){case"update":return void e.emitPatch({op:"replace",path:""+t.index,value:t.newValue.snapshot,oldValue:t.oldValue?t.oldValue.snapshot:void 0},e);case"splice":for(var n=t.removedCount-1;n>=0;n--)e.emitPatch({op:"remove",path:""+(t.index+n),oldValue:t.removed[n].snapshot},e);for(n=0;n<t.addedCount;n++)e.emitPatch({op:"add",path:""+(t.index+n),value:e.getChildNode(""+(t.index+n)).snapshot,oldValue:void 0},e);return}},e.prototype.applyPatchLocally=function(t,e,n){var r=t.storedValue,i="-"===e?r.length:Number(e);switch(n.op){case"replace":r[i]=n.value;break;case"add":r.splice(i,0,n.value);break;case"remove":r.splice(i,1)}},e.prototype.applySnapshot=function(t,e){$(this,e),t.storedValue.replace(e)},e.prototype.getChildType=function(){return this._subType},e.prototype.isValidSnapshot=function(t,e){var n=this;return ct(t)?H(t.map((function(t,r){return n._subType.validate(t,F(e,""+r,n._subType))}))):R(e,t,"Value is not an array")},e.prototype.getDefaultSnapshot=function(){return rt},e.prototype.removeChild=function(t,e){t.storedValue.splice(Number(e),1)},f([o.action],e.prototype,"applySnapshot",null),e}(P);function Lt(t,e,n,r,i){for(var o,a=!0,s=0;;s++){var u=s<=r.length-1,c=n[s],p=u?r[s]:void 0,f=""+i[s];if(((o=p)instanceof _||o instanceof S)&&(p=p.storedValue),!c&&!u)break;if(u)if(c)if(Bt(c,p))n[s]=Ut(e,t,f,p,c);else{for(var l=void 0,h=s;h<n.length;h++)if(Bt(n[h],p)){l=n.splice(h,1)[0];break}a=!1;d=Ut(e,t,f,p,l);n.splice(s,0,d)}else{if(Z(p)&&X(p).parent===t)throw at("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+t.path+"/"+f+"', but it lives already at '"+X(p).path+"'");a=!1;var d=Ut(e,t,f,p);n.splice(s,0,d)}else a=!1,n.splice(s,1),c instanceof S&&c.createObservableInstanceIfNeeded(),c.die(),s--}return a?null:n}function Ut(t,e,n,r,i){$(t,r);var o=function(){if(Z(r)){var o=X(r);if(o.assertAlive(it),null!==o.parent&&o.parent===e)return o.setParent(e,n),o}return i?t.reconcile(i,r,e,n):t.instantiate(e,n,void 0,r)}();return i&&i!==o&&(i instanceof S&&i.createObservableInstanceIfNeeded(),i.die()),o}function Bt(t,e){if(!t.isAlive)return!1;if(Z(e)){var n=X(e);return n.isAlive&&n===t}return t.snapshot===e||t instanceof S&&null!==t.identifier&&t.identifierAttribute&&ft(e)&&t.identifier===Pe(e[t.identifierAttribute])&&t.type.is(e)}function Ft(t){return T(t)&&(t.flags&m.Array)>0}function Mt(){return X(this).toString()}var Rt={name:"AnonymousModel",properties:{},initializers:rt};function Ht(t){return Object.keys(t).reduce((function(t,e){var n,r,o;if(e in i)throw at("Hook '"+e+"' was defined as property. Hooks should be defined as part of the actions");var a=Object.getOwnPropertyDescriptor(t,e);if("get"in a)throw at("Getters are not supported as properties. Please use views instead");var s=a.value;if(null==s)throw at("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");if(ht(s))return Object.assign({},t,((n={})[e]=se(function(t){switch(typeof t){case"string":return Wt;case"number":return Jt;case"boolean":return Zt;case"object":if(t instanceof Date)return te}throw at("Cannot determine primitive type from value "+t)}(s),s),n));if(s instanceof Dt)return Object.assign({},t,((r={})[e]=se(s,{}),r));if(s instanceof zt)return Object.assign({},t,((o={})[e]=se(s,[]),o));if(T(s))return t;throw at("Invalid type definition for property '"+e+"', cannot infer a type from a value like '"+s+"' ("+typeof s+")")}),t)}var $t=function(t){function e(e){var n=t.call(this,e.name||Rt.name)||this;return n.flags=m.Object,n.named=function(t){return n.cloneAndEnhance({name:t})},n.props=function(t){return n.cloneAndEnhance({properties:t})},n.preProcessSnapshot=function(t){var e=n.preProcessor;return e?n.cloneAndEnhance({preProcessor:function(n){return e(t(n))}}):n.cloneAndEnhance({preProcessor:t})},n.postProcessSnapshot=function(t){var e=n.postProcessor;return e?n.cloneAndEnhance({postProcessor:function(n){return t(e(n))}}):n.cloneAndEnhance({postProcessor:t})},Object.assign(n,Rt,e),n.properties=Ht(n.properties),n.properties,n.propertyNames=Object.keys(n.properties),n.identifierAttribute=n._getIdentifierAttribute(),n}return c(e,t),e.prototype._getIdentifierAttribute=function(){var t=void 0;return this.forAllProps((function(e,n){if(n.flags&m.Identifier){if(t)throw at("Cannot define property '"+e+"' as object identifier, property '"+t+"' is already defined as identifier property");t=e}})),t},e.prototype.cloneAndEnhance=function(t){return new e({name:t.name||this.name,properties:Object.assign({},this.properties,t.properties),initializers:this.initializers.concat(t.initializers||[]),preProcessor:t.preProcessor||this.preProcessor,postProcessor:t.postProcessor||this.postProcessor})},e.prototype.actions=function(t){var e=this;return this.cloneAndEnhance({initializers:[function(n){return e.instantiateActions(n,t(n)),n}]})},e.prototype.instantiateActions=function(t,e){if(!ft(e))throw at("actions initializer should return a plain object containing actions");Object.keys(e).forEach((function(n){if("preProcessSnapshot"===n)throw at("Cannot define action 'preProcessSnapshot', it should be defined using 'type.preProcessSnapshot(fn)' instead");if("postProcessSnapshot"===n)throw at("Cannot define action 'postProcessSnapshot', it should be defined using 'type.postProcessSnapshot(fn)' instead");var r=e[n],o=t[n];if(n in i&&o){var a=r;r=function(){o.apply(null,arguments),a.apply(null,arguments)}}var s=r.$mst_middleware,u=r.bind(e);u.$mst_middleware=s;var c=z(t,n,u);e[n]=c,yt(t,n,c)}))},e.prototype.volatile=function(t){var e=this;if("function"!=typeof t)throw at("You passed an "+typeof t+" to volatile state as an argument, when function is expected");return this.cloneAndEnhance({initializers:[function(n){return e.instantiateVolatileState(n,t(n)),n}]})},e.prototype.instantiateVolatileState=function(t,e){if(!ft(e))throw at("volatile state initializer should return a plain object containing state");Object(o.set)(t,e)},e.prototype.extend=function(t){var e=this;return this.cloneAndEnhance({initializers:[function(n){var r=t(n),i=r.actions,o=r.views,a=r.state,s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(r,["actions","views","state"]);for(var u in s)throw at("The `extend` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '"+u+"'");return a&&e.instantiateVolatileState(n,a),o&&e.instantiateViews(n,o),i&&e.instantiateActions(n,i),n}]})},e.prototype.views=function(t){var e=this;return this.cloneAndEnhance({initializers:[function(n){return e.instantiateViews(n,t(n)),n}]})},e.prototype.instantiateViews=function(t,e){if(!ft(e))throw at("views initializer should return a plain object containing views");Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);if("get"in r)if(Object(o.isComputedProp)(t,n)){var i=Object(o._getAdministration)(t,n);i.derivation=r.get,i.scope=t,r.set&&(i.setter=Object(o.action)(i.name+"-setter",r.set))}else Object(o.computed)(t,n,r,!0);else{if("function"!=typeof r.value)throw at("A view member should either be a function or getter based property");yt(t,n,r.value)}}))},e.prototype.instantiate=function(t,e,n,r){return J(this,t,e,n,Z(r)?r:this.applySnapshotPreProcessor(r))},e.prototype.initializeChildNodes=function(t,e){void 0===e&&(e={});var n=t.type,r={};return n.forAllProps((function(n,i){r[n]=i.instantiate(t,n,void 0,e[n])})),r},e.prototype.createNewInstance=function(t){return o.observable.object(t,it,ot)},e.prototype.finalizeNewInstance=function(t,e){yt(e,"toString",Mt),this.forAllProps((function(n){Object(o._interceptReads)(e,n,t.unbox)})),this.initializers.reduce((function(t,e){return e(t)}),e),Object(o.intercept)(e,this.willChange),Object(o.observe)(e,this.didChange)},e.prototype.willChange=function(t){var e=t,n=X(e.object),r=e.name;n.assertWritable({subpath:r});var i=n.type.properties[r];return i&&($(i,e.newValue),e.newValue=i.reconcile(n.getChildNode(r),e.newValue,n,r)),e},e.prototype.didChange=function(t){var e=t,n=X(e.object);if(n.type.properties[e.name]){var r=e.oldValue?e.oldValue.snapshot:void 0;n.emitPatch({op:"replace",path:jt(e.name),value:e.newValue.snapshot,oldValue:r},n)}},e.prototype.getChildren=function(t){var e=this,n=[];return this.forAllProps((function(r){n.push(e.getChildNode(t,r))})),n},e.prototype.getChildNode=function(t,e){if(!(e in this.properties))throw at("Not a value property: "+e);var n=Object(o._getAdministration)(t.storedValue,e).value;if(!n)throw at("Node not available for property "+e);return n},e.prototype.getSnapshot=function(t,e){var n=this;void 0===e&&(e=!0);var r={};return this.forAllProps((function(e,i){Object(o.getAtom)(t.storedValue,e).reportObserved(),r[e]=n.getChildNode(t,e).snapshot})),e?this.applySnapshotPostProcessor(r):r},e.prototype.processInitialSnapshot=function(t){var e={};return Object.keys(t).forEach((function(n){e[n]=t[n].getSnapshot()})),this.applySnapshotPostProcessor(e)},e.prototype.applyPatchLocally=function(t,e,n){if("replace"!==n.op&&"add"!==n.op)throw at("object does not support operation "+n.op);t.storedValue[e]=n.value},e.prototype.applySnapshot=function(t,e){var n=this.applySnapshotPreProcessor(e);$(this,n),this.forAllProps((function(e){t.storedValue[e]=n[e]}))},e.prototype.applySnapshotPreProcessor=function(t){var e=this.preProcessor;return e?e.call(null,t):t},e.prototype.applySnapshotPostProcessor=function(t){var e=this.postProcessor;return e?e.call(null,t):t},e.prototype.getChildType=function(t){return St(),this.properties[t]},e.prototype.isValidSnapshot=function(t,e){var n=this,r=this.applySnapshotPreProcessor(t);return ft(r)?H(this.propertyNames.map((function(t){return n.properties[t].validate(r[t],F(e,t,n.properties[t]))}))):R(e,r,"Value is not a plain object")},e.prototype.forAllProps=function(t){var e=this;this.propertyNames.forEach((function(n){return t(n,e.properties[n])}))},e.prototype.describe=function(){var t=this;return"{ "+this.propertyNames.map((function(e){return e+": "+t.properties[e].describe()})).join("; ")+" }"},e.prototype.getDefaultSnapshot=function(){return it},e.prototype.removeChild=function(t,e){t.storedValue[e]=void 0},f([o.action],e.prototype,"applySnapshot",null),e}(P);function Yt(t){return T(t)&&(t.flags&m.Object)>0}var Gt=function(t){function e(e,n,r,i){void 0===i&&(i=st);var o=t.call(this,e)||this;return o.flags=n,o.checker=r,o.initializer=i,o.flags=n,o}return c(e,t),e.prototype.describe=function(){return this.name},e.prototype.instantiate=function(t,e,n,r){return K(this,t,e,n,r)},e.prototype.createNewInstance=function(t){return this.initializer(t)},e.prototype.isValidSnapshot=function(t,e){return ht(t)&&this.checker(t)?M():R(e,t,"Value is not a "+("Date"===this.name?"Date or a unix milliseconds timestamp":this.name))},e}(j),Wt=new Gt("string",m.String,(function(t){return"string"==typeof t})),Jt=new Gt("number",m.Number,(function(t){return"number"==typeof t})),Kt=new Gt("integer",m.Integer,(function(t){return ut(t)})),Zt=new Gt("boolean",m.Boolean,(function(t){return"boolean"==typeof t})),qt=new Gt("null",m.Null,(function(t){return null===t})),Xt=new Gt("undefined",m.Undefined,(function(t){return void 0===t})),Qt=new Gt("Date",m.Date,(function(t){return"number"==typeof t||t instanceof Date}),(function(t){return t instanceof Date?t:new Date(t)}));Qt.getSnapshot=function(t){return t.storedValue.getTime()};var te=Qt;var ee=function(t){function e(e){var n=t.call(this,JSON.stringify(e))||this;return n.flags=m.Literal,n.value=e,n}return c(e,t),e.prototype.instantiate=function(t,e,n,r){return K(this,t,e,n,r)},e.prototype.describe=function(){return JSON.stringify(this.value)},e.prototype.isValidSnapshot=function(t,e){return ht(t)&&t===this.value?M():R(e,t,"Value is not a literal "+JSON.stringify(this.value))},e}(j);function ne(t){return At(),new ee(t)}var re=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._subtype=n,o._predicate=r,o._message=i,o}return c(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){return this._subtype.flags|m.Refinement},enumerable:!1,configurable:!0}),e.prototype.describe=function(){return this.name},e.prototype.instantiate=function(t,e,n,r){return this._subtype.instantiate(t,e,n,r)},e.prototype.isAssignableFrom=function(t){return this._subtype.isAssignableFrom(t)},e.prototype.isValidSnapshot=function(t,e){var n=this._subtype.validate(t,e);if(n.length>0)return n;var r=Z(t)?X(t).snapshot:t;return this._predicate(r)?M():R(e,t,this._message(t))},e.prototype.reconcile=function(t,e,n,r){return this._subtype.reconcile(t,e,n,r)},e.prototype.getSubTypes=function(){return this._subtype},e}(E);var ie=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i._types=n,i._eager=!0,r=p({eager:!0,dispatcher:void 0},r),i._dispatcher=r.dispatcher,r.eager||(i._eager=!1),i}return c(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){var t=m.Union;return this._types.forEach((function(e){t|=e.flags})),t},enumerable:!1,configurable:!0}),e.prototype.isAssignableFrom=function(t){return this._types.some((function(e){return e.isAssignableFrom(t)}))},e.prototype.describe=function(){return"("+this._types.map((function(t){return t.describe()})).join(" | ")+")"},e.prototype.instantiate=function(t,e,n,r){var i=this.determineType(r,void 0);if(!i)throw at("No matching type for union "+this.describe());return i.instantiate(t,e,n,r)},e.prototype.reconcile=function(t,e,n,r){var i=this.determineType(e,t.type);if(!i)throw at("No matching type for union "+this.describe());return i.reconcile(t,e,n,r)},e.prototype.determineType=function(t,e){return this._dispatcher?this._dispatcher(t):e?e.is(t)?e:this._types.filter((function(t){return t!==e})).find((function(e){return e.is(t)})):this._types.find((function(e){return e.is(t)}))},e.prototype.isValidSnapshot=function(t,e){if(this._dispatcher)return this._dispatcher(t).validate(t,e);for(var n=[],r=0,i=0;i<this._types.length;i++){var o=this._types[i].validate(t,e);if(0===o.length){if(this._eager)return M();r++}else n.push(o)}return 1===r?M():R(e,t,"No type is applicable for the union").concat(H(n))},e.prototype.getSubTypes=function(){return this._types},e}(E);function oe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=T(t)?void 0:t,i=T(t)?d([t],e):e,o="("+i.map((function(t){return t.name})).join(" | ")+")";return new ie(o,i,r)}var ae=function(t){function e(e,n,r){var i=t.call(this,e.name)||this;return i._subtype=e,i._defaultValue=n,i.optionalValues=r,i}return c(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){return this._subtype.flags|m.Optional},enumerable:!1,configurable:!0}),e.prototype.describe=function(){return this._subtype.describe()+"?"},e.prototype.instantiate=function(t,e,n,r){if(this.optionalValues.indexOf(r)>=0){var i=this.getDefaultInstanceOrSnapshot();return this._subtype.instantiate(t,e,n,i)}return this._subtype.instantiate(t,e,n,r)},e.prototype.reconcile=function(t,e,n,r){return this._subtype.reconcile(t,this.optionalValues.indexOf(e)<0&&this._subtype.is(e)?e:this.getDefaultInstanceOrSnapshot(),n,r)},e.prototype.getDefaultInstanceOrSnapshot=function(){var t="function"==typeof this._defaultValue?this._defaultValue():this._defaultValue;return"function"==typeof this._defaultValue&&$(this,t),t},e.prototype.isValidSnapshot=function(t,e){return this.optionalValues.indexOf(t)>=0?M():this._subtype.validate(t,e)},e.prototype.isAssignableFrom=function(t){return this._subtype.isAssignableFrom(t)},e.prototype.getSubTypes=function(){return this._subtype},e}(E);function se(t,e,n){return function(t,e){if("function"!=typeof e&&Z(e))throw at("default value cannot be an instance, pass a snapshot or a function that creates an instance/snapshot instead");x(t,1)}(t,e),new ae(t,e,n||ue)}var ue=[void 0];var ce=se(Xt,void 0),pe=se(qt,null);function fe(t){return x(t,1),oe(t,ce)}var le=function(t){function e(e,n){var r=t.call(this,e)||this;return r._definition=n,r}return c(e,t),Object.defineProperty(e.prototype,"flags",{get:function(){return(this._subType?this._subType.flags:0)|m.Late},enumerable:!1,configurable:!0}),e.prototype.getSubType=function(t){if(!this._subType){var e=void 0;try{e=this._definition()}catch(t){if(!(t instanceof ReferenceError))throw t;e=void 0}if(t&&void 0===e)throw at("Late type seems to be used too early, the definition (still) returns undefined");e&&(this._subType=e)}return this._subType},e.prototype.instantiate=function(t,e,n,r){return this.getSubType(!0).instantiate(t,e,n,r)},e.prototype.reconcile=function(t,e,n,r){return this.getSubType(!0).reconcile(t,e,n,r)},e.prototype.describe=function(){var t=this.getSubType(!1);return t?t.name:"<uknown late type>"},e.prototype.isValidSnapshot=function(t,e){var n=this.getSubType(!1);return n?n.validate(t,e):M()},e.prototype.isAssignableFrom=function(t){var e=this.getSubType(!1);return!!e&&e.isAssignableFrom(t)},e.prototype.getSubTypes=function(){var t=this.getSubType(!1);return t||"cannotDetermine"},e}(E);var he=function(t){function e(e){var n=t.call(this,e?"frozen("+e.name+")":"frozen")||this;return n.subType=e,n.flags=m.Frozen,n}return c(e,t),e.prototype.describe=function(){return"<any immutable value>"},e.prototype.instantiate=function(t,e,n,r){return K(this,t,e,n,r)},e.prototype.isValidSnapshot=function(t,e){return function(t){return"function"!=typeof t}(t)?this.subType?this.subType.validate(t,e):M():R(e,t,"Value is not serializable and cannot be frozen")},e}(j),de=new he;var ye=function(){function t(t,e){if(this.targetType=e,je(t))this.identifier=t;else{if(!Z(t))throw at("Can only store references to tree nodes or identifiers, got: '"+t+"'");var n=X(t);if(!n.identifierAttribute)throw at("Can only store references with a defined identifier attribute.");var r=n.unnormalizedIdentifier;if(null==r)throw at("Can only store references to tree nodes with a defined identifier.");this.identifier=r}}return t.prototype.updateResolvedReference=function(t){var e=Pe(this.identifier),n=t.root,r=n.identifierCache.getLastCacheModificationPerId(e);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==r){var i=this.targetType,o=n.identifierCache.resolve(i,e);if(!o)throw new ge("[mobx-state-tree] Failed to resolve reference '"+this.identifier+"' to type '"+this.targetType.name+"' (from node: "+t.path+")");this.resolvedReference={node:o,lastCacheModification:r}}},Object.defineProperty(t.prototype,"resolvedValue",{get:function(){return this.updateResolvedReference(this.node),this.resolvedReference.node.value},enumerable:!1,configurable:!0}),t}(),ge=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return c(e,t),e}(Error),ve=function(t){function e(e,n){var r=t.call(this,"reference("+e.name+")")||this;return r.targetType=e,r.onInvalidated=n,r.flags=m.Reference,r}return c(e,t),e.prototype.describe=function(){return this.name},e.prototype.isAssignableFrom=function(t){return this.targetType.isAssignableFrom(t)},e.prototype.isValidSnapshot=function(t,e){return je(t)?M():R(e,t,"Value is not a valid identifier, which is a string or a number")},e.prototype.fireInvalidated=function(t,e,n,r){var i=e.parent;if(i&&i.isAlive){var o=i.storedValue;o&&this.onInvalidated({cause:t,parent:o,invalidTarget:r?r.storedValue:void 0,invalidId:n,replaceRef:function(t){g(e.root.storedValue,{op:"replace",value:t,path:e.path})},removeRef:function(){Yt(i.type)?this.replaceRef(void 0):g(e.root.storedValue,{op:"remove",path:e.path})}})}},e.prototype.addTargetNodeWatcher=function(t,e){var n=this,r=this.getValue(t);if(r){var o=X(r),a=function(r,a){var s=function(t){switch(t){case i.beforeDestroy:return"destroy";case i.beforeDetach:return"detach";default:return}}(a);s&&n.fireInvalidated(s,t,e,o)},s=o.registerHook(i.beforeDetach,a),u=o.registerHook(i.beforeDestroy,a);return function(){s(),u()}}},e.prototype.watchTargetNodeForInvalidations=function(t,e,n){var r=this;if(this.onInvalidated){var o;t.registerHook(i.beforeDestroy,(function(){o&&o()}));var a=function(i){o&&o();var a=t.parent,s=a&&a.storedValue;if(a&&a.isAlive&&s){(n?!!n.get(e,s):t.root.identifierCache.has(r.targetType,Pe(e)))?o=r.addTargetNodeWatcher(t,e):i||r.fireInvalidated("invalidSnapshotReference",t,e,null)}};t.state===Y.FINALIZED?a(!0):(t.isRoot||t.root.registerHook(i.afterCreationFinalization,(function(){t.parent&&t.parent.createObservableInstanceIfNeeded()})),t.registerHook(i.afterAttach,(function(){a(!1)})))}},e}(j),be=function(t){function e(e,n){return t.call(this,e,n)||this}return c(e,t),e.prototype.getValue=function(t){if(t.isAlive)return t.storedValue.resolvedValue},e.prototype.getSnapshot=function(t){return t.storedValue.identifier},e.prototype.instantiate=function(t,e,n,r){var i,o=Z(r)?(q(i=r,1),X(i).identifier):r,a=new ye(r,this.targetType),s=K(this,t,e,n,a);return a.node=s,this.watchTargetNodeForInvalidations(s,o,void 0),s},e.prototype.reconcile=function(t,e,n,r){if(!t.isDetaching&&t.type===this){var i=Z(e),o=t.storedValue;if(!i&&o.identifier===e||i&&o.resolvedValue===e)return t.setParent(n,r),t}var a=this.instantiate(n,r,void 0,e);return t.die(),a},e}(ve),me=function(t){function e(e,n,r){var i=t.call(this,e,r)||this;return i.options=n,i}return c(e,t),e.prototype.getValue=function(t){if(t.isAlive)return this.options.get(t.storedValue,t.parent?t.parent.storedValue:null)},e.prototype.getSnapshot=function(t){return t.storedValue},e.prototype.instantiate=function(t,e,n,r){var i=Z(r)?this.options.set(r,t?t.storedValue:null):r,o=K(this,t,e,n,i);return this.watchTargetNodeForInvalidations(o,i,this.options),o},e.prototype.reconcile=function(t,e,n,r){var i=Z(e)?this.options.set(e,t?t.storedValue:null):e;if(!t.isDetaching&&t.type===this&&t.storedValue===i)return t.setParent(n,r),t;var o=this.instantiate(n,r,void 0,i);return t.die(),o},e}(ve);function we(t,e){x(t,1);var n=e||void 0,r=e?e.onInvalidated:void 0;return n&&(n.get||n.set)?new me(t,{get:n.get,set:n.set},r):new be(t,r)}var _e=function(t){function e(e,n){var r=t.call(this,e)||this;return r.validType=n,r.flags=m.Identifier,r}return c(e,t),e.prototype.instantiate=function(t,e,n,r){if(!(t&&t.type instanceof $t))throw at("Identifier types can only be instantiated as direct child of a model type");return K(this,t,e,n,r)},e.prototype.reconcile=function(t,e,n,r){if(t.storedValue!==e)throw at("Tried to change identifier from '"+t.storedValue+"' to '"+e+"'. Changing identifiers is not allowed.");return t.setParent(n,r),t},e.prototype.isValidSnapshot=function(t,e){return typeof t!==this.validType?R(e,t,"Value is not a valid "+this.describe()+", expected a "+this.validType):M()},e}(j),Ae=function(t){function e(){var e=t.call(this,"identifier","string")||this;return e.flags=m.Identifier,e}return c(e,t),e.prototype.describe=function(){return"identifier"},e}(_e),Ie=function(t){function e(){return t.call(this,"identifierNumber","number")||this}return c(e,t),e.prototype.getSnapshot=function(t){return t.storedValue},e.prototype.describe=function(){return"identifierNumber"},e}(_e),Se=new Ae,Ee=new Ie;function Pe(t){return""+t}function je(t){return"string"==typeof t||"number"==typeof t}var Te=function(t){function e(e){var n=t.call(this,e.name)||this;return n.options=e,n.flags=m.Custom,n}return c(e,t),e.prototype.describe=function(){return this.name},e.prototype.isValidSnapshot=function(t,e){if(this.options.isTargetType(t))return M();var n=this.options.getValidationMessage(t);return n?R(e,t,"Invalid value for type '"+this.name+"': "+n):M()},e.prototype.getSnapshot=function(t){return this.options.toSnapshot(t.storedValue)},e.prototype.instantiate=function(t,e,n,r){return K(this,t,e,n,this.options.isTargetType(r)?r:this.options.fromSnapshot(r,t&&t.root.environment))},e.prototype.reconcile=function(t,e,n,r){var i=!this.options.isTargetType(e);if(!t.isDetaching&&(t.type===this&&(i?e===t.snapshot:e===t.storedValue)))return t.setParent(n,r),t;var o=i?this.options.fromSnapshot(e,n.root.environment):e,a=this.instantiate(n,r,void 0,o);return t.die(),a},e}(j),xe={enumeration:function(t,e){var n="string"==typeof t?e:t,r=oe.apply(void 0,d(n.map((function(t){return ne(""+t)}))));return"string"==typeof t&&(r.name=t),r},model:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="string"==typeof t[0]?t.shift():"AnonymousModel",r=t.shift()||{};return new $t({name:n,properties:r})},compose:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="string"==typeof t[0],r=n?t[0]:"AnonymousModel";return n&&t.shift(),t.reduce((function(t,e){return t.cloneAndEnhance({name:t.name+"_"+e.name,properties:e.properties,initializers:e.initializers,preProcessor:function(n){return e.applySnapshotPreProcessor(t.applySnapshotPreProcessor(n))},postProcessor:function(n){return e.applySnapshotPostProcessor(t.applySnapshotPostProcessor(n))}})})).named(r)},custom:function(t){return new Te(t)},reference:we,safeReference:function(t,e){var n=we(t,p(p({},e),{onInvalidated:function(t){t.removeRef()}}));return e&&!1===e.acceptsUndefined?n:fe(n)},union:oe,optional:se,literal:ne,maybe:fe,maybeNull:function(t){return x(t,1),oe(t,pe)},refinement:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="string"==typeof t[0]?t.shift():T(t[0])?t[0].name:null,r=t[0],i=t[1],o=t[2]?t[2]:function(t){return"Value does not respect the refinement predicate"};return x(r,[1,2]),St(),It(),It(),new re(n,r,i,o)},string:Wt,boolean:Zt,number:Jt,integer:Kt,Date:te,map:function(t){return new Dt("map<string, "+t.name+">",t)},array:function(t){return x(t,1),new zt(t.name+"[]",t)},frozen:function(t){return 0===arguments.length?de:T(t)?new he(t):se(de,t)},identifier:Se,identifierNumber:Ee,late:function(t,e){var n="string"==typeof t?t:"late("+t.toString()+")",r="string"==typeof t?e:t;return new le(n,r)},undefined:Xt,null:qt,snapshotProcessor:function(t,e,n){return x(t,1),new Ct(t,e,n)}}}).call(this,n(14),n(57).setImmediate)},function(t,e,n){var r=n(16);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=n(12)(Object,"create");t.exports=r},function(t,e,n){var r=n(43);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(49);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(11),i=n(22);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e,n){var r=n(9).Symbol;t.exports=r},function(t,e,n){var r=n(19),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(8),i=n(20),o=n(21),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},function(t,e,n){var r=n(30),i=n(35);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],p=!1,f=-1;function l(){p&&u&&(p=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!p){var t=s(l);p=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,p=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||p||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){t.exports=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){return i(e[a][1][t]||t)}),u,u.exports,t,e,n,r)}return n[a].exports}for(var o=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){(function(r,i,o,a,s,u,c,p,f){"use strict";var l=t("crypto");function h(t,e){return function(t,e){var n;if(void 0===(n="passthrough"!==e.algorithm?l.createHash(e.algorithm):new m).write&&(n.write=n.update,n.end=n.update),b(e,n).dispatch(t),n.update||n.end(""),n.digest)return n.digest("buffer"===e.encoding?void 0:e.encoding);var r=n.read();return"buffer"!==e.encoding?r.toString(e.encoding):r}(t,e=g(t,e))}(n=e.exports=h).sha1=function(t){return h(t)},n.keys=function(t){return h(t,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},n.MD5=function(t){return h(t,{algorithm:"md5",encoding:"hex"})},n.keysMD5=function(t){return h(t,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var d=l.getHashes?l.getHashes().slice():["sha1","md5"];d.push("passthrough");var y=["buffer","hex","binary","base64"];function g(t,e){e=e||{};var n={};if(n.algorithm=e.algorithm||"sha1",n.encoding=e.encoding||"hex",n.excludeValues=!!e.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===e.ignoreUnknown,n.respectType=!1!==e.respectType,n.respectFunctionNames=!1!==e.respectFunctionNames,n.respectFunctionProperties=!1!==e.respectFunctionProperties,n.unorderedArrays=!0===e.unorderedArrays,n.unorderedSets=!1!==e.unorderedSets,n.unorderedObjects=!1!==e.unorderedObjects,n.replacer=e.replacer||void 0,n.excludeKeys=e.excludeKeys||void 0,void 0===t)throw new Error("Object argument required.");for(var r=0;r<d.length;++r)d[r].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=d[r]);if(-1===d.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+d.join(", "));if(-1===y.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+y.join(", "));return n}function v(t){if("function"==typeof t)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))}function b(t,e,n){function r(t){return e.update?e.update(t,"utf8"):e.write(t,"utf8")}return n=n||[],{dispatch:function(e){t.replacer&&(e=t.replacer(e));var n=typeof e;return null===e&&(n="null"),this["_"+n](e)},_object:function(e){var i,a=Object.prototype.toString.call(e),s=/\[object (.*)\]/i.exec(a);if(s=(s=s?s[1]:"unknown:["+a+"]").toLowerCase(),0<=(i=n.indexOf(e)))return this.dispatch("[CIRCULAR:"+i+"]");if(n.push(e),void 0!==o&&o.isBuffer&&o.isBuffer(e))return r("buffer:"),r(e);if("object"===s||"function"===s||"asyncfunction"===s){var u=Object.keys(e);t.unorderedObjects&&(u=u.sort()),!1===t.respectType||v(e)||u.splice(0,0,"prototype","__proto__","constructor"),t.excludeKeys&&(u=u.filter((function(e){return!t.excludeKeys(e)}))),r("object:"+u.length+":");var c=this;return u.forEach((function(n){c.dispatch(n),r(":"),t.excludeValues||c.dispatch(e[n]),r(",")}))}if(!this["_"+s]){if(t.ignoreUnknown)return r("["+s+"]");throw new Error('Unknown object type "'+s+'"')}this["_"+s](e)},_array:function(e,i){i=void 0!==i?i:!1!==t.unorderedArrays;var o=this;if(r("array:"+e.length+":"),!i||e.length<=1)return e.forEach((function(t){return o.dispatch(t)}));var a=[],s=e.map((function(e){var r=new m,i=n.slice();return b(t,r,i).dispatch(e),a=a.concat(i.slice(n.length)),r.read().toString()}));return n=n.concat(a),s.sort(),this._array(s,!1)},_date:function(t){return r("date:"+t.toJSON())},_symbol:function(t){return r("symbol:"+t.toString())},_error:function(t){return r("error:"+t.toString())},_boolean:function(t){return r("bool:"+t.toString())},_string:function(t){r("string:"+t.length+":"),r(t.toString())},_function:function(e){r("fn:"),v(e)?this.dispatch("[native]"):this.dispatch(e.toString()),!1!==t.respectFunctionNames&&this.dispatch("function-name:"+String(e.name)),t.respectFunctionProperties&&this._object(e)},_number:function(t){return r("number:"+t.toString())},_xml:function(t){return r("xml:"+t.toString())},_null:function(){return r("Null")},_undefined:function(){return r("Undefined")},_regexp:function(t){return r("regex:"+t.toString())},_uint8array:function(t){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){return r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){return r("float32array:"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){return r("float64array:"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){return r("arraybuffer:"),this.dispatch(new Uint8Array(t))},_url:function(t){return r("url:"+t.toString())},_map:function(e){r("map:");var n=Array.from(e);return this._array(n,!1!==t.unorderedSets)},_set:function(e){r("set:");var n=Array.from(e);return this._array(n,!1!==t.unorderedSets)},_blob:function(){if(t.ignoreUnknown)return r("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return r("domwindow")},_process:function(){return r("process")},_timer:function(){return r("timer")},_pipe:function(){return r("pipe")},_tcp:function(){return r("tcp")},_udp:function(){return r("udp")},_tty:function(){return r("tty")},_statwatcher:function(){return r("statwatcher")},_securecontext:function(){return r("securecontext")},_connection:function(){return r("connection")},_zlib:function(){return r("zlib")},_context:function(){return r("context")},_nodescript:function(){return r("nodescript")},_httpparser:function(){return r("httpparser")},_dataview:function(){return r("dataview")},_signal:function(){return r("signal")},_fsevent:function(){return r("fsevent")},_tlswrap:function(){return r("tlswrap")}}}function m(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}n.writeToStream=function(t,e,n){return void 0===n&&(n=e,e={}),b(e=g(t,e),n).dispatch(t)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_794fcf4d.js","/")},{buffer:3,crypto:5,lYpoI2:10}],2:[function(t,e,n){(function(t,e,r,i,o,a,s,u,c){!function(t){"use strict";var e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),r="/".charCodeAt(0),i="0".charCodeAt(0),o="a".charCodeAt(0),a="A".charCodeAt(0),s="-".charCodeAt(0),u="_".charCodeAt(0);function c(t){var e=t.charCodeAt(0);return e===n||e===s?62:e===r||e===u?63:e<i?-1:e<i+10?e-i+26+26:e<a+26?e-a:e<o+26?e-o+26:void 0}t.toByteArray=function(t){var n,r,i,o,a;if(0<t.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var s=t.length;o="="===t.charAt(s-2)?2:"="===t.charAt(s-1)?1:0,a=new e(3*t.length/4-o),r=0<o?t.length-4:t.length;var u=0;function p(t){a[u++]=t}for(n=0;n<r;n+=4,0)p((16711680&(i=c(t.charAt(n))<<18|c(t.charAt(n+1))<<12|c(t.charAt(n+2))<<6|c(t.charAt(n+3))))>>16),p((65280&i)>>8),p(255&i);return 2==o?p(255&(i=c(t.charAt(n))<<2|c(t.charAt(n+1))>>4)):1==o&&(p((i=c(t.charAt(n))<<10|c(t.charAt(n+1))<<4|c(t.charAt(n+2))>>2)>>8&255),p(255&i)),a},t.fromByteArray=function(t){var e,n,r,i,o=t.length%3,a="";function s(t){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)}for(e=0,r=t.length-o;e<r;e+=3)a+=s((i=n=(t[e]<<16)+(t[e+1]<<8)+t[e+2])>>18&63)+s(i>>12&63)+s(i>>6&63)+s(63&i);switch(o){case 1:a+=s((n=t[t.length-1])>>2),a+=s(n<<4&63),a+="==";break;case 2:a+=s((n=(t[t.length-2]<<8)+t[t.length-1])>>10),a+=s(n>>4&63),a+=s(n<<2&63),a+="="}return a}}(void 0===n?this.base64js={}:n)}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:10}],3:[function(t,e,n){(function(e,r,i,o,a,s,u,c,p){var f=t("base64-js"),l=t("ieee754");function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);var r,o,a,s,u,c=typeof t;if("base64"===e&&"string"==c)for(t=(r=t).trim?r.trim():r.replace(/^\s+|\s+$/g,"");t.length%4!=0;)t+="=";if("number"==c)o=x(t);else if("string"==c)o=i.byteLength(t,e);else{if("object"!=c)throw new Error("First argument needs to be a number, array or string.");o=x(t.length)}if(i._useTypedArrays?a=i._augment(new Uint8Array(o)):((a=this).length=o,a._isBuffer=!0),i._useTypedArrays&&"number"==typeof t.byteLength)a._set(t);else if(O(u=t)||i.isBuffer(u)||u&&"object"==typeof u&&"number"==typeof u.length)for(s=0;s<o;s++)i.isBuffer(t)?a[s]=t.readUInt8(s):a[s]=t[s];else if("string"==c)a.write(t,0,e);else if("number"==c&&!i._useTypedArrays&&!n)for(s=0;s<o;s++)a[s]=0;return a}function h(t,e,n,r){return i._charsWritten=V(function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function d(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;i++)r+=String.fromCharCode(t[i]);return r}function y(t,e,n,r){r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=e,"missing offset"),B(e+1<t.length,"Trying to read beyond buffer length"));var i,o=t.length;if(!(o<=e))return n?(i=t[e],e+1<o&&(i|=t[e+1]<<8)):(i=t[e]<<8,e+1<o&&(i|=t[e+1])),i}function g(t,e,n,r){r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=e,"missing offset"),B(e+3<t.length,"Trying to read beyond buffer length"));var i,o=t.length;if(!(o<=e))return n?(e+2<o&&(i=t[e+2]<<16),e+1<o&&(i|=t[e+1]<<8),i|=t[e],e+3<o&&(i+=t[e+3]<<24>>>0)):(e+1<o&&(i=t[e+1]<<16),e+2<o&&(i|=t[e+2]<<8),e+3<o&&(i|=t[e+3]),i+=t[e]<<24>>>0),i}function v(t,e,n,r){if(r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=e,"missing offset"),B(e+1<t.length,"Trying to read beyond buffer length")),!(t.length<=e)){var i=y(t,e,n,!0);return 32768&i?-1*(65535-i+1):i}}function b(t,e,n,r){if(r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=e,"missing offset"),B(e+3<t.length,"Trying to read beyond buffer length")),!(t.length<=e)){var i=g(t,e,n,!0);return 2147483648&i?-1*(4294967295-i+1):i}}function m(t,e,n,r){return r||(B("boolean"==typeof n,"missing or invalid endian"),B(e+3<t.length,"Trying to read beyond buffer length")),l.read(t,e,n,23,4)}function w(t,e,n,r){return r||(B("boolean"==typeof n,"missing or invalid endian"),B(e+7<t.length,"Trying to read beyond buffer length")),l.read(t,e,n,52,8)}function _(t,e,n,r,i){i||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+1<t.length,"trying to write beyond buffer length"),z(e,65535));var o=t.length;if(!(o<=n))for(var a=0,s=Math.min(o-n,2);a<s;a++)t[n+a]=(e&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function A(t,e,n,r,i){i||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<t.length,"trying to write beyond buffer length"),z(e,4294967295));var o=t.length;if(!(o<=n))for(var a=0,s=Math.min(o-n,4);a<s;a++)t[n+a]=e>>>8*(r?a:3-a)&255}function I(t,e,n,r,i){i||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+1<t.length,"Trying to write beyond buffer length"),L(e,32767,-32768)),t.length<=n||_(t,0<=e?e:65535+e+1,n,r,i)}function S(t,e,n,r,i){i||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<t.length,"Trying to write beyond buffer length"),L(e,2147483647,-2147483648)),t.length<=n||A(t,0<=e?e:4294967295+e+1,n,r,i)}function E(t,e,n,r,i){i||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<t.length,"Trying to write beyond buffer length"),U(e,34028234663852886e22,-34028234663852886e22)),t.length<=n||l.write(t,e,n,r,23,4)}function P(t,e,n,r,i){i||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+7<t.length,"Trying to write beyond buffer length"),U(e,17976931348623157e292,-17976931348623157e292)),t.length<=n||l.write(t,e,n,r,52,8)}n.Buffer=i,n.SlowBuffer=i,n.INSPECT_MAX_BYTES=50,i.poolSize=8192,i._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(t){return!1}}(),i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.isBuffer=function(t){return!(null==t||!t._isBuffer)},i.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"hex":n=t.length/2;break;case"utf8":case"utf-8":n=N(t).length;break;case"ascii":case"binary":case"raw":n=t.length;break;case"base64":n=k(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;default:throw new Error("Unknown encoding")}return n},i.concat=function(t,e){if(B(O(t),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===t.length)return new i(0);if(1===t.length)return t[0];var n;if("number"!=typeof e)for(n=e=0;n<t.length;n++)e+=t[n].length;var r=new i(e),o=0;for(n=0;n<t.length;n++){var a=t[n];a.copy(r,o),o+=a.length}return r},i.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var o=r;r=e,e=n,n=o}e=Number(e)||0;var a,s,u,c,p,f=this.length-e;switch((!n||f<(n=Number(n)))&&(n=f),r=String(r||"utf8").toLowerCase()){case"hex":a=function(t,e,n,r){n=Number(n)||0;var o=t.length-n;(!r||o<(r=Number(r)))&&(r=o);var a=e.length;B(a%2==0,"Invalid hex string"),a/2<r&&(r=a/2);for(var s=0;s<r;s++){var u=parseInt(e.substr(2*s,2),16);B(!isNaN(u),"Invalid hex string"),t[n+s]=u}return i._charsWritten=2*s,s}(this,t,e,n);break;case"utf8":case"utf-8":c=e,p=n,a=i._charsWritten=V(N(t),this,c,p);break;case"ascii":case"binary":a=h(this,t,e,n);break;case"base64":s=e,u=n,a=i._charsWritten=V(k(t),this,s,u);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=function(t,e,n,r){return i._charsWritten=V(function(t){for(var e,n,r,i=[],o=0;o<t.length;o++)n=(e=t.charCodeAt(o))>>8,r=e%256,i.push(r),i.push(n);return i}(e),t,n,r)}(this,t,e,n);break;default:throw new Error("Unknown encoding")}return a},i.prototype.toString=function(t,e,n){var r,i,o,a,s=this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,(n=void 0!==n?Number(n):n=s.length)===e)return"";switch(t){case"hex":r=function(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=e;o<n;o++)i+=C(t[o]);return i}(s,e,n);break;case"utf8":case"utf-8":r=function(t,e,n){var r="",i="";n=Math.min(t.length,n);for(var o=e;o<n;o++)t[o]<=127?(r+=D(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return r+D(i)}(s,e,n);break;case"ascii":case"binary":r=d(s,e,n);break;case"base64":i=s,a=n,r=0===(o=e)&&a===i.length?f.fromByteArray(i):f.fromByteArray(i.slice(o,a));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=function(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(s,e,n);break;default:throw new Error("Unknown encoding")}return r},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.copy=function(t,e,n,r){if(n=n||0,r||0===r||(r=this.length),e=e||0,r!==n&&0!==t.length&&0!==this.length){B(n<=r,"sourceEnd < sourceStart"),B(0<=e&&e<t.length,"targetStart out of bounds"),B(0<=n&&n<this.length,"sourceStart out of bounds"),B(0<=r&&r<=this.length,"sourceEnd out of bounds"),r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o=r-n;if(o<100||!i._useTypedArrays)for(var a=0;a<o;a++)t[a+e]=this[a+n];else t._set(this.subarray(n,n+o),e)}},i.prototype.slice=function(t,e){var n=this.length;if(t=T(t,n,0),e=T(e,n,n),i._useTypedArrays)return i._augment(this.subarray(t,e));for(var r=e-t,o=new i(r,void 0,!0),a=0;a<r;a++)o[a]=this[a+t];return o},i.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},i.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},i.prototype.readUInt8=function(t,e){if(e||(B(null!=t,"missing offset"),B(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return this[t]},i.prototype.readUInt16LE=function(t,e){return y(this,t,!0,e)},i.prototype.readUInt16BE=function(t,e){return y(this,t,!1,e)},i.prototype.readUInt32LE=function(t,e){return g(this,t,!0,e)},i.prototype.readUInt32BE=function(t,e){return g(this,t,!1,e)},i.prototype.readInt8=function(t,e){if(e||(B(null!=t,"missing offset"),B(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return 128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){return v(this,t,!0,e)},i.prototype.readInt16BE=function(t,e){return v(this,t,!1,e)},i.prototype.readInt32LE=function(t,e){return b(this,t,!0,e)},i.prototype.readInt32BE=function(t,e){return b(this,t,!1,e)},i.prototype.readFloatLE=function(t,e){return m(this,t,!0,e)},i.prototype.readFloatBE=function(t,e){return m(this,t,!1,e)},i.prototype.readDoubleLE=function(t,e){return w(this,t,!0,e)},i.prototype.readDoubleBE=function(t,e){return w(this,t,!1,e)},i.prototype.writeUInt8=function(t,e,n){n||(B(null!=t,"missing value"),B(null!=e,"missing offset"),B(e<this.length,"trying to write beyond buffer length"),z(t,255)),e>=this.length||(this[e]=t)},i.prototype.writeUInt16LE=function(t,e,n){_(this,t,e,!0,n)},i.prototype.writeUInt16BE=function(t,e,n){_(this,t,e,!1,n)},i.prototype.writeUInt32LE=function(t,e,n){A(this,t,e,!0,n)},i.prototype.writeUInt32BE=function(t,e,n){A(this,t,e,!1,n)},i.prototype.writeInt8=function(t,e,n){n||(B(null!=t,"missing value"),B(null!=e,"missing offset"),B(e<this.length,"Trying to write beyond buffer length"),L(t,127,-128)),e>=this.length||(0<=t?this.writeUInt8(t,e,n):this.writeUInt8(255+t+1,e,n))},i.prototype.writeInt16LE=function(t,e,n){I(this,t,e,!0,n)},i.prototype.writeInt16BE=function(t,e,n){I(this,t,e,!1,n)},i.prototype.writeInt32LE=function(t,e,n){S(this,t,e,!0,n)},i.prototype.writeInt32BE=function(t,e,n){S(this,t,e,!1,n)},i.prototype.writeFloatLE=function(t,e,n){E(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){E(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){P(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){P(this,t,e,!1,n)},i.prototype.fill=function(t,e,n){if(t=t||0,e=e||0,n=n||this.length,"string"==typeof t&&(t=t.charCodeAt(0)),B("number"==typeof t&&!isNaN(t),"value is not a number"),B(e<=n,"end < start"),n!==e&&0!==this.length){B(0<=e&&e<this.length,"start out of bounds"),B(0<=n&&n<=this.length,"end out of bounds");for(var r=e;r<n;r++)this[r]=t}},i.prototype.inspect=function(){for(var t=[],e=this.length,r=0;r<e;r++)if(t[r]=C(this[r]),r===n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<Buffer "+t.join(" ")+">"},i.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(i._useTypedArrays)return new i(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;e<n;e+=1)t[e]=this[e];return t.buffer};var j=i.prototype;function T(t,e,n){return"number"!=typeof t?n:e<=(t=~~t)?e:0<=t||0<=(t+=e)?t:0}function x(t){return(t=~~Math.ceil(+t))<0?0:t}function O(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function C(t){return t<16?"0"+t.toString(16):t.toString(16)}function N(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(t.charCodeAt(n));else{var i=n;55296<=r&&r<=57343&&n++;for(var o=encodeURIComponent(t.slice(i,n+1)).substr(1).split("%"),a=0;a<o.length;a++)e.push(parseInt(o[a],16))}}return e}function k(t){return f.toByteArray(t)}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function D(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}function z(t,e){B("number"==typeof t,"cannot write a non-number as a number"),B(0<=t,"specified a negative value for writing an unsigned value"),B(t<=e,"value is larger than maximum value for type"),B(Math.floor(t)===t,"value has a fractional component")}function L(t,e,n){B("number"==typeof t,"cannot write a non-number as a number"),B(t<=e,"value larger than maximum allowed value"),B(n<=t,"value smaller than minimum allowed value"),B(Math.floor(t)===t,"value has a fractional component")}function U(t,e,n){B("number"==typeof t,"cannot write a non-number as a number"),B(t<=e,"value larger than maximum allowed value"),B(n<=t,"value smaller than minimum allowed value")}function B(t,e){if(!t)throw new Error(e||"Failed assertion")}i._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=j.get,t.set=j.set,t.write=j.write,t.toString=j.toString,t.toLocaleString=j.toString,t.toJSON=j.toJSON,t.copy=j.copy,t.slice=j.slice,t.readUInt8=j.readUInt8,t.readUInt16LE=j.readUInt16LE,t.readUInt16BE=j.readUInt16BE,t.readUInt32LE=j.readUInt32LE,t.readUInt32BE=j.readUInt32BE,t.readInt8=j.readInt8,t.readInt16LE=j.readInt16LE,t.readInt16BE=j.readInt16BE,t.readInt32LE=j.readInt32LE,t.readInt32BE=j.readInt32BE,t.readFloatLE=j.readFloatLE,t.readFloatBE=j.readFloatBE,t.readDoubleLE=j.readDoubleLE,t.readDoubleBE=j.readDoubleBE,t.writeUInt8=j.writeUInt8,t.writeUInt16LE=j.writeUInt16LE,t.writeUInt16BE=j.writeUInt16BE,t.writeUInt32LE=j.writeUInt32LE,t.writeUInt32BE=j.writeUInt32BE,t.writeInt8=j.writeInt8,t.writeInt16LE=j.writeInt16LE,t.writeInt16BE=j.writeInt16BE,t.writeInt32LE=j.writeInt32LE,t.writeInt32BE=j.writeInt32BE,t.writeFloatLE=j.writeFloatLE,t.writeFloatBE=j.writeFloatBE,t.writeDoubleLE=j.writeDoubleLE,t.writeDoubleBE=j.writeDoubleBE,t.fill=j.fill,t.inspect=j.inspect,t.toArrayBuffer=j.toArrayBuffer,t}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:11,lYpoI2:10}],4:[function(t,e,n){(function(n,r,i,o,a,s,u,c,p){var f=new(i=t("buffer").Buffer)(4);f.fill(0),e.exports={hash:function(t,e,n,r){return i.isBuffer(t)||(t=new i(t)),function(t,e,n){for(var r=new i(e),o=n?r.writeInt32BE:r.writeInt32LE,a=0;a<t.length;a++)o.call(r,t[a],4*a,!0);return r}(e(function(t,e){if(t.length%4!=0){var n=t.length+(4-t.length%4);t=i.concat([t,f],n)}for(var r=[],o=e?t.readInt32BE:t.readInt32LE,a=0;a<t.length;a+=4)r.push(o.call(t,a));return r}(t,r),8*t.length),n,r)}}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],5:[function(t,e,n){(function(e,r,i,o,a,s,u,c,p){i=t("buffer").Buffer;var f=t("./sha"),l=t("./sha256"),h=t("./rng"),d={sha1:f,sha256:l,md5:t("./md5")},y=64,g=new i(y);function v(t,e){var n=d[t=t||"sha1"],r=[];return n||b("algorithm:",t,"is not yet supported"),{update:function(t){return i.isBuffer(t)||(t=new i(t)),r.push(t),t.length,this},digest:function(t){var o=i.concat(r),a=e?function(t,e,n){i.isBuffer(e)||(e=new i(e)),i.isBuffer(n)||(n=new i(n)),e.length>y?e=t(e):e.length<y&&(e=i.concat([e,g],y));for(var r=new i(y),o=new i(y),a=0;a<y;a++)r[a]=54^e[a],o[a]=92^e[a];var s=t(i.concat([r,n]));return t(i.concat([o,s]))}(n,e,o):n(o);return r=null,t?a.toString(t):a}}}function b(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}g.fill(0),n.createHash=function(t){return v(t)},n.createHmac=function(t,e){return v(t,e)},n.randomBytes=function(t,e){if(!e||!e.call)return new i(h(t));try{e.call(this,void 0,new i(h(t)))}catch(t){e(t)}},function(t,e){for(var n in t)e(t[n])}(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],(function(t){n[t]=function(){b("sorry,",t,"is not implemented yet")}}))}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:10}],6:[function(t,e,n){(function(n,r,i,o,a,s,u,c,p){var f=t("./helpers");function l(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<t.length;a+=16){var s=n,u=r,c=i,p=o;n=d(n,r,i,o,t[a+0],7,-680876936),o=d(o,n,r,i,t[a+1],12,-389564586),i=d(i,o,n,r,t[a+2],17,606105819),r=d(r,i,o,n,t[a+3],22,-1044525330),n=d(n,r,i,o,t[a+4],7,-176418897),o=d(o,n,r,i,t[a+5],12,1200080426),i=d(i,o,n,r,t[a+6],17,-1473231341),r=d(r,i,o,n,t[a+7],22,-45705983),n=d(n,r,i,o,t[a+8],7,1770035416),o=d(o,n,r,i,t[a+9],12,-1958414417),i=d(i,o,n,r,t[a+10],17,-42063),r=d(r,i,o,n,t[a+11],22,-1990404162),n=d(n,r,i,o,t[a+12],7,1804603682),o=d(o,n,r,i,t[a+13],12,-40341101),i=d(i,o,n,r,t[a+14],17,-1502002290),n=y(n,r=d(r,i,o,n,t[a+15],22,1236535329),i,o,t[a+1],5,-165796510),o=y(o,n,r,i,t[a+6],9,-1069501632),i=y(i,o,n,r,t[a+11],14,643717713),r=y(r,i,o,n,t[a+0],20,-373897302),n=y(n,r,i,o,t[a+5],5,-701558691),o=y(o,n,r,i,t[a+10],9,38016083),i=y(i,o,n,r,t[a+15],14,-660478335),r=y(r,i,o,n,t[a+4],20,-405537848),n=y(n,r,i,o,t[a+9],5,568446438),o=y(o,n,r,i,t[a+14],9,-1019803690),i=y(i,o,n,r,t[a+3],14,-187363961),r=y(r,i,o,n,t[a+8],20,1163531501),n=y(n,r,i,o,t[a+13],5,-1444681467),o=y(o,n,r,i,t[a+2],9,-51403784),i=y(i,o,n,r,t[a+7],14,1735328473),n=g(n,r=y(r,i,o,n,t[a+12],20,-1926607734),i,o,t[a+5],4,-378558),o=g(o,n,r,i,t[a+8],11,-2022574463),i=g(i,o,n,r,t[a+11],16,1839030562),r=g(r,i,o,n,t[a+14],23,-35309556),n=g(n,r,i,o,t[a+1],4,-1530992060),o=g(o,n,r,i,t[a+4],11,1272893353),i=g(i,o,n,r,t[a+7],16,-155497632),r=g(r,i,o,n,t[a+10],23,-1094730640),n=g(n,r,i,o,t[a+13],4,681279174),o=g(o,n,r,i,t[a+0],11,-358537222),i=g(i,o,n,r,t[a+3],16,-722521979),r=g(r,i,o,n,t[a+6],23,76029189),n=g(n,r,i,o,t[a+9],4,-640364487),o=g(o,n,r,i,t[a+12],11,-421815835),i=g(i,o,n,r,t[a+15],16,530742520),n=v(n,r=g(r,i,o,n,t[a+2],23,-995338651),i,o,t[a+0],6,-198630844),o=v(o,n,r,i,t[a+7],10,1126891415),i=v(i,o,n,r,t[a+14],15,-1416354905),r=v(r,i,o,n,t[a+5],21,-57434055),n=v(n,r,i,o,t[a+12],6,1700485571),o=v(o,n,r,i,t[a+3],10,-1894986606),i=v(i,o,n,r,t[a+10],15,-1051523),r=v(r,i,o,n,t[a+1],21,-2054922799),n=v(n,r,i,o,t[a+8],6,1873313359),o=v(o,n,r,i,t[a+15],10,-30611744),i=v(i,o,n,r,t[a+6],15,-1560198380),r=v(r,i,o,n,t[a+13],21,1309151649),n=v(n,r,i,o,t[a+4],6,-145523070),o=v(o,n,r,i,t[a+11],10,-1120210379),i=v(i,o,n,r,t[a+2],15,718787259),r=v(r,i,o,n,t[a+9],21,-343485551),n=b(n,s),r=b(r,u),i=b(i,c),o=b(o,p)}return Array(n,r,i,o)}function h(t,e,n,r,i,o){return b((a=b(b(e,t),b(r,o)))<<(s=i)|a>>>32-s,n);var a,s}function d(t,e,n,r,i,o,a){return h(e&n|~e&r,t,e,i,o,a)}function y(t,e,n,r,i,o,a){return h(e&r|n&~r,t,e,i,o,a)}function g(t,e,n,r,i,o,a){return h(e^n^r,t,e,i,o,a)}function v(t,e,n,r,i,o,a){return h(n^(e|~r),t,e,i,o,a)}function b(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}e.exports=function(t){return f.hash(t,l,16)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],7:[function(t,e,n){(function(t,n,r,i,o,a,s,u,c){var p;p=function(t){for(var e,n=new Array(t),r=0;r<t;r++)0==(3&r)&&(e=4294967296*Math.random()),n[r]=e>>>((3&r)<<3)&255;return n},e.exports=p}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],8:[function(t,e,n){(function(n,r,i,o,a,s,u,c,p){var f=t("./helpers");function l(t,e){t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var n,r=Array(80),i=1732584193,o=-271733879,a=-1732584194,s=271733878,u=-1009589776,c=0;c<t.length;c+=16){for(var p=i,f=o,l=a,g=s,v=u,b=0;b<80;b++){r[b]=b<16?t[c+b]:y(r[b-3]^r[b-8]^r[b-14]^r[b-16],1);var m=d(d(y(i,5),h(b,o,a,s)),d(d(u,r[b]),(n=b)<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514));u=s,s=a,a=y(o,30),o=i,i=m}i=d(i,p),o=d(o,f),a=d(a,l),s=d(s,g),u=d(u,v)}return Array(i,o,a,s,u)}function h(t,e,n,r){return t<20?e&n|~e&r:!(t<40)&&t<60?e&n|e&r|n&r:e^n^r}function d(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function y(t,e){return t<<e|t>>>32-e}e.exports=function(t){return f.hash(t,l,20,!0)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],9:[function(t,e,n){(function(n,r,i,o,a,s,u,c,p){function f(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function l(t,e){return t>>>e|t<<32-e}function h(t,e){return t>>>e}function d(t,e){var n,r,i,o,a,s,u,c,p,d,y,g,v,b,m,w,_,A,I=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),S=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),E=new Array(64);t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var P=0;P<t.length;P+=16){n=S[0],r=S[1],i=S[2],o=S[3],a=S[4],s=S[5],u=S[6],c=S[7];for(var j=0;j<64;j++)E[j]=j<16?t[j+P]:f(f(f(l(A=E[j-2],17)^l(A,19)^h(A,10),E[j-7]),l(_=E[j-15],7)^l(_,18)^h(_,3)),E[j-16]),p=f(f(f(f(c,l(w=a,6)^l(w,11)^l(w,25)),(m=a)&s^~m&u),I[j]),E[j]),d=f(l(b=n,2)^l(b,13)^l(b,22),(y=n)&(g=r)^y&(v=i)^g&v),c=u,u=s,s=a,a=f(o,p),o=i,i=r,r=n,n=f(p,d);S[0]=f(n,S[0]),S[1]=f(r,S[1]),S[2]=f(i,S[2]),S[3]=f(o,S[3]),S[4]=f(a,S[4]),S[5]=f(s,S[5]),S[6]=f(u,S[6]),S[7]=f(c,S[7])}return S}var y=t("./helpers");e.exports=function(t){return y.hash(t,d,32,!0)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],10:[function(t,e,n){(function(t,n,r,i,o,a,s,u,c){function p(){}(t=e.exports={}).nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",(function(t){var e=t.source;e!==window&&null!==e||"process-tick"!==t.data||(t.stopPropagation(),0<n.length&&n.shift()())}),!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),t.title="browser",t.browser=!0,t.env={},t.argv=[],t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:10}],11:[function(t,e,n){(function(t,e,r,i,o,a,s,u,c){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,p=-7,f=n?i-1:0,l=n?-1:1,h=t[e+f];for(f+=l,o=h&(1<<-p)-1,h>>=-p,p+=s;0<p;o=256*o+t[e+f],f+=l,p-=8);for(a=o&(1<<-p)-1,o>>=-p,p+=r;0<p;a=256*a+t[e+f],f+=l,p-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,p=(1<<c)-1,f=p>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=p):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),2<=(e+=1<=a+f?l/u:l*Math.pow(2,1-f))*u&&(a++,u/=2),p<=a+f?(s=0,a=p):1<=a+f?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));8<=i;t[n+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;0<c;t[n+h]=255&a,h+=d,a/=256,c-=8);t[n+h-d]|=128*y}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/ieee754/index.js","/node_modules/ieee754")},{buffer:3,lYpoI2:10}]},{},[1])(1)},function(t,e,n){var r=n(17),i=n(56);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e,n){var r=n(6),i=n(18),o=n(23),a=n(53);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e,n){var r=n(6),i=n(7),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(10))},function(t,e,n){var r=n(8),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=n(24),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(25);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(26);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(27),i=n(48),o=n(50),a=n(51),s=n(52);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(28),i=n(40),o=n(47);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(29),i=n(36),o=n(37),a=n(38),s=n(39);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(3);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e,n){var r=n(31),i=n(32),o=n(13),a=n(34),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,p=u.toString,f=c.hasOwnProperty,l=RegExp("^"+p.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?l:s).test(a(t))}},function(t,e,n){var r=n(11),i=n(13);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r,i=n(33),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},function(t,e,n){var r=n(9)["__core-js_shared__"];t.exports=r},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(3),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(3),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(3);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(41),i=n(42),o=n(44),a=n(45),s=n(46);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(4),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(4);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(4);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(4);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(12)(n(9),"Map");t.exports=r},function(t,e,n){var r=n(5);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(5);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(5);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(5);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(54);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(8),i=n(55),o=n(6),a=n(7),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){var r=n(7);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(58),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(10))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,u=1,c={},p=!1,f=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},l.clearImmediate=h}function h(t){delete c[t]}function d(t){if(p)setTimeout(d,0,t);else{var e=c[t];if(e){p=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{h(t),p=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(10),n(14))},function(t,e,n){"use strict";n.r(e),n.d(e,"getStore",(function(){return j}));var r=n(15),i=n.n(r),o=n(2),a=n.n(o);const s={"Content-type":"application/json; charset=utf-8"},u=/.*/,c={json:"json",text:"text",blob:"blob",formData:"formData",arrayBuffer:"arrayBuffer"};function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class f{constructor({apiName:t,apiHost:e,getToken:n,headers:r=s,allowNoTokenEndpoints:i=u,defaultResponseFormat:o=c.json,paginationTemplate:a="limit={pageSize}&offset={offset}",entityDataAddress:f,genericTypeAddress:l="_object",entityErrorAddress:h,arrayDataAddress:d,arrayErrorAddress:y,arrayCountAddress:g}={}){p(this,"callGet",(t,e={},...n)=>this.callApi(t,{...e,method:"GET",body:void 0},...n)),p(this,"callPost",(t,e={},...n)=>this.callApi(t,{...e,method:"POST"},...n)),p(this,"callPut",(t,e={},...n)=>this.callApi(t,{...e,method:"PUT"},...n)),p(this,"callPatch",(t,e={},...n)=>this.callApi(t,{...e,method:"PATCH"},...n)),p(this,"callDelete",(t,e={},...n)=>this.callApi(t,{...e,method:"DELETE"},...n)),this.apiName=t,this.apiHost=e,this.getToken=n,this.headers=r,this.allowNoTokenEndpoints=i,Array.isArray(this.allowNoTokenEndpoints)||(this.allowNoTokenEndpoints=[this.allowNoTokenEndpoints]),this.defaultResponseFormat=o,this.paginationTemplate=a,this.entityDataAddress=f,this.genericTypeAddress=l,this.entityErrorAddress=h,this.arrayDataAddress=d,this.arrayErrorAddress=y,this.arrayCountAddress=g}getItemGenericType(t){return a()(t,this.genericTypeAddress)}async getResponseData(t,e,n){const r=c[e||this.defaultResponseFormat];if(!r)return console.error(`Error. Unknown format "${e||this.defaultResponseFormat}"`),{status:500,error:{global:`Unknown format "${e||this.defaultResponseFormat}"`}};const i=await t[r](),o=n?this.entityDataAddress:this.arrayDataAddress,s=o?a()(i,o):i,u=n?this.entityErrorAddress:this.arrayErrorAddress,p=u?a()(i,u):i;let f=1;return n||(f=this.arrayCountAddress?a()(i,this.arrayCountAddress):s.length),{status:t.status,data:t.status<400?s:void 0,error:t.status<400?void 0:p,count:f}}getUrl(t,{pk:e,filters:n,hash:r="",page:i,pageSize:o}={}){let a;if(e){let n;n=/\/$/.test(t)?`${t}${e}/`:`${t}/${e}`,a=new URL(n,this.apiHost)}else a=new URL(t,this.apiHost);if(a.hash=r,n)if("string"==typeof n)a.search=n;else{if("object"!=typeof n||Array.isArray(n))throw new Error("Incorrect filters format");Object.keys(n).forEach(t=>{const e=n[t];Array.isArray(e)?e.forEach(e=>{a.searchParams.append(t,e)}):a.searchParams.append(t,e)})}if(o){const t=i*o,e=(s=this.paginationTemplate,u={pageNumber:i,pageSize:o,offset:t},s.replace(/\{([^{}]+)\}/g,(t,e)=>void 0!==u[e]?u[e]:t)),n=new URL("http://trood.com");n.search=e;for(let t of n.searchParams.keys()){const e=n.searchParams.getAll(t);Array.isArray(e)?e.forEach(e=>{a.searchParams.append(t,e)}):a.searchParams.append(t,e)}}var s,u;return a.toString()}async callApi(t,{pk:e,method:n,headers:r,body:o,filters:a,page:s,pageSize:u,hash:c,format:p,cacheMaxAgeMs:l=6e4}={},h=(()=>{})){let d,y;"function"==typeof this.getToken&&(d=this.getToken()),d instanceof Promise&&(d=await d);try{y=this.getUrl(t,{pk:e,filters:a,hash:c,page:s,pageSize:u})}catch(t){return console.error("Error. "+t),{status:500,error:{global:t}}}const g=i()({url:y,method:n});if(!d){if(!this.allowNoTokenEndpoints.some(e=>"string"==typeof e?e===t:e instanceof RegExp&&e.test(t)))return console.warn(`Called ${y} which requires token, but there was no token found!`),{status:401,error:{global:"Authorization token is required"}}}const v=(new Date).getTime();if("GET"===n){const t=f.cache[g]||0;if(t+l>v)return{status:0};t||(f.cache[g]=v)}let b;d&&(b={Authorization:d}),b={...b,...this.headers,...r},h();const m=await fetch(y,{method:n,body:o,headers:b}),w=await this.getResponseData(m,p,e);return w.error?f.cache[g]=void 0:f.cache[g]=(new Date).getTime(),w}}p(f,"cache",{});var l=f;const h={};var d=({apiName:t,...e}={})=>{const n=h[t];return n||(h[t]=new l({apiName:t,...e}),h[t])},y=n(1);const g=/fk\((.*)\)/,v=/fk_array\((.*)\)/,b=(t,e,n,r)=>y.c.late(`lateRef(${t}:${e})`,()=>y.c.reference(r(t,e),{get:r=>n().apis[t][e].items.getWithProxy(r,n()),set:t=>t.pk})),m=(t,e,n)=>{if("string"!=typeof t)return;const r=t.match(e);return r?r[1].split(",").map(t=>{const e=(t.includes(":")?t.trim():`${n}:${t.trim()}`).split(":");return{apiName:e[0],modelName:e[1]}}):void 0},w=(t,e="",n=!1,r,i)=>{if(n)return"number"===e?y.c.identifierNumber:y.c.identifier;if("object"==typeof y.c[e])return y.c.maybeNull(y.c[e]);const o=m(e,g,t);if(o)return y.c.union(y.c.null,y.c.undefined,...o.map(t=>b(t.apiName,t.modelName,r,i)));const a=m(e,v,t);return a?y.c.optional(y.c.array(y.c.union(y.c.null,y.c.undefined,...a.map(t=>b(t.apiName,t.modelName,r,i)))),[]):y.c.maybeNull(y.c.frozen())};var _=({apiAdapter:t,modelName:e,modelPk:n,modelEndpoint:r,modelFields:i},o,a,s)=>{const u=((t,e,n,r,i,o)=>{const a=Object.keys(r).reduce((e,a)=>{const s=r[a];return{...e,[a]:w(t,s,a===n,i,o)}},{$modelName:e,$loading:!1,$loadedById:!1,$error:0,$errorData:y.c.maybeNull(y.c.frozen())});return y.c.model(e,a).views(t=>({get pk(){return t[n]}}))})(t.apiName,e,n,i,o,a);s(t.apiName,e,u);const c=y.c.model(e+"_page",{page:y.c.identifierNumber,items:y.c.map(y.c.reference(u)),$loading:!1,$error:0,$errorData:y.c.maybeNull(y.c.frozen())}),p=y.c.model(e+"_pages",{pageSize:y.c.identifierNumber,pages:y.c.map(c)}),f=y.c.model(e+"_map",{url:y.c.identifier,count:y.c.number,pageSizes:y.c.map(p)});return y.c.model(e+"_list",{modelName:y.c.identifier,items:y.c.map(u).hooks(e=>({getWithProxy(n,r){const i=e.get(n),o=r.apis[t.apiName][u.name];return new Proxy(i,{get(t,e){const n=t[e];return u.properties[e]?(Object.prototype.hasOwnProperty.call(t,e)&&null==n&&(t.$loading||t.$loadedById||o.getByPk(t.pk)),n):n}})}})),lists:y.c.map(f)}).views(e=>({asyncGetByPk:(n,i={})=>(e.createItem(n),t.callGet(r,{...i,pk:n},()=>{e.setItemLoading(n,!0)}).then(({status:t,error:r,data:a})=>(t&&(r?e.setItemError(n,t,r):e.createItem({...a,$loading:!1,$loadedById:!i.filters,$error:0,$errorData:null})),e.items.getWithProxy(n,o())||{}))),getByPk:(t,n={})=>(e.asyncGetByPk(t,n),e.items.getWithProxy(t,o())||{}),asyncGetPage(n=0,i=0,o={}){const a=t.getUrl(r,o);return e.createList(a,n,i),t.callGet(r,{...o,page:n,pageSize:i}).then(t=>{t.status&&e.createList(a,n,i,t);const r=e.lists.get(a).pageSizes.get(i).pages.get(n);return r?Array.from(r.items.values()):[]})},getPage(n=0,i=0,o={}){const a=t.getUrl(r,o);e.asyncGetPage(n,i,o);const s=e.lists.get(a).pageSizes.get(i).pages.get(n);return s?Array.from(s.items.values()):[]},getInfinityPages(n=0,i={}){let o=0;const a=t.getUrl(r,i);e.lists.has(a)&&e.lists.get(a).pageSizes.has(n)&&e.lists.get(a).pageSizes.get(n).pages.has(o)||e.asyncGetPage(o,n,i);let s=e.lists.get(a).pageSizes.get(n).pages.get(o),u=[];for(;s;)u=[...u,...Array.from(s.items.values())],o+=1,s=e.lists.get(a).pageSizes.get(n).pages.get(o);return u},getInfinityNextPageNumber(n=0,i={}){let o=0;const a=t.getUrl(r,i),{count:s,pageSizes:u}=e.lists.get(a),{pages:c}=u.get(n);for(;c.has(o);)o+=1;if(!(o*n>s))return o},getInfinityNextPage(t=0,n={}){const r=e.getInfinityNextPageNumber(t,n);void 0!==r&&e.asyncGetPage(r,t,n)}})).actions(e=>({createItem(n){const r=u.identifierAttribute;if("object"==typeof n){const i=n[r],a=((t,e)=>{const n=t.get(e);return n?{...Object(y.a)(n)}:{}})(e.items,i),s={[r]:i};return e.items.has(i)||e.items.set(i,s),Object.keys(n).forEach(e=>{const r=u.properties[e],i=(t=>{if(!t)return;const e=Array.from((t.name||"").matchAll(/lateRef\(([\w:]*)\)/g)).map(t=>t[1]);return e.length?e:void 0})(r);if(i){const s=o();if(Object(y.b)(r))if(1===i.length){const t=i[0].split(":");a[e]=n[e].map(e=>s.apis[t[0]][t[1]].createItem(e))}else a[e]=n[e].map(e=>{const n=t.getItemGenericType(e).split(":");return 1===n.length&&(n.push(n[0]),n[0]=t.apiName),s.apis[n[0]][n[1]].createItem(e)});else if(1===i.length){const t=i[0].split(":");a[e]=s.apis[t[0]][t[1]].createItem(n[e])}else{const r=t.getItemGenericType(n[e]).split(":");1===r.length&&(r.push(r[0]),r[0]=t.apiName),a[e]=s.apis[r[0]][r[1]].createItem(n[e])}}else a[e]=n[e]}),e.items.set(i,a),e.items.get(i)}return e.items.has(n)||e.items.set(n,{[r]:n}),e.items.get(n)},createList(t,n=0,r=0,i){let o,a,s;if(i){const{data:u=[],count:c=0,status:p,error:f}=i;o={page:n,items:u.reduce((t,n)=>{const r=e.createItem({...n,$error:0,$errorData:void 0});return{...t,[r]:r}},{}),$error:f?p:0,$errorData:f},a={pageSize:r,pages:{[n]:o}},s={url:t,count:c,pageSizes:{[r]:a}}}else a={pageSize:r},s={url:t,count:0,pageSizes:{[r]:a}};const u=e.lists.get(t);if(u){const t=u.pageSizes.get(r);if(t){const e=t.pages.get(n);(e&&i||!e&&o)&&t.pages.set(n,o)}else u.pageSizes.set(r,a)}else e.lists.set(t,s);s.count&&(u.count=s.count)},setItemLoading(t,n){e.items.has(t)&&(e.items.get(t).$loading=n)},setItemError(t,n,r){const i=u.identifierAttribute;e.items.set(t,{[i]:t,$loading:!1,$error:n,$errorData:r})}}))};const A={};let I={};const S=()=>I,E=(t,e)=>A[t][e],P=(t,e,n)=>{A[t]||(A[t]={}),A[t][e]=n};var j=(t={},e)=>(I.apis||(I.apis={}),Object.keys(t).forEach(n=>{I.apis[n]||(I.apis[n]={});const r=t[n],i=d({...r,apiName:n,getToken:e});Object.keys(r.objects).forEach(t=>{const e=r.objects[t],o={apiAdapter:i,modelName:t,modelPk:e.pk,modelEndpoint:e.endpoint,modelFields:e.fields},a=_(o,S,E,P);I.apis[n][t]=a.create({modelName:t})})}),I)}])}));